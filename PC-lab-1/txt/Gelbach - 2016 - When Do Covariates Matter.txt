When Do Covariates Matter?
And Which Ones, and How Much?
Jonah B. Gelbach,

University of Pennsylvania Law School

Authors often add covariates to a base model sequentially either
to test a particular coefficient’s “robustness” or to account for the
“effects” on this coefficient of adding covariates. This is problematic, due to sequence sensitivity when added covariates are intercorrelated. Using the omitted variables bias formula, I construct a conditional decomposition that accounts for various covariates’ role in
moving base regressors’ coefficients. I also provide a consistent covariance formula. I illustrate this conditional decomposition with
NLSY data in an application that exhibits sequence sensitivity. Related extensions include instrumental variables, the fact that my decomposition nests the Oaxaca-Blinder decomposition, and a Hausman test result.
I. Introduction
It is a staple of contemporary empirical research, across many fields of
economics, to estimate multiple versions of a linear regression model. One
starts from a base specification and then adds progressively more covariates. One basic objective of sequential addition is to evaluate the robustI thank Joe Altonji, David Card, Mark Duggan, Bill Evans, Nicole Fortin, Steve
Haider, Judy Hellerstein, Kei Hirano, Jon Klick, Thomas Lemieux, Justin McCrary, Ingmar Prucha, Seth Sanders, Jim Smith, Duncan Thomas, Alex Whalley,
Justin Wolfers, and seminar participants at Berkeley, the Bureau of Labor Statistics, London School of Economics, University of California Irvine, University
of Maryland, and RAND for helpful comments and discussions. I am also very
grateful to Jenny Hawkins and Alex Whalley for excellent research assistance.
Contact the corresponding author, Jonah Gelbach, at jgelbach@law.upenn.edu.
Information concerning access to the data used in this article is available as supplementary material online.
[ Journal of Labor Economics, 2016, vol. 34, no. 2, pt. 1]
© 2016 by The University of Chicago. All rights reserved. 0734-306X/2016/3402-0003$10.00
Submitted June 19, 2012; Accepted August 29, 2014; Electronically published January 22, 2016

509

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

510

Gelbach

ness of the coefficient on some variable of interest, X1, as various covariates in X2 are partialed out. A second common objective is to answer the
accounting question: How much of the change in X1 coefficients can be
attributed to different variables in X2 as one moves from a base specification that has no X2 covariates to the full specification that has all of them?
Many cases of interest involve attempts to determine how much of a crossgroup difference in some outcome variables mean is due to group-level
heterogeneity in observables, as with the case of the black-white wage gap.
In that example, Y represents log wages, X1 includes a constant and a
dummy variable indicating whether a person is black ðand possibly also
some other baseline controlsÞ, and X2 contains a variety of observed covariates that are potentially related to wages and that may vary systematically
across race, such as completed education and Armed Forces Qualification
Test ðAFQTÞ score ðintended to measure pre-market skillsÞ.
The current approach to answering this accounting question is to first
measure the change in the estimated race-dummy coefficient as each new
set of covariates is added and then attribute this change to the most recently
added set of variables. The problem with this approach is that the order
in which additional covariates enter the regression can affect the accounting. Of course the problem of sequence dependence is hardly unknown.
However, as I discuss in Section II, it is easy to list many otherwise excellent papers in which authors add covariates sequentially in carrying out
either robustness or decomposition analyses. In Section III, I illustrate the
problem by revisiting Neal and Johnson’s ð1996Þ well-known study of the
black-white wage gap, showing that using sequential covariate addition
gives wildly different results concerning the importance of AFQT and education in explaining the gap. Depending on the sequence in which education and AFQT are added to the wage equation, education either increases
the black-white wage gap a little or reduces it substantially. This nonrobustness occurs because of an empirical fact previously noted by Lang and
Manove ð2006Þ: the black-white education gap depends critically on whether
one conditions on AFQT.
Because a robustness measure that is itself not robust to the order of
computation is problematic, in Section IV, I develop an alternative, conditional decomposition, based on the simple and well-known least-squares
identity that links the estimates of the base- and full-specification coefficients
0
0
21
b base
5b
bfull
X1 X2 b
b2 .1
on X1 via the omitted variables bias formula: b
1 1 ðX1 X1 Þ
1
An advantage of my decomposition is that it yields consistent estimates
of economically and econometrically meaningful population parameters.
In the context of the black-white wage gap, this derivation gives a clear
meaning to the “effect of adding covariates.” Whether variation in a covThis identity apparently appeared first in Theil ð1957Þ and has appeared elsewhere over the years, e.g., in Goldberger ð1991Þ, as well as, possibly, earlier work
by Goldberger.
1

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

511

ariate increases or reduces the gap depends on ðaÞ whether the covariate
has a positive effect on wages and ðbÞ whether the covariate has a higher
mean among blacks or whites ðafter partialing out other X1 variables present in the base specificationÞ.2 These basic ideas have a long history in econometrics and statistics. But to my knowledge, the decomposition usefulness of the sample omitted variables bias formula has not previously been
recognized.3
Since my decomposition is based on parameter estimates computed from
the full specification, it is order-invariant. Moreover, it can be implemented
by estimating a manageable set of simple auxiliary models and thus requires
only minor effort. Implementing my decomposition, I find that—conditional on education, industry dummies, and occupation dummies—heterogeneity in test scores explains roughly a third of the overall black-white
wage gap in my National Longitudinal Survey of Youth ðNLSYÞ sample.
Education explains less than 10% of the overall gap, variation in occupation of employment explains about 20% of the wage gap, and variation in
industry explains virtually none. The results for AFQT and education are
quite different from what one would obtain via at least one sequentialaddition approach. Thus, my decomposition gives clean conditional answers
to questions that previously have hinged on arbitrary choices of sequencing.
2

I also show, in Sec. V, that my decomposition nests the Oaxaca-Blinder decomposition. This is useful both because it implies that my Stata code ðprovided at
https://ideas.repec.org/c/boc/bocode/s457814.htmlÞ can be used to conveniently compute the Oaxaca-Blinder decomposition and because it means that my asymptotic
variance formulas, provided in app. B, automatically apply to the elements of the
Oaxaca-Blinder decomposition, which should eliminate the practice of providing
Oaxaca-Blinder decompositions without estimated standard errors. In addition, I
show in Sec. V that under the null hypothesis that X2 covariates are orthogonal to
X1, one can use Hausman’s ð1978Þ well-known variance-of-differences result to test
for statistically significant changes in the coefficient on X1. The practical usefulness
of this result is that when a single coefficient is of interest, one can assess the null with
very little information: only the estimated coefficients and standard errors from the
two specifications are needed.
3
One limitation of my decomposition is that its meaningfulness generally requires that the regression function can be correctly written as a linear function of
X1 and X2. This implies that none of the variables in X1 or X2 is endogenous,
mismeasured, or otherwise problematic in a specification that includes both sets of
regressors. Such problems can be overcome in the decomposition if they can be
overcome in the regression model through the use of valid instruments; I discuss the
extension of the decomposition to the instrumental variables context in Subsec.
V.A. Regarding nonlinearity, Firpo, Fortin, and Lemieux ð2011Þ discuss a decomposition method for nonlinear situations using the recentered influence function
approach of Firpo, Fortin, and Lemieux ð2009Þ; see also Fortin, Lemieux, and Firpo
ð2007Þ. Other decomposition methods for nonlinear situations are suggested by,
e.g., Machado and Mata ð2005Þ and Elder, Goddeeris, and Haider ð2013Þ. I note also
that my interest is in the broad run of cases in which there is no natural ordering in
how covariates are causally related to the dependent variable. Altonji et al. ð2012Þ
offer a compelling ðbut likely rareÞ counterexample, in which the timing of variables
suggests a natural ordering in which variables might be added.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

512

Gelbach

II. Examples from the Literature
Consider the case of cross-group gaps in wages. In their outstanding review of work on race, gender, and labor markets, Altonji and Blank ð1999Þ
report results from estimating a variety of models relating wages to characteristics of workers and their jobs.4 Among their table 4 results are three
sets of estimates, models 4–6, of wage regressions using data from the 1995
March Current Population Survey. My table 1 reports their estimates of
the coefficient on the black indicator and provides details about included
covariates. Altonji and Blank write: “As control variables are added to the
model, the negative effect of race . . . on hourly wages becomes less significant. In 1995, black males received 21% lower hourly wages than white
males if no control variables were included; they received 12% less once
education, experience, and region were controlled for, and they received 9%
less when a full set of control variables were included” ð3156Þ.
A common inference to draw from this discussion is that education, experience, and region account for 21% 212% 5 9% of the black-white wage
gap, while additional controls account for 12%29% 5 3%. Indeed, the
word “account” is sometimes used explicitly to characterize the change in a
coefficient of interest when covariates are added ðsee, e.g., Krueger 1993,
51–52Þ.
Consider also Levitt and Syverson ð2008Þ, who use a sample of Chicagoarea home sales to test whether agents exploit informational advantages
over their principals. They estimate regressions of the log price of home
sales on a dummy variable indicating whether the home sold is owned by
a real estate agent. When the agent owns the home, the agent is also the
principal. A principal-agent problem would cause sale prices of non-agentowned homes to be lower than those of agents’ own homes. Thus, presence of a principal-agent problem implies a positive coefficient on the agent
dummy. My table 2 reports some of Levitt and Syverson’s results from
their tables 1 and 2. When only city and year dummies are included, the coefficient on the agent dummy is 12.8 log points; I will consider this the
base specification. The agent-dummy coefficient estimate falls to 4.8 when
the authors include city-by-year dummies and basic characteristics related
to the home’s scale ðe.g., number of bedroomsÞ. Levitt and Syverson ð2008,
603Þ write that “the sales price difference between agent-owned and nonagent-owned homes is . . . almost two-thirds less than the within-city difference obtained before conditioning on scale.” The authors then add more
detailed house quality indicators, the listing agent’s total number of sales,
indicators of various keywords in the home’s listing, and, finally, block
dummies. As my table 2 shows, most of the change in the coefficient on
the agent dummy between the first ðbaseÞ specification and the last ðfullÞ
4
Unless noted otherwise, all references to wages in this paper are to the natural
log of wages.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

513

Table 1
Results from Table 4 of Altonji and Blank ð1999Þ
Altonji and Blank’s Model
Coefficient on black indicator
Included covariates:
Hispanic and female indicators
Education, experience, and region
Occupation, industry, and job characteristics

ð4Þ

ð5Þ

ð6Þ

2.207

2.117

2.089

Yes
No
No

Yes
Yes
No

Yes
Yes
Yes

specification occurs when basic house characteristics are added. Levitt and
Syverson conclude that “the primary dimension along which agent-owned
houses differ from other homes is in terms of scale and readily identifiable
amenities . . . including a wide range of controls in addition to these basic
ones . . . has a relatively small impact on the measured impact of agentownership” ð604Þ.
However, it is possible that the scale and basic-amenity variables are
correlated with detailed indicators of house quality, description keywords,
and block dummies. Thus, it is possible that the coefficient on the agent
dummy would move just as much when any of these other sets of covariates
is added before adding the basic scale and amenity characteristics. Without a conditional accounting method, it is not possible to assess Levitt and
Syverson’s conclusion concerning the cause of the difference in unconditional and conditional agent-dummy effects.
The practice of sequentially adding covariates, whether for purposes of
analyzing robustness or accounting for changes in a coefficient of interest,
is now common throughout myriad subfields of economics; indeed, it is
so pervasive that a full survey of its use is for practical purposes impossible. It has commonly appeared in papers in labor, development, environmental, financial, health, population, and public economics, as well as law

Table 2
Results from Tables 1 and 2 of Levitt and Syverson ð2008Þ
Levitt and Syverson’s Model
Table 2
Coefficient on agent dummy
Included covariates:
City-by-year interactions
Basic house characteristics
Indicators of house quality
Keywords in description
Block fixed effects

Table 1, Column 4

ð1Þ

ð2Þ

ð3Þ

ð4Þ

.128

.048

.042

.038

.037

Yes
No
No
No
No

Yes
Yes
No
No
No

Yes
Yes
Yes
No
No

Yes
Yes
Yes
Yes
No

Yes
Yes
Yes
Yes
Yes

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

514

Gelbach

and economics and positive political economy.5 It is also common in most
other disciplines in the empirical social sciences, including political science, sociology, and demography. I emphasize that I do not mean to criticize the work cited here generally; these papers are thoughtful, interesting, and otherwise well executed. My criticism is only with the practice of
making inference from sequential covariate addition.
III. Sequential Addition and the Black-White Wage Gap
I now turn to an empirical example involving the black-white wage gap
that is based on Lang and Manove’s ð2006Þ reconsideration of influential
work by Neal and Johnson ð1996Þ. Neal and Johnson argue that educational
attainment should be excluded from wage equations since schooling decisions may be endogenous to labor market conditions. They use data from
the National Longitudinal Survey of Youth 1997 ðNLSY79Þ to evaluate the
effects of both excluding schooling and controlling for a person’s score on
the AFQT, a commonly used measure of ability. Because NLSY subjects
generally take the AFQT before they would have finished school, Neal and
Johnson argue that this variable is an exogenous measure of ability based
on pre–labor market information.
Neal and Johnson find a conventionally large unconditional black-white
wage gap, which largely persists when one includes years of schooling as
a covariate. In table 3, I report results from wage regressions using my
own NLSY sample, which I constructed to roughly match Neal and Johnson’s.6 In the first row of panel A, I report the estimated coefficient on a
race dummy from four different specifications. All specifications include
a dummy variable indicating whether a person is Hispanic as well as a linear age term. The specification in the second column also includes years of
schooling, the specification in the third column drops schooling but includes a measure of AFQT score, and the specification in the fourth column
includes both education and AFQT.
The column 1 coefficient shows that, partialing out age and a Hispanic indicator, the average wage among NLSY young blacks with 1990 earnings is
22.1 log points below the average among young whites. Thus, b
bbase
1;race 5 222:1.
See, e.g., Bound and Freeman ð1992Þ, Card and Krueger ð1995, e.g., table 4.10Þ,
Kessler and McClellan ð1996Þ, Moore, Newman, and Turnbull ð1998Þ, Donohue
and Levitt ð2001Þ, Raphael and Winter-Ebmer ð2001Þ, Edlund and Pande ð2002Þ,
Goldin and Katz ð2002Þ, Greenstone ð2002Þ, Guryan ð2004Þ, Haider et al. ð2004Þ,
Cullen, Jacob and Levitt ð2005Þ, Lee and McCrary ð2005Þ, Caceres-Delpiano
ð2006Þ, Kane, Riegg, and Staiger ð2006Þ, Stevenson and Wolfers ð2006Þ, Klick and
Stratmann ð2007Þ, Charles and Guryan ð2008Þ, Deaton ð2008Þ, Hanushek and
Woessmann ð2008Þ, Khwaja and Mian ð2008Þ, and Lefgren and McIntyre ð2009Þ.
This list is by no means exhaustive.
6
I discuss the sample in appendix A. While my specifications have 156 more
observations than do Neal and Johnson’s, my results in specifications with given
covariate sets are very similar to theirs. I have thus chosen to focus on the sample
used here rather than seeking to match the samples more closely.
5

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

515

Table 3
National Longitudinal Survey of Youth Wage Results for Young Men,
Similar to Table 1 of Neal and Johnson ð1996Þ
A. Black-White Wage Gap Results
Coefficient on black
indicator ðlog pointsÞ
Included covariates:
Hispanic indicator,
and age
Education
AFQT

ð1Þ

ð2Þ

ð3Þ

ð4Þ

222.1
ð3.6Þ

219.6
ð3.5Þ

27.2
ð3.8Þ

211.7
ð3.9Þ

Yes
No
No

Yes
Yes
No

Yes
No
Yes

Yes
Yes
Yes

B. Implied Decomposition Components
Sequence in Which Covariates Are
Added to Column ð1Þ Specification
First Add
First Add
AFQT, Then Education, Then
Add Education
Add AFQT
Wage difference
attributed to:
Education completed
as of 1990
AFQT
Total difference
between ð1Þ and ð4Þ

22.5
27.9

4.5
214.9

210.4

210.4

NOTE.—All equations include the same sample used throughout and include 1,749 observations.
Estimated standard errors are in parentheses.

Because this estimate is essentially the same as the simple black-white difference in mean log wages when no age control is included and Hispanics
base
as simare excluded from the sample ð21.9 log pointsÞ, I will refer to b
b1;race
ply the black-white wage gap. Adding schooling, in column 2, reduces the
black-white wage gap to 19.6 log points; using obvious notation, we thus have
b
b1;race ðX2educ Þ 5 219:6.
Neal and Johnson’s central result is that when schooling is excluded from
the model, adding the AFQT test score as a covariate drives the coefficient
on the race dummy much of the way toward zero. My column 3 specification replicates this result. Adding AFQT to the base model in column 1
reduces the black-white wage gap from 22.1 log points to just 7.2 log points:
b
b1;race ðX2AFQT Þ 5 27:2. Based on this result, Neal and Johnson argue that
most of the observed black-white wage gap is due to pre-market differences across race in ability, whatever the cause of these differences, rather
than features of the labor market.
Lang and Manove ð2006Þ construct a signaling model that implies that
both educational attainment and test scores must appear as covariates in

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

516

Gelbach

wage equations. In column 4 of table 3, I report the estimated black-white
wage gap from a specification that includes both AFQT and educational
attainment, like the one Lang and Manove estimate.7 This specification,
which I treat as the full specification for now, yields a black-white wage
gap of 11.7 log points. This gap is only about half the size of the column 1
estimate, but it is 4.5 log points greater than Neal and Johnson’s preferred
specification. For purposes of discussion in the present paper, it will be
easiest to accept Lang and Manove’s argument that both education and
AFQT belong in the wage equation.8 Thus, I will regard the column 4
model that includes both AFQT and education as the full specification,
so b
bfull
1;race 5 211:7.
The total difference between the base and full specifications is bdrace 5
bfull
b
bbase
1;race 2 b1;race 5 210:4 log points. In other words, partialing out both education and AFQT explains away 10.4 log points of the simple column 1 gap
of 22.1 log points. In panel B of table 3, I turn to the issue of accounting for
this 10.4-point explained part of the wage gap. As discussed above, a common approach to such accounting is to add covariates sequentially and tally
up the incremental changes in the black-white wage gap. The entry in the
first row and column of panel B shows that adding education to the base
model reduces the black-white wage gap by 2.5 log points, which is the
difference between the column 1 and column 2 coefficients. The entry in the
second row shows that when we add AFQT to the column 2 specification, yielding column 4, the black-white wage gap falls by an additional 7.9
log points. A typical interpretation of these results would be that variation
in education explains 2.5/10.4 5 24% of the explained part of the blackwhite wage gap, while variation in AFQT scores explains 7.9/10.4 5 76%.
Of course the education-AFQT sequence is not the only possible one
for adding covariates. The second column in panel B of table 3 reports corresponding sequential accounting results when we first add AFQT to the
base specification and then add education. Comparing the estimates in col7
Lang and Manove’s sample and use of weights differs somewhat from Neal and
Johnson’s, but the pattern of estimates they report is similar to the one exhibited in
table 3.
8
Neal and Johnson’s position is that AFQT is a better measure of skill than educational attainment. They argue that any correlation between wages and schooling that holds conditional on AFQT must as a matter of logic be due either to measurement error or endogeneity of post-AFQT administration schooling. Lang and
Manove’s signaling model provides an alternative, theory-based explanation for
the need to include schooling in wage equations. This debate highlights the fact
that researchers doing decomposition exercises must believe that the full model is
well specified. Empirical researchers typically settle on a full specification that they
believe is appropriate ðbut see Leamer ½1985 for a critical view of this factÞ. The
purpose of the present paper is to demonstrate a decomposition method given that
such a full model is considered appropriate in the first place. Because it allows me to
effect this demonstration, I will accept the Lang and Manove position that both
education and AFQT belong in the wage equation.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

517

umns 1 and 3 of panel A now suggests that AFQT variation explains 14.9
log points of the black-white wage gap, for a total of 14.9/10.4 5 143% of
the explained part of the black-white wage gap. Meanwhile, when we add
education to the column 3 specification, the black-white wage gap increases
in magnitude by 4.5 log points. In other words, variation in education now
appears to reduce the black-white wage gap, so holding education constant
increases the gap.
How can this counterintuitive result occur? As Lang and Manove ð2006Þ
comment and demonstrate in their table 2, blacks in the sample have fewer
years of schooling than whites, but the sign of this correlation is reversed
after we partial out AFQT scores. In table 4, I report results from auxiliary regressions of education on a black indicator. Both specifications include a Hispanic indicator and a linear age control. The specification in
column 1 includes no other covariates, and it shows that by 1990, blacks
had completed an average of 0.37 fewer years of schooling than whites. In
column 2, I add AFQT to the covariate set in this auxiliary model. The
results show that, conditional on AFQT, blacks get over a year more education than whites. As I discuss in appendix D, this reversal in the sign of the
relationship between educational attainment and race is the key to understanding the sensitivity of the accounting results in table 3 to the sequence
in which education and AFQT are added to the base wage specification.
The results in this section are a dramatic demonstration of what has long
been known, but which has frequently been ignored in the absence of an
alternative approach: that sequential addition of covariates can lead to very
different conclusions about how much different covariates contribute depending on their order of addition. Results in table 3 could be read to imply that the black-white differences in education either increase the blackwhite wage gap by 2.5 log points or reduce it by nearly twice as much.
Meanwhile, black-white differences in test scores either reduce the wage
gap by three-fourths of the total explained amount, or by more than 140%.
Provided one believes that both schooling and test scores belong in the

Table 4
The Black-White Gap in Years of Schooling Completed by 1990s
Coefficient on black indicator ðlog pointsÞ
Included covariates:
Hispanic indicator and age
AFQT

ð1Þ

ð2Þ

2.37
ð.14Þ

1.10
ð.11Þ

Yes
No

Yes
Yes

AFQT
NOTE.—Reported coefficients are estimates of Geduc
race and Grace , computed as the coefficient on a black indicator from least-squares estimation of equations with education/
AFQT as the dependent variable and a constant and Hispanic and age controls included.
All equations include the same sample used throughout and include 1,749 observations.
Estimated standard errors are in parentheses.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

518

Gelbach

wage equation, there is no clear basis on which to choose from these results
because the sequence of addition is arbitrary. Yet all of these results have
potentially important policy and research consequences.
IV. Accounting for Coefﬁcient Changes
I assume that the two sets of right-hand-side variables, X1 and X2, have
k1 and k2 variables, respectively. The population linear relationship between
Y and X 5 ½X1 X2  is
Y 5 X1 b1 1 X2 b2 1 ε:

ð1Þ

In the example used in Section III, Y is the log of a person’s wage; X1 contains a constant, a dummy indicating that a person is black, and age; X2
contains the additional covariates education and AFQT.
With no assumptions on the conditional expectation of ε given the regressors, we can think of ð1Þ as simply specifying a linear projection relationship: assuming all relevant expectations exist, we can define b 5
0
0 0
0
0
ðb1 ; b2 Þ as b 5 E½X X21 E½X Y. Under the assumption that E½εi j Xi  5 0
for all observations i, b has a causal interpretation as the partial effect of X
0
on Y, since then E½Yi j Xi 5 x 5 x b and the partial derivative of the conditional expectation is b. In general, I will assume that E½ε j X  5 0 does
hold, though none of the results below requires this assumption.9
As usual, the ordinary least squares ðOLSÞ estimator for the full vector
0
0
of partial effects b is given by b
b ; ðX XÞ21 X Y. I label b
bfull
and b
b2 the com1
ponents of b
b that correspond to the variables in X1 and X2, respectively.
is consistent for b1 without assuming anyStandard results imply that b
bfull
1
thing about either b2 or the correlation between X1 and X2, since all X2
variation is partialed out in the full specification. Now consider the coefficient on X1 from the base specification that ignores X2. The estimator
0
0
for this coefficient is b
bbase
; ðX1 X1 Þ21 X1 Y, whose probability limit is
1
plim b
bbase
5 b1 1 plimðX1 X1 Þ21 X1 X2 b2 ;
1

ð2Þ

or bbase
5 b1 1 Gb2 5 b1 1 d;
1

ð3Þ

0

0

where the parameter G is the matrix of coefficients from projecting the
columns of X2 on the columns of X1,
X2 5 X1 G 1 W;

ð4Þ

and W is a matrix of conformable projection residuals.
Traditionally, ð3Þ is used to demonstrate that d is the population omitted
variables bias from excluding X2 when estimating b1 via least squares: bbase
1
is the parameter identified by this approach, and bbase
differs from b1 by d.
1
9

See Wooldridge ð2002Þ for a useful discussion of projections and partial effects.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

519

What has not been realized is that ð3Þ suggests a natural decomposition of
the difference in the base- and full-specification estimated coefficients on
is an interesting paX1. This decomposition is especially useful when bbase
1
rameter in its own right, such as when it represents the unconditional ðor
age-adjustedÞ average difference in earnings between races. Empirical decomposition exercises then involve breaking d into meaningful components and estimating them.
In the example discussed in Section III, X2 has two columns: one for education and one for AFQT ðthus, G also must have two columnsÞ. In this
example, the projection relationship in ð4Þ can also be written, in more detailed form, as
AFQT
1 X1;race GAFQT
1 X1;Hispanic GAFQT
1 W AFQT ;
X2AFQT 5 GAFQT
Hispanic 1 X1;Age GAge
0
race

ð5Þ
educ
educ
educ
1 X1;race Geduc
:
X2educ 5 Geduc
0
race 1 X1;Hispanic GHispanic 1 X1;Age GAge 1 W

ð6Þ

In this example, X1 contains a constant, a race indicator, an Hispanic indicator, and age, as in table 3 above. The row of GAFQT corresponding to the
race dummy tells us the black-white mean difference in residual test scores
after partialing out the other elements of X1; the race dummy’s row in Geduc
tells us the same thing for years of educational attainment.
To see how the elements of ð5Þ affect the difference between bbase
and
1
full
b1 , I rewrite ð3Þ as follows:
2 b1 5 GAFQT bAFQT
1 Geduc beduc
;
bbase
1
2
2

ð7Þ

educ
AFQT AFQT
1 Geduc
:
so drace ; bbase
1;race 2 b1;race 5 Grace b2
race b2

ð8Þ

We can see from ð7Þ how to decompose the explained part of drace, the
simple black-white wage gap:
AFQT
AFQT component: dAFQT
5 GAFQT
:
race b2
race

ð9Þ

educ educ
Education component: deduc
:
race 5 Grace b2

ð10Þ

While I will generalize this claim below, a primary contribution here is
to point out that, given the model ð1Þ, the parameters in ð9Þ provide a clear
answer to the question of how much of the black-white wage gap is explained by variation in education and AFQT. The d parameters are the
mean black-white gap in AFQT or education, scaled by each covariate’s
wage-equation impact. These covariate mean differences and wage-equation
effects are population parameters that do not depend on the order in which
covariates are partialed out. Thus, consistent estimates of the drace param-

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

520

Gelbach

eters do not suffer from the sequence sensitivity observed in Section III.
Moreover, the drace parameters are intuitively exactly what researchers seem
to mean when they attempt to decompose the causes of the black-white
wage gap.10
In the first row of panel A of table 5, I report estimates of Grace from my
NLSY sample. The estimate in the column headed “Education” shows
that after we partial out variation due to Hispanic background and age,
blacks have 0.37 fewer years of education ðthis result also appears in tabeduc 5 20:37. The next row of table 5 reports the esble 4 aboveÞ. Thus, G
race
timated coefficients on the education variable from OLS estimation of the
full specification given in ð1Þ. An additional year of education is associated
with an increase in average wages of 4.1 log points, conditional on race,
5 0:041. Equation ð9Þ
Hispanic background, age, and AFQT. Thus, b
beduc
2
tells us that the conditional contribution of education is the product of
 0:041. The next row of the table shows
these two estimates: bdeduc
race 5 20:37
that this product equals 20.0155: conditional on all the other variables
in the model, the black-white wage gap would be roughly 1.6 log points
smaller if mean years of schooling were the same across blacks and whites.
I provide analogous results for AFQT in the second column of table 5.
Because I have standardized AFQT scores within my sample ðsee app. AÞ,
the coefficient in the first row shows that the average AFQT score among
blacks is 0.87 standard deviations lower than among whites, conditional
bAFQT 5 20:87. The next row
on Hispanic background and age. Thus, G
race
shows that a one standard deviation increase in AFQT is associated with a
5 0:1013. The third row rewage increase of roughly 10 log points: b
bAFQT
2
ports the product of these two estimates, bdAFQT
5 20:088. This estimate
race
tells us that if mean AFQT were the same in this sample and all other relationships were held constant, the black-white wage gap would be 8.8 log
points smaller.
Adding together our estimates of these decomposition components
shows that variation in education and AFQT together account for a total
of 10.4 log points of the black-white wage gap. This figure exactly equals
the difference between the column 1 and column 4 specifications of table 3.
As I discuss below, this equality is an identity: the sample omitted variables
bias formula and the difference between the base- and full-specification coefficient estimates are necessarily the same.11
I now provide general notation for my conditional decomposition. This
discussion is simply a formalization of the idea, just used, that the sample analogue of the omitted variables bias formula can serve as the basis
10
Notice that if there were no mean difference in a covariate across race, then its
Grace coefficient would be zero. In this case, variation in the covariate would explain none of the black-white gap in mean wages. The same would hold if the covariate does not affect the wage, so that b2 5 0.
11
I explain what drives the large bias from using the AFQT-education sequential
addition approach in detail in appendix D.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

521

Table 5
Understanding the Decomposition of δ̂race
A. Conditional decomposition
components:
brace
G
b
b2
bdrace ð5 G
brace  b
b2 Þ
B. Sequential decomposition
components:
Sequence 1:
Education-AFQT
Bias
Sequence 2:
AFQT-Education
brace  b
b2 Þ
Bias ð5 G

Education

AFQT

Total

2.3748
.0413
2.0155

2.8698
.1013
2.0881

2.1036

2.0249
2.0095

2.0786
.0095

2.1036
.00

.0453
.0608

2.1489
2.0608

2.1036
.0000

AFQT
NOTE.—Estimates of Geduc
are computed as the coefficient on a black indicator
race and Grace
from least-squares estimation of equations with education/AFQT as the dependent variable
and a constant and Hispanic and age controls included. Estimates of b2,educ and b2,AFQT are
taken from the full specification of the wage equation, which includes all X1 variables ða
constant, black and Hispanic indicators, and ageÞ and both X2 variables ðAFQT and years of
schoolingÞ. All equations include the same sample used above and include 1,749 observations.

for explaining sensitivity of the estimated coefficient on a vector of basespecification regressors.
Recall that the parameter d from ð3Þ represents the difference between
the population coefficients on in the base and full specifications. Since plim
b
5 b1 1 d, and since b
bfull
is consistent for b1, a natural approach to esbbase
1
1
2b
bfull
timating d is to just use bd ; b
bbase
1
1 , which is what authors do when they
compare base and full specifications. The key algebraic identity driving my decomposition is that the base-full difference in the X1 coefficient vector identically equals the sample analogue of the omitted variables bias formula:
bd 5 ðX0 X1 Þ21 X0 X2 b
b2 :
1
1

ð11Þ

For a very simple proof,12 observe that the usual least-squares algebra
implies
12
I am grateful to Ingmar Prucha for suggesting this proof. A similar proof using
different notation is available in Goldberger ð1991, 184Þ. A slightly more detailed
alternative proof that makes0 use of results
on orthogonal projections is also avail0
able. First, express b
b2 as ðX2* X2* Þ21 X2* Y, where X2* ; M1 X2 and M1 5 I 2 P1, with
0
P1 5 X1 ðX1 X1 Þ21 X1 being the projection matrix for X1. Thus X2* is the part of X2
that is orthogonal to X1. By the Frisch-Waugh-Lovell theorem, P 5 P1 1 P*2 , where
P is the projection matrix using all variables in X ; ½X1 X2 , P1 is the projection
matrix for X1 only, and P*2 is the projection matrix for X2* . Post-multiplying both
b
bbase 1 X2* b
bfull
b2 . Rearsides of the projection identity by Y yields X1 b
1 1 X2 b2 5 X1 b01
0
b2 5 P1 X2 b
b2 . Observing that X1 P1 5 X1 and preranging implies X1bd 5 ðX22 X2* Þb
21
0
0
0
0
21
bb
b2 , as in
multiplying both sides by X1 X1 X1 then yields bd 5 ðX1 X1 Þ X1 X2 b
b2 5 G
ð11Þ.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

522

Gelbach

b
Y 5 X1 b
ε;
bfull
1 1 X2 b 2 1 ^
wherebε 5 Y 2Xb
b isthe usual vector of fitted residuals. Now pre-multiply
21
0
0
both sides by X1 X1 X1 , delivering
0
0
21
b
b
5b
bfull
b base
1 1 ðX1 X1 Þ X1 X2 b2 ;
1

since the fitted residuals are exactly orthogonal to the columns of X1 by
construction of the least-squares estimator. Thus,
bd ; b
2b
bfull
b base
1
1
0
0
5 ðX1 X1 Þ21 X1 X2 b
b2 :

This identity is the key to conditionally decomposing the difference in
the base and the full regression coefficients. Since b
b base
2b
bfull
identically
1
1
equals the sample omitted variables bias formula, any decomposition
0
0
b base
2b
bfull
of ðX1 X1 Þ21 X1 X2 b
b2 is also a decomposition of b
1 . Let
1
• X2k be the column of observations on the kth covariate in X2;
bk 5 ðX0 X1 Þ21 X0 X2k be the estimated OLS coefficient on X1 from an
• G
1
1
auxiliary model with X2k as the dependent variable;
• b
b2k be the estimated coefficient on X2k in the full specification of interest.
Then the part of the sample omitted variables bias attributable to co0
0
bk b
variate k can be written as ðX1 X1 Þ21 X1 X2k b
b2k 5 G
b2k . Because the sample
omitted variables bias formula is linear in its k2 components, it follows that
bd 5

k2

o Gb bb
k

2k

k51
k2

ð12Þ

bk b
5 o bdk ; where bdk ; G
b2k :
k51

Equation ð12Þ suggests a straightforward way of carrying out a decomposition:
1. Estimate the full model of interest, which yields the estimated vector
b
bk .
2. Use OLS to estimate the vector of coefficients on X1 in a set of auxiliary models with each of the k2 covariates X2k acting as the depenbk .
dent variable; this estimate is G
b
b
3. Multiply Gk by b2k , which yields bdk , the component of the omitted
variables bias estimated to be due to each variable k.
Because bd 5 okbdk , the estimates of bdk for groups of covariates can be
summed together, that is, into industry, occupation, and so on. Each sum

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

523

then yields group-specific omitted variables bias components as desired.
For group g, we have bdg 5 ok in group gbdk . The overall difference in coefficients, bd, can thus also be written as the sum of group-wise components:
bd 5 ogbdg . A practical drawback to this approach is that there will often be
many covariates, so that k2 is quite large. In such cases, a simple alternative
approach is available: rather than estimating k2 regressions and then creating G group-specific sums, one can sum first and regress later. Define
b
b kðiÞ 5 X0 b
the heterogeneity variable H
2kðiÞ b2k . For any observation i, HkðiÞ tells
us how much of i’s wage is estimated to be due to i’s value of the kth covariate, X2k. The practical decomposition I suggest here is based on the obvious equality
0
0
b k 5 ðX 0 X1 Þ21 X0 X2k b
bk b
ðX1 X1 Þ21 X1 H
b2k 5 G
b2k 5 bdk :
1
1
0

0

Summing over all covariates in group g and using the fact that ðX1 X1 Þ21 X1
does not vary with the covariate index k, we have
bdg 5

o

bdk

k ∈ group g
0

0

5 ðX1 X1 Þ21 X1

o

bk:
H

k ∈ group g

This small manipulation shows that we can calculate the total group-g
contribution to bd as follows:
1. Estimate the full model of interest.
b kðiÞ ; X 0 b
2. For each observation i, sum up H
2kðiÞ b2k over all covariates k
bg 5
in group g; call the resulting group-level heterogeneity term H
ðiÞ
b kðiÞ .
ok ∈ group g H
3. Use OLS to estimate the coefficients on X1 in an auxiliary model in
which the dependent variable for observation i is the group-level
bg .
heterogeneity term H
ðiÞ
The coefficient estimate resulting from the final step above exactly equals
bdg , the group g part of the sample omitted variables bias formula. Aside from
computational convenience,13 this interpretation of the decomposition has
a nice intuitive flavor. In the wage gap example, HðiÞ is the component of i’s
wage that is explained by i’s value of the vector of covariates, X2ðiÞ. Overall
13
Notice that we need estimate only G auxiliary equations, rather than k2. In the
NLSY example above, this distinction was irrelevant because there were two
covariates with each being the only member of its group. Thus, k2 5 G 5 2 in that
example. However, there are many cases in which researchers include large numbers of covariates, especially large sets of dummy variables, in the X2 covariate set.
I will enlarge the covariate set below to illustrate this point.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

524

Gelbach

differences in the simple and conditional wage gaps can then be seen to
be due to black-white differences in the average of the heterogeneity term
HðiÞ. When X1 contains no variables other than a race dummy, the part of this
difference attributable to variation in group g covariates is the simple crossg
, the wage heterogeneity due to varigroup difference in the mean of HðiÞ
ables in group g. When X1 also includes other variables, as in the NLSY
example I consider in this paper, the relevant parameter is the conditional
g
, after partialing out these other variables.
cross-group difference in HðiÞ
To conduct
inference,
we
must
be able to estimate the asymptotic dispﬃﬃﬃ
tribution of nðbd1 2 d1 ; bd2 2 d2 ; : : : ; bdG 2 dG Þ. In general, all estimators involved in my decomposition are asymptotically normal. Since the decomposition involves continuously differentiable functions of these estimators,
joint asymptotic normality of the decomposition components follows from
the delta method. Deriving the covariance matrix for the vector of all bdg estimators is straightforward but lengthy, so I relegate the derivation to appendix B.14
To illustrate the usefulness of the grouping approach just discussed, I
now observe that the NLSY has information on additional potentially important explanatory variables. In particular, I add 12 occupation dummies
and 12 industry dummies to the covariate set, so that X2 now includes
26 variables. I continue to treat the years of education and AFQT variables
as their own groups, while adding another group each for occupation and
industry. Thus G 5 4 with this enlarged covariate set.15
Table 6 reports results from the full specification that includes a constant, race and Hispanic-background dummies, a linear age control, and
all 26 X2 covariates. The black-white wage gap in this full specification is
9.26 log points, so that a total of bdrace 5 12:85 log points of the base specification’s 22.11 log-point gap is explained by the 26 X2 covariates. The estimated standard error for bdrace is 2.26 log points.
The bottom part of table 6 reports my detailed decomposition of the
part of the black-white wage gap that can be explained by each of four covariate sets, conditional on all of them simultaneously. Variation in AFQT
14
I note, however, that a key requirement for the auxiliary-model approach to
g
g
work is that at least one element
pﬃﬃﬃ bgof G g or b2 be nonzero. If this condition does not
hold, then the variance of nðd 2 d Þ converges to zero, and estimated test statistics will have nonstandard behavior. For any covariate set such that the researcher
allows the possibility that X1 and X2g are uncorrelated, Gg 5 0 is possible. To rule
out the zero-variance case, it is then important to verify that not all elements of bg2
are zero. This can be done by estimating the full model and testing the joint null
H0 : bg2 5 0 before undertaking the decomposition.
15
I emphasize that this exercise requires the assumption of correct specification
in the full model that includes both X1 and all 26 variables in X2; see footnote 8 on
this point, vis-à-vis the debate between Neal and Johnson ð1996Þ and Lang and
Manove ð2006Þ concerning whether even education belongs in the full model.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

525

Table 6
Decomposing the Black-White Wage Gap into AFQT, Education,
Occupation, and Industry Components
Specification
Base

Full

Explained

222.11
ð3.63Þ

29.26
ð3.81Þ

212.85
ð2.26Þ

No

Yes

Education

No

Yes

12 occupation dummies

No

Yes

12 industry dummies

No

Yes

27.06
ð1.84Þ
21.56
ð.66Þ
24.34
ð1.03Þ
.11
ð.90Þ

Black-white gap
Covariates:
AFQT

NOTE.—Both models include Hispanic-background and linear age controls, and both
models use the same 1,749 observations. Standard errors are in parentheses ðcomputed
under the assumption of conditional sphericalityÞ.

explains 7.06 log points, which is more than half of the explained part of the
gap and nearly a third of the total gap. On the other hand, this component
of the black-white wage gap is less than half of the amount that Neal and
Johnson’s specification would imply. Variation in educational attainment
explains another 1.56 log points. This component does not explain a large
share of the gap, though it is precisely estimated. Variation in occupation,
as measured by the 12 occupation dummies, explains 4.34 log points of the
black-white wage gap. This represents roughly a third of the part of the gap
that is explained by the 26 covariates, and about 20% of the overall blackwhite wage gap.
Variation in industry plays essentially zero role in explaining the blackwhite wage gap. This result is perhaps surprising, because both wages and
race vary systematically across industry. For example, the range of the estimated industry coefficients in the full specification is over 40 log points.
Moreover, a test of the null hypothesis that the vector of 12 industry dummies all have coefficients equal to zero results in a p-value of zero up to four
decimal places. Similarly, results from a multivariate regression of the 12 industry dummies on race and Hispanic background dummies as well as age
yield a p-value of 0.0062 against the null hypothesis that race is unrelated to
industry. In sum:
• wages vary systematically across industry, even after partialing out
all other variables;
• industry of employment varies systematically across race, conditional
on Hispanic background and age;

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

526

Gelbach

• yet the black-white wage gap is unaffected by controlling for industry
of employment.
This seemingly anomalous result has a simple explanation: the conditional correlation between race and industry is roughly orthogonal to the
conditional correlation between wages and industry. That is, even though
≠ 0, it is nonetheless approximately true that
Gindustry ≠ 0 and bindustry
2
5
0.
As
a
consequence,
wage heterogeneity due to industry
Gindustry bindustry
2
variation, H industry, has the same mean among blacks as whites, conditional
on Hispanic background and age. This example points to the importance
of accounting directly for the effects of X2 covariates: the simple facts that
X1 and X2 are correlated and that X2 enters the model of interest importantly are necessary but not sufficient conditions for the coefficient on X1 to
be affected by partialing out X2.
V. Extensions
In this section, I briefly consider three extensions of the analytical results above.
A. Instrumental Variables Estimators
My first extension involves instrumental variables ðIVÞ models. It can be
shown that when b1 from equation ð1Þ is exactly identified, the equivalence
and b
bfull
holds
between the sample omitted variables bias formula and b
bbase
1
1
when all coefficients are estimated using two-stage least squares ð2SLSÞ.
When b1 is overidentified, the equivalence does not hold in fixed samples,
but it does hold asymptotically, provided all instruments are valid. Thus,
differences in IV estimates of b1 due to addition of exogenous covariates
X2 can be meaningfully decomposed, as with OLS estimates.16
In Gelbach ð2009Þ, I use the same data I used in Gelbach ð2002bÞ to
study the effects of public schooling on maternal labor supply. In Gelbach
ð2002bÞ, I used quarter of birth dummies to instrument for 5-year-old’s
enrollment in public school. I found that public school enrollment is associated with sizable increases in labor supply among single mothers whose
youngest child is age 5. In Gelbach ð2009Þ, I use the IV version of the conditional decomposition discussed above to assess the sensitivity of my original results to controlling for covariates. I find that ðaÞ controlling for covariates does not systematically affect the public school enrollment impact,
even though ðbÞ different groups of covariates do affect this impact. This is
possible because groups of covariates have approximately equal, oppositesigned bias effects, up to sampling variation ðas with the industry dummies
See Gelbach ð2009Þ for details. While researchers often adjust the instrument
sets across specifications, I take the instrument set as fixed for purposes of this
paper.
16

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

527

part of the decomposition considered in Sec. IV aboveÞ. This is an interesting finding in light of recent work by Buckles and Hungerman ð2008Þ,
who find that IV estimates of the returns to schooling increase by 20%–50%
when they add family background controls to the model, though they do
not test for statistical significance. Because my asymptotic variance formulas can be adopted to cover the IV case, the present paper will allow one
to answer whether covariates importantly affect IV estimates in applications
like estimating the returns to schooling.
B. The Oaxaca-Blinder Decomposition
The second extension concerns the Oaxaca-Blinder decomposition. Suppose we are interested in decomposing the simple mean difference in black
and white wages. Let D be a race dummy, and let X be the full set of other
explanatory variables, not including a constant. Finally, let D  X be the
interaction of these variables. It is straightforward to show that the explained and unexplained components of the Oaxaca-Blinder decomposition, also known as quantities and prices, can be found using the following
procedure:17
1. Use least squares to estimate the coefficients on a constant, the race
dummy, the explanatory variables, and their interaction, yielding b
b0 ,
b
bx , and b
bdx .
bd , b
2. For each observation i, construct the estimated heterogeneity term
b X ; XðiÞ b
H
bx . The explained component of the Oaxaca-Blinder deðiÞ
bX.
composition equals the cross-group difference in mean values of H
X
b on a constant and D yields DX b
This is true because regressing H
bx ,
which is the explained component valued using the estimated wageequation coefficients for the group with D 5 0.
b DX ; ðb
bd 1 ok XkðiÞ b
3. Construct the heterogeneity estimate H
bk;dx ÞDi ,
ðiÞ
where k indexes the variables in X. The unexplained component of
the Oaxaca-Blinder decomposition equals the cross-group differb DX on a
b DX . This is true because regressing H
ence in mean values of H
constant and D yields b
bd 1X1  b
bdx , where X1 is the vector of explanatory variable means for the group with D 5 1.
This procedure works because ðiÞ the simple difference in mean wages
equals the coefficient on a race dummy from the projection of individual
wages on a constant and the race dummy, while ðiiÞ the fully interacted
model estimated in the procedure’s first step yields the estimated coeffibx are the wagecients from race-specific wage equations. Together, b
b0 and b
equation coefficient estimates for the group with D 5 0. Adding those
bdx , respectively, then yields the coefficient estimates
coefficients to b
bd and b
17

I provide a detailed proof in appendix C.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

528

Gelbach

for the group with D 5 1. The second two steps in the procedure above
are just the auxiliary regression steps used in my groupwise decomposition, with the groups of covariates being X and DX. The only twist is the
addition of b
bd to the heterogeneity term in the third step.18
This relationship between the Oaxaca-Blinder decomposition and my
decomposition is practically useful. First, my variance formulas can be used
to conduct inference on Oaxaca-Blinder decomposition estimates, which
is very rarely done.19 Second, my auxiliary regression method can be used
to compute detailed as well as overall Oaxaca-Blinder decompositions.
Given the popularity of the Oaxaca-Blinder decomposition, and the interest in questions like “Does industry or occupation explain more of the
wage gap in an OBD?” my variance formulas will be very useful for applied practice.20
C. Using the Hausman Test
A third extension involves testing for statistically significant changes in
the coefficient on X1 under the null hypothesis that X2 covariates are orthogonal to X1. It is of course possible to test for orthogonality directly,
but this essentially requires estimating a separate least-squares coefficient
vector for every covariate in X2. In many applications, the dimension of
X2 is large enough that this will be a less than entertaining task. It can be
shown that when X1 is orthogonal to all covariates in X2, Hausman’s ð1978Þ
variance-of-differences result holds ðeven though the sufficient conditions
18
The Oaxaca-Blinder decomposition developed above uses the estimated coefficients for the group with D 5 0 to measure the explained part of the wage gap.
It is well known that the Oaxaca-Blinder decomposition is not unique. To measure
the explained part of the wage gap with the other group’s coefficient estimates, one
just replaces D with 1 2 D everywhere above. Other decompositions can also be
defined; discussions of this issue appear in Neumark ð1988Þ and Elder, Goddeeris,
and Haider ð2010Þ, for example.
19
Horrace and Oaxaca ð2001Þ provide variance formulas that treat sample means
as nonstochastic, whereas my more general variance formulas account for this
source of covariance.
20
Oaxaca and Ransom ð1999Þ argue that detailed components of Pb suffer from
an identification problem due to the fact that adding an arbitrary constant c to the
kth variable in X will change its sample mean while leaving its estimated coefficient
unchanged. As a consequence, the detailed price component for the group including
covariate k will rise by c b
b2dxk . Gardeazabal and Ugidos ð2004Þ, Yun ð2005Þ, and
Fortin ð2008Þ suggest various approaches to dealing with the issue raised in Oaxaca
and Ransom ð1999Þ. My own view, as I argue in Gelbach ð2002aÞ, is that the issue
itself is not really an identification problem as that term is used in contemporary
econometric analysis. Instead, it concerns where in the covariate distribution one
chooses to evaluate the effect of differences in coefficients ðJones ½1983 makes the
Oaxaca and Ransom ð1999Þ point accurately in terms of sensitivity to the choice of
baseline, which is another way of putting the issueÞ. I refer interested readers to
Gelbach ð2002aÞ for more.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

529

of his theorem need not hold, as Hausman states themÞ. When a single coefficient is of interest, then, one can use already published results to test
whether added covariates matter: using reported coefficient estimates and
their estimated standard errors, one can construct a test statistic whose asymptotic distribution is standard normal under the null that X1 and X2 are
orthogonal. Only the estimated coefficients and standard errors from the
two specifications are needed to carry out such a test. See Gelbach ð2009Þ
for further details.
VI. Conclusion
Comparing coefficient estimates from specifications in which covariates
are added sequentially to a base model does not generally identify population parameters of interest. Therefore, this common practice does not generally answer economically or econometrically interesting questions. In this
paper, I have shown that the sample version of the omitted variables bias
formula can be used to answer the questions that have led researchers to
use sequential covariate addition. By contrast to sequential covariate addition, elements of the decomposition I develop here are estimated conditional
on all covariates. As such, no sequencing problems arise. Further, my decomposition is easily implemented using intuitively meaningful auxiliary
regressions.
I have also presented empirical findings related to the black-white wage
gap, using Neal and Johnson ð1996Þ and Lang and Manove ð2006Þ as points
of departure. I follow the latter authors and treat education as a necessary
covariate in a full wage equation specification. I find that variation in test
scores explains 8.8 log points of the overall black-white wage gap; at 40%
of the overall gap of 22.1 log points, this is a substantial amount, but it
is considerably less than the 14.9 points that would be found by using a
sequential-addition approach in which one first adds AFQT to the base
specification and then adds education. In an expanded analysis in which
the full specification is allowed to include both occupation and industry
dummies ði.e., in which they are also treated as exogenous covariatesÞ, I
find that variation in test scores explain a bit less than a third of the overall
wage gap; variation in occupation explains about a fifth; variation in educational attainment explains less than a tenth; and industry variation has
no effect on the black-white wage gap, even though industry dummies are
significantly correlated with both wages and race. This last result shows
that while nonzero values of b2 and the correlation of X1 and covariates in
X2 are necessary for a given set of covariates to contribute to the base-full
difference in coefficients, they are not sufficient, even together.
I have also discussed a number of extensions. First, my decomposition
nests the Oaxaca-Blinder decomposition. This result should be practically
useful, since it means my auxiliary-regression approach and variance for-

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

530

Gelbach

mulas can be used to compute Oaxaca-Blinder decomposition results. Second, my results carry over exactly to the case of just-identified instrumental
variables estimators, and the decomposition method also works in large
samples in overidentified cases. Third, cross-specification testing can be
done using a Hausman test under the null hypothesis that X1 and X2 are
uncorrelated, which is sufficient for there to be no difference across specifications in the coefficient on X1. As a result, when only one coefficient is
of interest, one can carry out specification tests using only the information
typically reported in tables provided in published and working papers.
I conclude with one final observation: except in special cases such as the
one considered in Altonji, Bharadwaj, and Lange ð2012Þ, there really is no
reason to sequentially add X2 covariates to a base model. Sequential addition can obscure, overstate, or understate the true part of d that can be
attributed to variation in any given set of X2 variables. The only meaningful
way to estimate the sensitivity of b1 to covariates is to add all the covariates
and b
bfull
at once and then compare b
bbase
1
1 . Providing tables with subsets of X2
added sequentially across columns or rows thus makes little sense, and this
practice should simply be abandoned. By contrast, my decomposition
method has all the advantages of existing practice. Its only disadvantage
has to do with variance computation. Since conventional practice has not
included any systematic testing of differences across columns, even this
difficulty is not really a disadvantage in context. Nonetheless, I have programmed consistent variance estimators in Stata in publicly available code,
so this disadvantage will be irrelevant in practice.

Appendix A
Sample Construction: NLSY Sample
To construct my NLSY sample, I began with all 5,579 males appearing in
the nonmilitary NLSY79 sample for 1979. I code as black those who are
listed as black and non-Hispanic, and similarly for whites. My educational
attainment is the highest grade ever completed as of 1990. The AFQT
variable is the sum of the variables ASVAB _ SEC2 _ 81, ASVAB _ SEC3 _ 81,
ASVAB _ SEC4 _ 81, and ASVAB _ SEC8 _ 81, which I then standardize to
have mean 0 and standard deviation 1 in my sample. The wage variable I use
is HRP _ J1 _ 1990. I use only observations on those aged 18 or younger in
1980.
I form 12 industry dummies from the following 13 groups:
1. Agriculture, Forestry, and Fisheries
2. Mining
3. Construction

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

531

4. Durable Manufacturing
5. Nondurable Manufacturing
6. Transportation, Communications, and Other Public Utilities
7. Wholesale and Retail Trade
8. Finance, Insurance, and Real Estate
9. Business and Repair Services
10. Personal Services
11. Entertainment and Recreation Services
12. Professional and Related Services
13. Public Administration
I form 12 occupation dummies from the following 13 groups:
1. Professional, Technical, and Kindred Workers
2. Managers and Administrators, except Farm
3. Sales Workers
4. Clerical and Unskilled Workers
5. Craftsmen and Kindred Workers
6. Operatives, except Transport
7. Transport Equipment Operatives
8. Laborers, except Farm
9. Farmers and Farm Managers
10. Farm Laborers and Farm Foremen
11. Service Workers, except Private Household
12. Private Household Workers
13. Additional NLSY79 Occupation Codes
All models are estimated without sampling weights, following the approach in Neal and Johnson ð1996Þ. Estimated standard errors are computed under the assumption of conditional sphericality; heteroskedasticityrobust estimated standard errors were very similar to those reported here.

Appendix B
Covariance Derivation and Estimation
In this appendix, I derive and discuss consistent estimation of the covariance of the vector of decomposition elements. This vector can be written as
0 1 1 0 1 1 1
bb
bd
G
b2
B bd2 C B G
2 b2 C
b
b5B
C B b C
D
@ ⋮ A 5 @ ⋮ 2 A;
bdG
bG b
G
bG2

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

532

Gelbach

bg is k1  kg, and b
where we recall that there are k1 rows in each bd g , G
bg2 is
g
10
20
G0 0
a k  1 column
Define D ; ðd ; d ; : : : ; d Þ . Consider the gth
pﬃﬃﬃvector.
b 2 DÞ:
component of nðD
pﬃﬃﬃ g
pﬃﬃﬃ g
pﬃﬃﬃ g
bg nðb
b 2 Gg Þbg
b2 2 bg2 Þ 1 nðG
nðbd 2 dg Þ 5 G
2
 0 21 0 g
p
ﬃﬃﬃ
X1 X1
X1 v
b g n ðb
pﬃﬃﬃ ;
bg2 2 bg2 Þ 1
5G
n
n

ðB1Þ

where vg 5 W g bg2 is the population residual from taking the projection
relationship between the columns of X2g on X1 and post-multiplying by bg2 ,
that is, X2g bg2 5 X1 Gg bg2 1 W g bg2 . The asymptotic covariance between bd g and
bdh involves the expectation of the product of ðB1Þ and its transposed analogue when we replace g with h:21

pﬃﬃﬃ h
0 h0
pﬃﬃﬃ g
0
bg n b
b
ACov ðbdg ; bdh Þ 5 plim G
b2 2 bg2 n b
b2 2 bh2 G


 0 21
0
0
X1 vg vh X1 X1 X1
1
n
n
 0 21
0
h
 v X1 X1 X1
pﬃﬃﬃ g
bg n b
b2 2 bg2 pﬃﬃﬃ
1 G
n
n
 0 21 0 g

0
X1 X1
X1 v pﬃﬃﬃbh
h b h0
pﬃﬃﬃ n b2 2 b2 G
1
n
n
0

X1 X1
n

21

 0 g h0 
 g h0  h
b;b
b G 1 Q21 plim X1 v v X1 Q21
5 Gg ACov b
2
2
11
11
n
1 Gg ACov

 v h0 X 1
pﬃﬃﬃbg
n b2 2 bg2 ; pﬃﬃﬃ Q21
11
n

0
0 0
X1 vg pﬃﬃﬃbh
p
ﬃﬃﬃ ; n b2 2 bh2 Gh ;
1 Q21
ACov
11
n

ðB2Þ
0

where Q11 5 plimðX1 X1 =nÞ.
To estimate the four matrices added together on the right-hand side of
ðB2Þ, it is easiest to think in terms of a stacked system of seemingly unre21
Note that we can find the asymptotic variance matrix for any bdg by setting g 5
h in ðB2Þ.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

533

b g ; X2g b
lated equations. Observe that since H
bg2 and H g ; X2g bg2 5 X1 dg 1vg ,

g bg
g
g
g
g
b
b g 5 X1 dg 1 v*g , where
we can write H 5 X1 d 1 v 1 X2 b2 2 b2 , or H
g bg
g
g
g
v* ; v 1 X2 ðb2 2 b2 Þ. Thus, we have the stacked system
2

3 2
Y
X
b1 7 6 0
6H
6 27 6
b 756 0
6H
6
7 6
4⋮5 4
bG
H
0

0
X1
0

0
0
X1

0

0

:::
:::
:::
⋮
:::

0
0
0
X1

32
76
76
76
76
54

b
d1
d2
⋮
dG

3

2

3
ε
7 6 v *1 7
7 6 27
7 1 6 v* 7: ðB3Þ
7 6
7
5 4⋮5
v*G

b1 ; H
b2 ; : : : ; H
b G Þ be the nG  1 column vector of
b stacked 5 ðH
Now let H
b stacked is the set of n  1 fitted
group-level heterogeneity term values ði.e., H
g
b vectors stacked over the G equationsÞ. Let v 5 ðb0 ; D0 Þ0 be the ðk1 1
H
k2 1 Gk1 Þ column vector of population parameters in ðB3Þ. The OLS
0
0
0
0
estimator of v is bv 5 ðb
b ; bd1 ; bd2 ; : : : ; bdG Þ, which can be written
0

0

21
bv 5 ðX XÞ
0

0 0

0

0
0
IG  ðX1 X1 Þ21

0

XY
0 b stacked ;
ðIG  X1 ÞH

ðB4Þ

with ðk1 1 k2 1 Gk1 Þ  ðk1 1 k2 1 Gk1 Þ asymptotic covariance matrix
Vv 5

Vb CbD
:
CDb Vaux

ðB5Þ

b, the paramHere Vb is the ðk1 1 k2 Þ  ðk1 1 k2 Þ covariance matrix for b
eters of the full model. For any g and h ∈ f1; 2; : : : ; Gg, the sub-block of
this matrix corresponding to the variables in X2 groups g and h is Vbgh 5
0
bh2 Þ from ðB2Þ. This matrix can be estimated consistently by
ACovðb
bg2 ; b
taking the appropriate sub-block of a consistent estimate of the covariance
matrix for b
b, computed as usual. This consistent estimate can then be used
in estimating the middle part of the first matrix in ðB2Þ, with the outer
bh 5
bg 5 ðX0 X1 Þ21 X0 X2g and G
parts of that matrix estimated using G
1
1
0
0
21
h
ðX1 X1 Þ X1 X2 .
With respect to the middle part of the second matrix in ðB2Þ, consider
the Gk1  Gk1 lower-right block of Vv, given by
"



 0 21 #
0
0
IG  X1 v* v* ðIG  X1 Þ
X1 X1

plim
Vaux 5 IG  plim
n
n
"
ðB6Þ
 0 21 #
X1 X1
;
IG  plim
n
0

where v* ; ðv*1 ; v*2 ; : : :; v*G Þ is the vector of residuals for the bottom
G equations of system ðB3Þ. The middle part second matrix in ðB2Þ,

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

534

Gelbach

 0

0
plim X1 vg vh X1 =n , corresponds to the sub-block of Vaux that involves the
gth set of rows and hth set of columns ði.e., the rows corresponding to dg
and columns corresponding to dhÞ.
The third matrix in ðB2Þ involves a sub-block of CbD, while the fourth
0
matrix involves a sub-block of CDb 5 CbD . The matrix CDb can be formed
by stacking C1b, C2b, and CGb, with the gth such k1  Gðk1 1 k2 Þ matrix
having the form
 0 21
 0 g 0 
 0 21
X1 X1
X1 v * ε X
XX
plim
plim
:
Cgb 5 plim
n
n
n
pﬃﬃﬃ
0
part of the fourth matrix in ðB2Þ that involves ACov½ðX1 vg = nÞ;
pﬃﬃﬃThe
0
h
h
b 2 b Þ  is given by the columns of Cgb that correspond to the colnðb
2
2
umns in the hth group of X2 variables.
the p
part
ﬃﬃﬃ of the third
pﬃﬃﬃAnalogously,
0
matrix in ðB2Þ that involves ACov½ nðb
bg2 2 bg2 Þ; ðvh X1 = nÞ is given by
0
the rows of Cbg 5 Cgb corresponding to the gth group of X2 variables.
Estimating the second, third, and fourth matrices in ðB2Þ is straightforward and can be done using the usual sample analogs of relevant parts of
0
Q ; plimðX X=nÞ and Gg and Gh, together with consistent estimates of ε,
g
h
v* , and v* . Consistent estimates of ε can be formed using the usual OLS
fitted residual ^ε 5 Y 2 Xb
b from the full specification of interest. Consistent estimates of v*g can be formed using the fitted residual from the gth
auxiliary equation in ðB3Þ. As discussed in the main text, we must estimate
bg2 is conthis equation using b
bg2 in place of the unknown bg2 . However, b
g
g
sistent for b2 , so nothing is lost as a result—even if we knew b2 , we would
0
0
have to estimate vg with the consistent estimator Hg 2 ðX1 X1 Þ21 X1 X2g bg2 .
0
0
g
21
g
b g 2 ðX X1 Þ X X2 b
b *g ; H
Thus, the feasible fitted residual v
b2 is consis1
1
bg2 is consistent for bg2 . The same analysis applies to
tent for vg since b
b *h . To estimate the middle matrix of the ðg, hÞ block of Vaux, we use any
v
0
0
b *g v
b *h X1 =n, and to estimate Cgb, we use any
consistent estimate for X1 v
0
0
b *g^ε X=n. Under appropriate iid ðindependent
consistent estimate for X1 v
and identically distributed random variablesÞ assumptions, these matrices
can be simplified in familiar ways. When conditional heteroskedasticity or
group-level clustering is suspected, the usual robust covariance estimators
can be used to estimate them.
Note that in general there is no simple equation-by-equation way to
estimate the covariance matrix even for a single group’s bdg . For example, consider estimating only the gth equation of system ðB3Þ and then
using a standard variance estimator ði.e., the variance estimator one would
use if this equation were not an auxiliary equation and did not involve
b *g is consistent for vg, this
an estimated dependent variableÞ. Because v
approach is tantamount to ignoring the fact that bg2 has to be estimated;
more formally, it yields only the second matrix in ðB2Þ, leaving out the

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

535

first, third, and fourth matrices. Fortunately, the Stata code I have written
will allow researchers to avoid computing all these matrices by hand.
Finally, when conditional sphericality holds, all the matrices just defined
will simplify, since the middle matrix of each then reduces to p
a scalar
mulﬃﬃﬃ
tiple of the outer matrices. In this case the limiting variance of nðb
b 2 bÞ is
0
Vb 5 jεεQ21, where jεε 5 E½εi2 j Xi  and Vaux 5 Σvv  ðX XÞ21 ; where Σvv is
g h
G  G with scalar gh element jgh 5 E½vi vi j X1  for all i. When jgε 5 E
½vgi εi j X for all i, Cgb simplifies to jgε ½Ik1 GQ21 . Using the partitioned
inverse formula, it can be shown that the columns of Cgb corresponding to
b
bg have zero covariance in this case.
b2 are necessarily zero, so that bd g and b
Thus under conditional sphericality, only the first and second matrices on
the right-hand side of ðB2Þ must be estimated.

Appendix C
The Oaxaca-Blinder Decomposition
Let Y black and Y white be the sample mean of wages among blacks and
whites. Let Z be a set of worker characteristics on which we have data ðnote
that Z is not a set of instruments but rather just exogenous covariatesÞ. I use
Z in this appendix discussion, rather than the notation X used in Subsection
V.B, because doing so allows a general connection between the Oaxaca0
0
a0;black ; a
b1;black Þ
Blinder decomposition and my decomposition. Let a
bblack 5 ðb
0
0
and a
bwhite 5 ðb
a0;white ; a
b1;white Þ be the race-specific OLS estimates of coefficients on a constant and Z from separate, race-specific models. Finally, let
Zblack and Zwhite be the row vector of sample means of variables in Z for
blacks and whites. Because OLS estimates must go through the mean of
the data, we have
Y black 5 a
b0;black 1Zblack a
b1;black

Y white 5 a
b0;white 1Zwhite a
b1;white :

b1;white
Subtracting Y white from Y black and then adding and subtracting Zblack a
yields the Oaxaca-Blinder decomposition of mean differences:
Y black 2Y white 5 a
b 0;black 2 a
b0;white

ðC1Þ

1 Zblack ðb
a1;black 2 a
b1;white Þ 1 ðZblack 2Zwhite Þb
a1;white :

ðC2Þ

Let Dx be the black-white difference in any vector x. Then we can rewrite
the Oaxaca-Blinder decomposition as
a0 1Zblack Db
a1 1 DZb
a1;white
DY 5 Db
b
b
5 P 1 Q;

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

536

Gelbach

b 5 DZb
where Pb 5 Db
a0 1Zblack Db
a1 and Q
a1;white :
If we think of the a
b coefficients as estimating race-specific hedonic prices
0 0
a1 Þ can be thought of as
of the various Z characteristics, then Db
a 5 ðDb
a0 ; Db
the vector of differences in these prices. As described above, the OaxacaBlinder decomposition measures the contribution of the difference in prices
via pre-multiplication of Db
a by ½1; Z. For this reason, the overall term
Pb is sometimes called the prices part of the Oaxaca-Blinder decomposition. Similarly, we can think of DZ as telling us the cross-race difference
in quantities.22
0
0
Now add b
bfull
to both sides of bd 5 ðX1 X1 Þ21 X1 X2 b
b2 , yielding
1
0
0
21
b
b
5b
bfull
bbase
1
1 1 ðX1 X1 Þ X1 X2 b2 :

ðC3Þ

In the wage-gap example, the base specification involves only a constant
and a race dummy: X1 5 ½1 D. Given that a constant is the only other
bbase
variable in X1, b
1D 5Y black 2Y white , the cross-race difference in sample
means of the dependent variable. The second row of the right-hand side of
ðC3Þ is an exact decomposition of this difference in sample means. Therefore, I need only show that the second row of the right-hand side can be
b
written as Pb 1 Q.
Let X2 5 ½Z DZ, where DZ is a matrix of interactions of the race
dummy and the vector of characteristics Z ðthus DZi 5 Zi when i is black
and 0 when i is whiteÞ. The matrix of all right-hand side variables is X 5
½1 D Z DZ, so Y 5 Xb 1 ε is a fully interacted specification. Let the
intercept from this specification be b11, let the coefficient on the race dummy
be b1D, and let the vector of coefficients on Z and DZ be b2Z and b2DZ, so
that the full specification is
22
The Oaxaca-Blinder decomposition developed above measures the contribub valuing these differences at the vector
tion of quantity differences via the term Q,
of whites’ prices, a
b1;white . It is well known that the Oaxaca-Blinder decomposition
is not unique. This issue has led to various discussions in the literature about the
proper specification of the Oaxaca-Blinder decomposition; see, e.g., Neumark
ð1988Þ, Fortin ð2008Þ, and Elder et al. ð2010Þ. Various alternative specifications can
be obtained by appropriately constraining the population values corresponding to
the a
b coefficients. For example, if we impose the constraint a1;white 5 a1;black 5 a1 ,
then we could estimate a1, a0,white and Da0 ; ða0;white 2 a0;black Þ by pooling all
observations and computing the OLS estimator of the regression of Y on a constant, a dummy indicating that a person is black, and the variables contained in Z
ði.e., we would not include interactions of the race dummy and Z variablesÞ. Also,
we could have used Zwhite to calculate the price component and for the quantity
component ðto do so using my approach, one need only use ð1 2 DÞ rather than D
as the race dummy, i.e., use a dummy for being white rather than black, though
note the importance of interacting Z and ð1 2 DÞ rather than DÞ. For simplicity,
here I focus only on the particular Oaxaca-Blinder decomposition described in the
text.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

Y 5 b11 1 Db1D 1 Zb2Z 1 DZb2DZ 1 ε:

537

ðC4Þ

Now impose b11 5 a0,white, b2Z 5 a1,white, b1D 5 Da0, and b2DZ 5 Da1, and
let ε 5 εblack 1 Dðεblack 2 εwhiteÞ. We can rewrite ðC4Þ as
Y 5 a0;white 1 Za1;white 1 DDa0 1 DZDa1 1 εblack 1 DDε;
so the OLS coefficients from this specification satisfy the following equalities:
(
b
b
b 0;white
b 1;white
b 2Z 5 a
b11 5 a
ðC5Þ
full
b
b
b0;black 2 a
b0;white
b 1;black 2 a
b 1;white
b1D 5 a
b 2DZ 5 a
Next, define covariate groups, indexed with “Z” and “DZ” superscripts
to denote the set of covariates included in each group. These groups parbbase
2b
bfull
tition the covariates in X2, so we know from the equivalence of b
1
1
and bd that
b
bZ bDZ bfull
bbase
1D 5 dD 1 dD 1 b1D :
b b
Since b
bbase
1D is the sample mean black-white wage gap, it equals P 1 Q,
and thus
b 5 bd Z 1 bd DZ 1 b
bfull
Pb 1 Q
1 :
Thus, there is an immediate equivalence between the sum of the OaxacaBlinder decomposition price and quantity components, on the one hand,
and the sum of my decomposition’s components and the full model’s racedummy coefficient, on the other. I will now show that the equivalence is
b2b
b and bd DZ 5 Q
bfull
more specific than that: bd Z 5 P,
1 . First, project Z and
DZ on X1 5 ½1 D, yielding
0
0
0
0
0
:
ðX1 X1 Þ21 X1 Z 5 Zwhite and ðX1 X1 Þ21 X1 DZ 5
Zblack
DZ
The first equality follows because X1 is just the race dummy, D, and a
constant, so the coefficient on the dummy will be the cross-race difference
in the mean of Z, with the constant being the average of Z among whites.
The second equality follows from the fact that DZ 5 0 for all whites. Thus
the OLS intercept estimate when DZ is the dependent variable is 0, and the
coefficient on the race dummy must be the mean of DZ among blacks; since
D 5 1 for all blacks, this mean is Zblack . Post-multiplying these terms by
b
b1;white and b
b2DZ 5 Db
a1 , using the equalities in ðC5Þ, and ignoring the
b2Z 5 a
row corresponding to the constant yields the groupwise components of my
decomposition for b
bbase
1 :

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

538

Gelbach

bd Z 5 DZb
a1;white and bd DZ 5 Zblack Db
a1 :

ðC6Þ

b The second equality shows
The first equality in ðC6Þ shows that bdZ 5 Q.
a0;black 2 a
b1;white Þ, completing the proof of decomposition
that bd DZ 5 Pb 2 ðb
bfull
equivalence, since Db
a0 5 b
1D .
Appendix D
Understanding Why the Two Sequential Addition
Decompositions Differ
To understand why the two sequential- addition decompositions differ,
consider again panel B of table 5, which shows the two sets of accounting
estimates reported in table 3. The first set of accounting estimates comes
from first adding education to the column 1 base specification, to arrive at
column 2 of table 3, and then adding AFQT to that specification to arrive
at column 4. Since the columns 1 and 2 estimates of the black-white wage
gap are 22.07 and 19.58 log points, this sequence suggests that the blackwhite wage gap would be 2.49 log points lower if education were held constant, as reported in the first row and column of panel B of table 5. Because
the full-specification estimate of the black-white wage gap is 11.71 log
points, the difference between columns 2 and 4 is 7.86 log points, as reported in table 3 and repeated in the first row and second column of panel B
of table 5.
The bdrace parameters are consistent estimates of the conditional contribution of each covariate. Thus, the bias from using the education-AFQT
sequential addition approach equals the difference between the estimates
in the first row of panel B and the corresponding bdrace estimates. The second row in panel B shows the resulting bias estimates. These bias estimates
sum exactly to zero because my conditional decomposition and the sequential addition decomposition necessarily yield the same total explained
gap.
The bias from using the education-AFQT sequence is relatively small in
each case—a bit less than one log point. However, the next two rows in
panel B show that the reverse sequence causes substantial bias in accounting for the explained part of the gap. While my conditional decomposition
shows that variation in educational attainment contributes about 1.5 log
points to the black-white wage gap, the AFQT-education sequential addition approach suggests that variation in years of schooling actually reduces the black-white wage gap by 4.5 log points. Moreover, the same bias
magnitude applies to AFQT with opposite sign. The AFQT-education sequence of covariate addition would therefore suggest that nearly 15 log
points of the black-white wage gap can be attributed to AFQT variation

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

539

rather than the consistent estimate of about 9 log points computed when we
hold all other variables constant.
What drives the large bias from using the AFQT-education sequential addition approach? Consider the difference between the estimate of
20.0718 in column 3 of table 3, and column 4’s full-specification estimate of
20.1171. The difference between these estimates, 10.0453, is the explainedgap component attributed to education using the AFQT-education sequential addition approach. To understand the relationship between this
difference and the education component of my conditional decomposition, it will help to consider the following projection relationship:
1 X1;Hispanic GeducðAFQTÞ
1 X1;Age GeducðAFQTÞ
X2educ 5 X1;race GeducðAFQTÞ
Age
Hispanic
race
1 X2AFQT GeducðAFQTÞ
1 W educðAFQTÞ :
AFQT

ðD1Þ

The “educðAFQTÞ” superscript notation indicates that the G parameters
come from an equation relating education to all the X1 variables, as well
as AFQT. Inclusion of AFQT on the right-hand side of ðD1Þ is the only
difference between this projection relationship and the one in ð5Þ.
Let b
b1;race ðAFQTÞ be the race-dummy estimate from column 3 of table 3,
the one that includes AFQT. The equivalence result below can be used to
show that
bdrace ðAFQTÞ ; b
beducðAFQTÞ b
b1;race ðAFQTÞ 2 b
bfull
:
beduc
1;race 5 Grace
2
The estimate is the education component of the explained gap computed
using the AFQT-education sequential addition approach, which we have
b educðAFQTÞ by dividing bdrace ðAFQTÞ
seen equals 10.0453. We can thus find G
race
by the table 5 education coefficient in the full-specification wage equabeducðAFQTÞ 5 1:10, which I earlier reported
5 0:041. The result is G
tion, b
beduc
2
race
in the second column of table 4. Relative to my conditional decomposition, the bias in bdrace ðAFQTÞ is thus
BiaseducðAFQTÞ 5 bdrace ðAFQTÞ 2 bdrace
h
i
beducðAFQTÞ 2 G
beduc  b
5 G
:
beduc
2
race
race

ðD2Þ

Equation ðD2Þ shows that the estimated bias in the part of the explained
gap attributed to a covariate depends on two factors. One factor is the difference made by conditioning on AFQT when estimating the black-white
beducðAFQTÞ and G
beduc . In the
gap in education, that is, the difference between G
race
race
present example, these projection coefficients are very dissimilar, having
different signs and very different magnitudes. Their difference equals 1.10 2
ð20.37Þ 5 1.47. The other factor that affects the bias from using sequential
covariate addition to estimate the education share of the explained gap is

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

540

Gelbach

b
, the estimated return to education. While this coefficient is relatively
beduc
2
small, its product with 1.47 is substantial, at 16 log points.
Since the biases in the components attributed to AFQT and education
must sum to zero, it immediately follows that the sequential addition bias
in the component attributed to AFQT when it is added first to the base
specification satisfies BiasAFQTðAFQTÞ 5 2BiaseducðAFQTÞ . By symmetry of all
definitions above, it can then be shown that the bias in the component
attributed to education when it is added first to the base specification
satisfies
BiasAFQTðeducÞ 5 bdrace ðX2educ Þ 2 bdrace
h
i
bAFQTðeducÞ 2 G
bAFQT  b
5 G
;
bAFQT
2
race
race

ðD3Þ

bAFQTðeducÞ is defined analogously to G
beducðAFQTÞ : it is the race-dummy
where G
race
race
coefficient from least-squares estimation of the projection relationship
between the left-hand-side variable AFQT and all X1 variables plus education. This coefficient’s value is 20.78, quite close to the estimate of
bAFQT . That is, the black-white AFQT gap changes by less than a
20.87 for G
race
tenth of a standard deviation when we partial out education in computing
this gap. Meanwhile, the return to AFQT from the full-specification wage
, is roughly 10 log points per standard deviation. That is
equation, b
bAFQT
2
why the bias of the education component’s part of the sequential addition–
explained gap is less than one log point when we add education first.
We can summarize this discussion by supposing we have rescaled all X2
variables so that all wage-equation coefficients, that is, all elements of b2,
equal one. Whether sequential covariate addition accounting exercises are
sensitive to the sequence of addition then depends entirely on the pattern of
b projection coefficients estimated with and without
differences between G
conditioning on other X2 covariates. When the relationship between X1
and one of the covariates is very sensitive to conditioning on additional covariates, the sequence in which covariates are added will make a large difference in accounting exercises, as in the black-white wage gap.
References
Altonji, Joseph G., Prashant Bharadwaj, and Fabian Lange. 2012. Changes
in the characteristics of American youth: Implications for adult outcomes. Journal of Labor Economics 30, no. 4:783–828.
Altonji, Joseph, and Rebecca Blank. 1999. Race and gender in the labor
market. In Handbook of labor economics, vol. 3C, ed. Orley Ashenfelter
and David Card. Amsterdam: Elsevier.
Bound, John, and Richard B. Freeman. 1992. What went wrong? The
erosion of relative earnings and employment among young black men in
the 1980s. Quarterly Journal of Economics 107, no. 1:201–32.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

541

Buckles, Kasey, and Daniel M. Hungerman. 2008. Season of birth and
later outcomes: Old questions, new answers. NBER Working Paper
no. 14573, National Bureau of Economic Research, Cambridge, MA.
Caceres-Delpiano, Julio. 2006. The impacts of family size on investment
in child quality. Journal of Human Resources 41, no. 4:738–54.
Card, David, and Alan B. Krueger. 1995. Myth and measurement. Princeton, NJ: Princeton University Press.
Charles, Kerwin Kofi, and Jonathan Guryan. 2008. Prejudice and wages:
An empirical assessment of Becker’s The economics of discrimination.
Journal of Political Economy 116, no. 5:773–809.
Cullen, Julie Berry, Brian A. Jacob, and Steven D. Levitt. 2005. The impact
of school choice on student outcomes: An analysis of the Chicago public
schools. Journal of Public Economics 89, nos. 5–6: 729–60.
Deaton, Angus. 2008. Income, health, and well-being around the world:
Evidence from the Gallup World Poll. Journal of Economic Perspectives
22, no. 2:53–72.
Donohue, John J., III, and Steven D. Levitt. 2001. The impact of race on
policing and arrests. Journal of Law and Economics 44, no. 2:367–94.
Edlund, Lena, and Rohini Pande. 2002. Why have women become leftwing? The political gender gap and the decline in marriage. Quarterly
Journal of Economics 117, no. 3:917–61.
Elder, Todd E., John H. Goddeeris, and Steven J. Haider. 2010. Unexplained gaps and Oaxaca-Blinder decompositions. Labour Economics 17,
no. 1:284–90.
———. 2013. Isolating the roles of individual covariates in reweighting
estimation. Working paper, Michigan State University.
Firpo, Sergio, Nicole Fortin, and Thomas Lemieux. 2009. Unconditional
quantile regressions. Econometrica 77, no. 3:953–73.
———. Decomposition methods. 2011. In Handbook of labor economics,
vol. 4A, ed. Orley Ashenfelter and David Card, 1–102. Amsterdam:
Elsevier.
Fortin, Nicole. 2008. The gender wage gap among young adults in the
United States: The importance of money versus people. Journal of Human
Resources 43, no. 4:886–920.
Fortin, Nicole, Thomas Lemieux, and Sergio Firpo. 2007. Decomposing
wage distributions using recentered influence function regressions. Unpublished manuscript, University of British Columbia.
Gardeazabal, Javier, and Arantza Ugidos. 2004. More on identification in
detailed wage decompositions. Review of Economics and Statistics 86,
no. 4:1034–36.
Gelbach, Jonah B. 2002a. Identified heterogeneity in detailed wage decompositions. Working paper, University of Maryland, College Park.
http://gelbach.law.upenn.edu/∼gelbach/papers/comment-or/submitted
-12-16-02-comment-or.pdf.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

542

Gelbach

———. 2002b. Public schooling for young children and maternal labor
supply. American Economic Review 92, no. 2:307–22.
———. 2009. When do covariates matter? And which ones, and how
much? University of Arizona Department of Economics Working Paper
no. 09-07, Department of Economics, University of Arizona. http://
papers.ssrn.com/abstract51425737.
Goldberger, Arthur S. 1991. A course in econometrics, Cambridge, MA:
Harvard University Press.
Goldin, Claudia, and Lawrence F. Katz. 2002. The power of the pill: Oral
contraceptives and women’s career and marriage decisions. Journal of
Political Economy 110, no. 4:730–70.
Greenstone, Michael. 2002. The impacts of environmental regulations on
industrial activity: Evidence from the 1970 and 1977 Clean Air Act
Amendments and the Census of Manufactures. Journal of Political Economy 110, no. 6:1175–1219.
Guryan, Jonathan. 2004, Desegregation and black dropout rates. American Economic Review 94, no. 4:919–43.
Haider, Steven J., Robert F. Schoeni, Yuhua Bao, and Caroline Danielson.
2004. Immigrants, welfare reform, and the economy. Journal of Policy
Analysis and Management 23, no. 4:745–64.
Hanushek, Eric A., and Ludger Woessmann. 2008. The role of cognitive
skills in economic development. Journal of Economic Literature 46, no. 3:
607–68.
Hausman, Jerry. 1978. Specification tests in econometrics. Econometrica
46, no. 6:1251–71.
Horrace, William C., and Ronald L. Oaxaca. 2001. Interindustry wage differentials and the gender wage gap: An identification problem. Industrial
and Labor Relations Review 54, no. 3:611–18.
Jones, F. L. 1983. On decomposing the wage gap: A critical comment on
Blinder’s method. Journal of Human Resources 18, no. 1:126–30.
Kane, Thomas J., Stephanie K. Riegg, and Douglas O. Staiger. 2006. School
quality, neighborhoods, and housing prices. American Law and Economics Review 8, no. 2:183–212.
Kessler, Daniel, and Mark McClellan. 1996. Do doctors practice defensive
medicine? Quarterly Journal of Economics 111, no. 2:353–90.
Khwaja, Asim Ijaz, and Atif Mian. 2008. Tracing the impact of bank liquidity shocks: Evidence from an emerging market. American Economic
Review 98, no. 4:1413–42.
Klick, Jonathan, and Thomas Stratmann. 2007. Medical malpractice reform
and physicians in high-risk specialties. Journal of Legal Studies 36, no. 2,
article 2.
Krueger, Alan B. 1993. How computers have changed the wage structure:
Evidence from microdata, 1984–1989. Quarterly Journal of Economics
108, no. 1:33–60.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

When Do Covariates Matter?

543

Lang, Kevin, and Michael Manove. 2006. Education and labor-market
discrimination. NBER Working Paper no. 12257, National Bureau of
Economic Research, Cambridge, MA.
Leamer, Edward E. 19815. Sensitivity analyses would help. American
Economic Review 75, no. 3:308–13.
Lee, David S., and Justin McCrary. 2005. Crime, punishment, and myopia. NBER Working Paper no. 11491, National Bureau of Economic
Research, Cambridge, MA.
Lefgren, Lars, and Frank McIntyre. 2009. Explaining the puzzle of crossstate differences in bankruptcy rates. Journal of Law and Economics 52,
no. 2, article 7.
Levitt, Steven D., and Chad Syverson. 2008. Market distortions when
agents are better informed: The value of information in real estate transactions. Review of Economics and Statistics 90, no. 4:599–611.
Machado, Jose, and Jose Mata. 2005. Counterfactual decompositions of
changes in wage distributions using quantile regression. Journal of Applied Econometrics 20, no. 4:445–65.
Moore, William J., Robert J. Newman, and Geoffrey K. Turnbull. 1998.
Do academic salaries decline with seniority? Journal of Labor Economics
16, no. 2:352–66.
Neal, Derek A., and William R. Johnson. 1996. The role of premarket factors in black-white wage differences. Journal of Political Economy 104,
no. 5:869–95.
Neumark, David. 1988. Employers’ discriminatory behavior and the estimation of wage discrimination. Journal of Human Resources 23, no. 3:
279–95.
Oaxaca, Ronald L., and Michael R. Ransom. 1999. Identification in detailed wage decompositions. Review of Economics and Statistics 81, no. 1:
154–57.
Raphael, Steven, and Rudolf Winter-Ebmer. 2001. Identifying the effect
of unemployment on crime. Journal of Law and Economics 44, no. 1:
259–83.
Stevenson, Betsey, and Justin Wolfers. 2006. Bargaining in the shadow of
the law: Divorce laws and family distress. Quarterly Journal of Economics
121, no. 1:267–88.
Theil, Henri. 1957. Specification errors and the estimation of economic
relationships. Revue de l’Institut International de Statistique/Review of
the International Statistical Institute 25, no. 1:41–51.
Wooldridge, Jeffrey M. 2002. Econometric analysis of cross section and
panel data. Cambridge, MA: MIT Press.
Yun, Myeong-Su. 2005. A simple solution to the identification problem in
detailed wage decompositions. Economic Inquiry 43, no. 4:766–72.

This content downloaded from 130.082.031.210 on September 17, 2018 07:37:10 AM
All use subject to University of Chicago Press Terms and Conditions (http://www.journals.uchicago.edu/t-and-c).

