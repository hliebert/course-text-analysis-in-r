19

CHAPTER

Econometric Methods for the Analysis
of Assignment Problems in the
Presence of Complementarity
and Social Spillovers1
Bryan S. Graham{
Contents
1. Introduction
2. An overview of empirical matching models
2.1 Some illustrative examples
2.2 Econometric research on matching problems
3. Identification and estimation of one-to-one matching models when match output is
observed
3.1 The structure of feasible assignments in one-to-one matching problems
3.1.1 Double randomization
3.1.2 Conditional double randomization
3.1.3 No matching on unobservables
3.2 Average reallocation effects (AREs)
3.2.1 Definition of target estimands
3.2.2 Identification under double randomization
3.2.3 Identification under no matching on unobservables
3.2.4 Further thoughts on the identification of AREs
3.3 Continuously-valued match characteristics
3.4 Estimation of AREs when match output is observed
3.4.1 Estimation of the average match output function (AMF)
3.4.2 AREs with discretely-valued covariates
3.4.3 AREs with continuously-valued covariates

1

{

967
969
970
972
974
975
978
980
981

984
984
988
990
992

993
997
997
998
1005

I would like to thank Stephane Bonhomme, Charles Manski, Konrad Menzel, and Geert Ridder for helpful
discussions. More generally my thinking on the material presented below has benefited from discussions with my
co-authors, Guido Imbens and Geert Ridder, and with members of the former MacArthur Research Network on
Economic Inequality and Social Interactions (especially Steven Durlauf). Some of the new material in this chapter
was presented to the applied micro-economics group at the Federal Reserve Bank of New York to whom I am
thankful for feedback. I have especially benefited from comments on an earlier draft by Pierre-André Chiappori,
Jeremy Fox, Guido Imbens, Jim Powell, and Bernard Salanie. Financial support from the National Science
Foundation (SES #0820361) is gratefully acknowledged. All the usual disclaimers apply.
Department of Economics, New York University, 19 West 4th Street, 6FL, New York, NY 10012 and NBER.
E-Mail: bryan.graham@nyu.edu, Web: https://files.nyu.edu/bsg1/public/.

Handbook of Social Economics, Volume 1B
ISSN 0169-7218, DOI: 10.1016/S0169-7218(11)01024-0

#

2011 Elsevier B.V.
All rights reserved.

965

966

Bryan S. Graham

4. Identification and estimation of one-to-one matching models when match output is
unobserved: equilibrium approaches
4.1 A two-sided model of multinomial choice
4.2 Parametric identification of AREs when match output is unobserved
4.3 Nonparametric identification
4.3.1 Pairwise logit identification
4.3.2 Nonparametric identification in a 2  2 matching market
4.3.3 Nonparametric identification in a K  L matching market
4.4 Identification in one-to-one matching markets without transfers
4.5 Estimation on the basis of match characteristics alone
4.5.1 Testing for supermodularity
4.5.2 Parametric modeling of average match surplus
4.5.3 Pairwise logit estimation
4.5.4 Pairwise maximum score estimation
5. Segregation in the presence of social spillovers
5.1 Population setup
5.2 Global reallocations: the social planner’s problem
5.3 Local reallocations: movers versus stayers
5.4 Parametric examples
6. Treatment response with spillovers
7. Areas for further research
References

1007
1008
1012
1015
1016
1018
1021

1025
1026
1026
1027
1028
1029

1029
1031
1034
1039
1042
1044
1046
1047

Abstract
Concern over the distributional effects of policies which induce changes in peer group
structure, or ‘associational redistributions’ (Durlauf, 1996c), motivates a substantial body of
theoretical and empirical research in economics, sociology, psychology, and education. A
growing collection of econometric methods for characterizing the effects of such policies are
now available. This chapter surveys these methods. I discuss the identification and estimation
of the distributional effects of partner reassignment in one-on-one matching models, the
average outcome and inequality effects of segregation, and treatment response in the
presence of spillovers.
JEL Classification: C14, C25, C60, C61, J4, J12, I21

Keywords
matching models
assignment problems
peer group effects
social spillovers
segregation
associational redistribution
complementarity
treatment effects
semiparametric M-estimation

Econometric Methods for the Analysis

1. INTRODUCTION
Individuals exercise substantial control over who they associate with. Sometimes directly,
as is the case with spousal choice, and sometimes indirectly, as when a family, by choosing
to reside in a certain neighborhood, gains access to specific schools (and hence peers) for
their children. Associations or reference groups, such as families, co-workers, neighbors
and classmates, define (partially) isolated environments in which social interaction takes
places (Durlauf, 1996c). These interactions may, in turn, affect the acquisition of human
capital, the availability of employment opportunities, or even influence one’s aspirations
and values. If this is the case, then inequality in social context may contribute to socioeconomic inequality.2 Conversely, policies which alter the composition of social groups –
‘associational redistributions’ – either directly or indirectly (by changing the incentives
governing their formation) can lessen inequality (Durlauf, 1996c).
Many of the most controversial social policies in the United States involve associational redistribution. Examples include affirmative action in admissions and hiring,
school desegregation policies, school assignment policies, single-sex schooling within
the public system, active labor market policies, and whether public housing should
be concentrated in a small number of locations or dispersed throughout a metropolitan
area. That these policies are controversial is understandable: many individuals view
their choice of associates as beyond the (direct) purview of public policy (cf., Piketty,
2000). Their controversial nature, however, is not wholly political. It also stems from
uncertainty surrounding their effects on average outcomes and inequality.
This chapter reviews econometric methods for evaluating the effects of reallocations
on the distribution of outcomes. In the social economics context ‘reallocations’ coincide with associational redistributions. The methods outlined in this chapter, however,
are also of relevance to researchers in the fields of empirical industrial organization,
labor economics, public finance, educational studies, sociology, and public health.
Reallocations are distinguished from other policies by the fact that they involve no
augmentation, only redistribution, of resources. The study of reallocations necessitates
some foundational thinking. Consequently, this review devotes a substantial amount of
space to issues of measurement. Particularly to defining and motivating estimands
which measure the effects of reallocations.
Effective policy-making requires knowledge of the causal mapping from group
composition into outcomes. Consider the design of a school voucher program. Calibrated theoretical models suggest that any meaningful school voucher program would
generate large changes in the distribution of students, and hence peer groups, across
schools (e.g., Manski, 1992; Nechyba, 2006; Ferreyra, 2007). The magnitude and
structure of any peer group effect in learning would be an important determinant of
2

Loury (1977, 2002), for example, argues that segregated social networks generate inequality across racial groups.

967

968

Bryan S. Graham

these changes. It would also determine their effects on the level and distribution of student achievement. For these reasons knowledge of the exact form of any peer spillover
is required for optimal voucher design. Unfortunately, this information is not provided
by extant empirical research (cf., Piketty, 2000; Fernández, 2003).
Knowledge of the average effect of a unit increase in measured peer quality, the target
estimand of many papers, is only indirectly helpful (e.g., Angrist and Lang, 2004; Card
and Rothstein, 2007). This estimand measures the effect of an infeasible policy. Not all
individuals’ peer groups may be improved simultaneously; raising peer quality in some
schools or classrooms requires lowering it in others. If the target policy is a reassigning
one, then this will necessarily influence the precise form econometric analysis should take.
As a second example, consider the relationship between teacher quality and student
achievement. Few educators, parents, or students doubt the centrality of teachers in the
learning process (Jacob and Lefgren, 2007). Furthermore measured teacher quality varies substantially across schools (e.g., Buddin and Zamarro, 2009). Yet, given the structure of a typical teacher labor market, is seems unlikely that the observed assignment of
teachers to schools corresponds to one which, say, maximizes student achievement.
One response to these observations is to implement policies that attempt to change
the distribution of teacher quality (e.g., policies which encourage highly able young
people to enter the teaching profession). Another, not mutually exclusive approach,
involves reassigning teachers across schools. Depending on the nature of the educational production function it may be possible to raises student achievement – holding
the population of available teachers fixed – by such reassignments.
Assignment problems have been widely studied by economists as well as those in
operations research (e.g., Koopmans and Beckmann, 1957; Gale, 1960; Roth and
Sotomayor, 1990; Burkard, Dell’Amico and Martello, 2009). Adding statistical content
to these problems in a manageable way is nontrivial. Doing so raises a number of interesting and challenging econometric issues which are explored below.
Sections 2 begins with a brief overview of empirical work on one-to-one matching
problems. Econometric research on this class of models may be divided into two categories. In the first, which is the subject of Section 3, the econometrician observes the
match outcome of interest in addition to match characteristics. The goal is to recover
the match production function from these data and evaluate the effects of alternative
assignments or ‘matchings’ on the distribution of outcomes. In the second, which is
the subject of Section 4, only match characteristics are observed. Here the question
is what does one’s choice of match partner alone reveal about preferences? There are
connections between this question and the revealed preference approach to single
agent models of discrete choice (McFadden, 1974).3
3

As in most situations they are unobserved by the researcher, this chapter does not explore the identifying content of
transfers between agents.

Econometric Methods for the Analysis

Section 5 studies a setting where social groups consist of a large number of agents,
for example neighborhoods or classrooms. Agents are binary-typed and heterogenous
in unobserved ability. Outcomes may vary with the type composition of one’s social
group. de Bartolome (1990), Benabou (1993, 1996) and Durlauf (1996a,b) study
non-stochastic versions of this set-up. While these papers have been influential in shaping economists’ intuitions about the equity and efficiency implications of residential
segregation, their effect on empirical work has been more indirect.4 Section 5 outlines
one way to bring these models to the data.
Section 6 studies treatment response in the presence of spillovers. Here influencing the
structure of reference groups is not the policy-maker’s goal. Instead, the policy-maker
seeks to account for the effects of these groups when formulating an individualistic policy.
A pro-typical example involves optimal vaccine policy (e.g., Manski, 2009a,b).
This chapter does not review the growing literature on identifying peer effects per
se (e.g., Manski, 1993; Moffitt, 2001; Brock and Durlauf, 2001a; 2007; Glaeser and
Scheinkman, 2001, 2003; Graham, 2008). This literature is, of course, very much
related to the material surveyed here. Several good surveys of this material are now
available; including those of Brock and Durlauf (2001b), Durlauf (2004), Epple and
Romano (this Handbook), and Blume, Brock, Durlauf and Ioannides (this Handbook).
I also ignore models where the study of strategic interaction within groups is central.
Interactions of this type, which feature in the work of Manski (1993, 2010) and Brock
and Durlauf (2001a), are likely to be relevant in practice and important for some policy
questions, but a meaningful treatment of them would require a separate survey (cf.,
Blume, Brock, Durlauf and Ioannides in this Handbook).5 Finally, while I often refer
to empirical work in what follows, no comprehensive review is attempted.

2. AN OVERVIEW OF EMPIRICAL MATCHING MODELS
Consider a ‘market’ composed of two heterogeneous populations, say, ‘firms’ and
‘workers’ (i.e., men and women, teachers and students, etc.). Units in each population
may either self-produce or costlessly seek out a partner from the other population to
engage in joint production. Such settings generate one-to-one assignment or matching
problems. Matching models play important roles in many areas of economics. They
were famously used by Becker (1973, 1974) to characterize ‘marriage markets’ (cf.,
Mortesen, 1988; Chiappori and Oreffice, 2008). Other important applications include
the study of job matching (e.g., Crawford and Knoer, 1981; Kelso and Crawford,
1982), housing markets (Shapley and Scarf, 1974), auctions (Hatfield and Milgrom,
4
5

See Piketty (2000, pp. 462 – 467) and Fernández (2003, p.14) for related discussions.
The econometric study of games is an important project of empirical industrial organization (e.g., Aradillas-López
and Tamer, 2008).

969

970

Bryan S. Graham

2005; Edelman, Ostrovsky and Schwarz, 2007), supply chains (Ostrovsky, 2008), and
the determinants of wage inequality (Sattinger, 1980, Kremer and Maskin, 1996).
Koopmans and Beckmann (1957) and Shapley and Shubik (1971) initiated the study
of matching problems in economics. They considered the transferable utility case
where, in addition to the assignment or matching, the division of match output
between partners is determined in equilibrium.6 Gale and Shapley (1962) studied the
case where agents have preferences over different candidate partners, but are unable
to make transfers to them.7
Each firm and worker has a utility function, allowing them to rank the desirability of
different matches. When utility is transferable across match partners, an equivalent representation of agent utilities is in terms of a match-specific surplus and transfer. Theorists
treat these objects as primitives. An econometrician, in contrast, might ask under what
conditions they are identified by the joint distribution of match outcomes and/or partner
characteristics. Given identifiablility questions of estimation and inference remain.
Identifying the form of agent preferences or, when utility is transferrable, the match
surplus function allows the econometrician to undertake predictive exercises. Two types
of predictions are of particular interest. First, one might want to characterize how counterfactual assignments (or policies which induce re-assignment as a by product), alter
the distribution of outcomes. Second, one might want to understand how changes in
the primitives of the market, for example the availability of certain types of workers
or firms, affects the equilibrium assignment.
The first question involves reallocations. Reallocations, unlike many policies more
widely studied in economics, do not involve changes in resource availability. Reallocations leave the distribution of agent characteristics unchanged, only agent pairings are
changed. The second question does involve changes in the distribution of agent characteristics, but recognizes that the effects of such changes are filtered through an equilibrium assignment process.

2.1 Some illustrative examples
Some empirical examples, and associated policy questions, help to motivate the material that follows. As a first, canonical example, consider a firm that must assign distinct
tasks to heterogenous workers. A set of characteristics for each task and worker are
observed. Also available is a (historical) dataset with information on past worker characteristics, assigned tasks, and estimates of productivity. How should a social planner
use this dataset to guide assignments? One organization with considerable interest in
6

7

In what follows I will call a pairing of two specific agents a ‘match’ or a ‘pairing’. I will call an assignment of all agents
an ‘allocation’, ‘assignment’ or a ‘matching’.
The theoretical analysis of assignment problems remains an active research area in economics and operations research
(e.g., Roth and Sotomayor, 1990; Burkard, Dell’Amico and Martello, 2009). Much of this literature focuses on
variants of two questions. First, what form does a surplus-maximizing assignment take? Second, are there
decentralized mechanisms, which lead to such an assignment? (cf., Roth and Vande Vate, 1990; Roth, 2008).

Econometric Methods for the Analysis

such questions is the United States Military. A modest literature, surveyed by Warner
and Asch (1995), documents the relationship between various enlistee characteristics,
such as Armed Forces Qualification Test (AFQT) score, and military performance
(e.g., Fernandez, 1992). Such studies can inform the debate regarding the returns to
increasing measured enlistee quality.
A different question is how can the Armed Forces best use those enlistees available
right now? Optimally assigning enlistees to tasks could generate sizeable increases in
military productivity (cf., Carrell, Fullerton and West, 2009). Implementing such a
policy would require no augmentation of resources, the pool of available workers
and set of tasks are left unchanged. The question is of more than intellectual interest:
the military has substantial latitude over how it may employ its personnel (as do many
other large organizations).
Personnel-assignment problems are widely studied in the field of operations research
(e.g., Gale, 1960; Luenberger, 2005). The novelty here is statistical content: the
mapping from match attributes, in this case worker and task characteristics, into outcomes is both stochastic and unknown.
A second example involves educational policy. Lankford, Loeb and Wyckoff (2003)
document widespread differences in measured teacher quality across schools in New
York City. These differences, in conjunction with residential segregation, generate substantial differences in average teacher quality across demographic groups. Understanding
the mechanics of teacher-to-school matching could aid in the design of policies, which
raise student achievement and/or reduce disparities in teacher quality across schools.
In a companion paper, Loeb, Boyd, Lankford and Wyckoff (2003) argue that the
teacher labor market resembles a two-sided matching model without transfers.8 They
assume that assignment follows the deferred acceptance procedure of Gale and Shapley
(1962): schools make offers to their most preferred candidate, candidates reject those
offers which are either dominated by other available offers or unemployment. This
process continues until all positions are filled or a school is unable to find an acceptable
candidate among those still available.9 They estimate the parameters of employer
(school) and teacher utility functions by the method of simulated moments.
With employer and employee preference estimates in hand it becomes possible, at
least in principle, to forecast the effects of alternative policies. For example, if teachers
prefer small class sizes, changes in the distribution of class size across schools would change
the equilibrium assignment of teachers to schools. The induced re-assignment of teachers
to schools thus becomes a consideration in the formulation of class size policy.10

8

9
10

They argue that collective bargaining agreements prevent school-specific wages from adjusting to equilibrate supply
and demand.
This algorithm leads to an employer-optimal stable matching (cf., Roth and Sotomayor, 1990).
For example, a reduction in average class size in predominately minority schools might, indirectly, lead to an increase
in average measured teacher quality in them.

971

972

Bryan S. Graham

A third example is provided by Baccara, Imrohoroglu, Wilson and Yariv (2009)
who study the office choices of a group of academics who are connected through
friendship and coauthorship networks. Since individuals may value physical proximity
to those in their network, their choice of office affects the utility of others. An equilibrium assignment, even when transfers between agents are possible, need not be optimal. Under certain assumptions an individual’s choice of office may provide
information about her valuation of proximity to network partners. The efficiency of
alternative assignments can then be compared to the status quo. The presence of
externalities suggests that large welfare gains may be available via reallocation.
As a final example consider the empirical analysis of marriage markets (e.g., Kremer,
1997; Choo and Siow, 2006a,b; Chiappori and Oreffice, 2008). Men are rivals with
one another when attempting to match with women and vice versa (Becker 1973,
1974). The distribution of men and women available for marriage, as well as the nature
of any surplus generated by marriage, drives marriage patterns. These patterns influence, among other outcomes, the intra-household division of resources, the acquisition
of human capital, fertility decisions and the evolution of inequality across generations.
Empirical models of marriage markets consequently play important roles in many areas
of family and household economics (cf., Weiss, 1997).

2.2 Econometric research on matching problems
Despite their prominent role in many areas of economics, comparatively little work
explores the econometric implications of matching models. Formal research on the
econometrics of matching is of relatively recent origin; with many of the key papers
as yet unpublished.11
Graham, Imbens and Ridder (2007, 2009a) introduced reallocation problems to the
econometrics literature. They study nonparametric estimation of, and inference on,
average reallocation effects (AREs) – differences in expected outcomes across feasible
assignments. Restrictions on the status quo assignment identify the match production
function, which is then averaged over alternative allocations. Graham, Imbens and
Ridder (2007) assume that match characteristics are discretely-value. This assumption
makes inference on average outcome-maximizing allocations feasible. Bhattacharya
(2009), also working in the discrete case, extends this work in a number of ways
(e.g., by considering other notions of optimality). Graham, Imbens and Ridder
(2009a) consider the case where match characteristics are continuously-valued. Since
inference on optimal allocations is difficult in this case, they introduce a semiparametric
family of reallocations, and present identification and estimation results for it.
11

A sophisticated literature in empirical labor economics studies structural models of search and matching (e.g.,
Eckstein and Wolpin, 1990; Flinn, 2006). Here my focus is on frictionless assignment models. Non-stochastic
versions of these models are widely-studied in the literature on linear and nonlinear programming (e.g., Luenberger,
2005). The game theoretic approach to such problems is summarized by Roth and Sotomayor (1990).

Econometric Methods for the Analysis

In some settings, match surplus may be difficult to observe and/or measure. In such
situations, it is of interest to study what can be learned from data on the characteristics
of paired agents alone. The analogy with the revealed preference approach to consumer
behavior is quite sharp: under what conditions can an agent’s choice of partner reveal
the nature of her preferences? The two-sided nature of matching problems distinguish
them from traditional discrete-choice models of consumer demand (e.g., McFadden,
1974; Domencich and McFadden, 1975). Both parties of a partnership are complicit
in its formation, hence individuals are not unconstrained in their choice of partners.12
This suggests that in the matching context choice data reveal less about preferences
than in the textbook discrete choice model of consumer behavior.
Dagsvik (2000) appears to be the first in the econometrics literature to consider what
the distribution of match characteristics alone reveals.13 Choo and Siow (2006a,b)
develop a closely related framework (henceforth the ‘CS model’ or ‘CS framework’),
which has been extended by Chiappori, Salanié and Weiss (2010), Galichon and
Salanié (2009), and Siow (2009).14 Associated with each unit is a discretely valued
observed characteristic as well as an unobserved, continuously valued, characteristic.15
The unobserved characteristic indexes heterogeneity in preferences for different types
in the opposing population. By combining restrictions on how unobservables affect
match production with the assumption that the observed assignment satisfies pairwise
stability, they show that the net match surplus function is identified up to scale.16 This
result relies on parametric distributional assumptions.
Fox (2009a, b), in the first explicitly nonparametric treatment, also explores what
can be learned from data on partner characteristics alone. His approach is based on a
‘rank order property’. Consider two assignments, the rank order property states that
the assignment which generates more surplus in a deterministic version of the model
(i.e., one with no unobserved agent heterogeneity and/or match-specific output
‘shocks’), will be more frequently observed in the data. Although the rank order property is intuitive, it can be difficult to justify primitively. Nevertheless his approach has
already been used in several applied papers (e.g., Fox and Bajari, 2009; Yang, Shi and
Goldfarb, 2009; Baccara, Imrohoroglu, Wilson and Yariv, 2009).
12

13

14
15

16

Echenique, Lee and Shum (2010) make this point quite elegantly. In a matching market equilibrium an individual
may choose A over B even if she prefers B. This is because B may be unavailable. Unlike in a single agent discrete
choice model, revealed preference is ambiguous.
In sociology, there is a small literature on two-sided logit models (Logan 1998, Logan, Hoff and Newton, 2008)
which is also explicitly grounded in economic models of matching.
Dagsvik (2000) considers the non-transferable utility case, while Choo and Siow (2006a,b) assume transferable utility.
The discretely-value characteristic may be a a composite of multiple primitive characteristics (e.g., age, gender, years
of schooling). The continuously valued characteristic is vector-valued (see below).
A natural notion of equilibrium in matching problems with transfers is pairwise stability: an assignment (and associated set
of transfers between units) corresponds to an equilibrium if no two pairs of agents can raise their total surplus by
exchanging partners. In one-to-one matching games with transfers pairwise stable assignments are generically unique,
although a continuum of transfers may sustain them (e.g., Shapley and Shubik, 1971; Roth and Sotomayor, 1990).

973

974

Bryan S. Graham

A goal of the sections that follow, is to bring out common features of each of the
approaches mentioned above. To do this I break down a prototypical empirical matching
problem into three parts. First, associated with each matching market is a set of feasible
assignments. Two marginal distributions describe the distribution of observed and unobserved agent attributes on each side of the market. A feasible assignment is a joint distribution of partner attributes, both observed and unobserved, consistent with these two marginals
(Graham, Imbens, and Ridder, 2007). Second, each match generates output or surplus.
Properties of the match surplus function are important for counterfactual policy analysis.
Third, there is a matching process that generates the observed assignment; this assignment
may correspond to a decentralized equilibrium or be exogenously determined. Identifying the outcome effects of reallocations require restrictions on one or more of these parts
of the problem. The necessary assumptions vary with the question begin asked, which is
embodied in the target estimand. I assume that the econometrician knows the joint distribution of observed partner characteristics. In some situations, she may also know the
conditional distribution of match outcomes given observed partner characteristics.

3. IDENTIFICATION AND ESTIMATION OF ONE-TO-ONE MATCHING
MODELS WHEN MATCH OUTPUT IS OBSERVED
This section outlines econometric methods for the analysis of one-to-one matching problems appropriate for situations where match output, in addition to match characteristics
is observed. For example, we may observe student achievement (the output) as well as
measures of teacher and student quality (the match characteristics). Section 4 reviews
methods appropriate for the case where only match characteristics are observed.
Section 3.1 begins with a discussion of assignments. An assignment is a feasible allocation of ‘workers’ to ‘firms’. All empirical matching models, explicitly or implicitly, impose
restrictions on the status quo assignment. Since the sampling process only reveals the distribution of observed match characteristics, restrictions on the conditional distribution of
unobserved match characteristics are needed to identify the match surplus function. This
point is explicit in Graham, Imbens and Ridder (2007, 2009a). There the fully nonparametric nature of the match surplus function necessitates rather strong restrictions on the
status quo allocation. Less obviously, the structural model of Choo and Siow (2006a, b)
also implies strong restrictions on the status quo allocation. There a priori restrictions on
the match surplus function induce equilibrium (i.e., status quo) assignments where the
conditional distribution of unobserved match characteristics takes a particular form.
Section 3.1 discusses two classes of assignments in detail: those which satisfy an ‘as if’
double randomization condition and those which satisfy a weaker no matching on unobservables condition. The idea of doubly randomized assignment, introduced in Graham
(2008), is straightforward. The no matching on unobservables condition, introduced
here, is more subtle. A theme of Section 3.1 is that data distributions in matching problems are conceptually more challenging than those induced by random sampling from

Econometric Methods for the Analysis

a single population. In matching problems, the data distribution reflects constraints
imposed by two separate, but interacting, populations. This material is tedious, but foundational for what follows.
Section 3.2 considers average reallocation effects (AREs). AREs measure the change
in average outcomes induced by reassigning agents to different partners. The identification of AREs requires a combination of restrictions on the status quo assignment and the
match surplus function. If the analyst wishes to leave the match surplus function nonparametric, then strong restrictions on the status quo assignment are required. Alternatively, imposing semiparametric restrictions on the match surplus function allows for
identification under weaker assumptions on the status quo. However, when considering
AREs a priori restrictions on the match output function should be imposed with considerable caution. Assuming that match output is separable in a specific firm and worker
characteristic, for example, will imply that the distribution of match output is invariant
across a potentially large set of distinct allocations. Since the evaluation of reallocations
is a major motivation for undertaking empirical analysis this is undesirable.
For technical and/or pedagogical reasons Sections 3.1 to 3.2 emphasize settings
where agent characteristics are discretely valued. Section 3.3 discusses the case of continuously valued agent characteristics as in Graham, Imbens and Ridder (2009a). Issues
of estimation and inference are discussed in Section 3.4.

3.1 The structure of feasible assignments in one-to-one
matching problems
Consider a market composed of two large populations. The first population consists of
‘firms’. Associated with the ith firm is the observed, discretely-valued, characteristic
Wi 2 fw1 ; . . . ; wK g ¼ W and an unobserved characteristic, ei (which may be vectorvalued). In many cases Wi will contain purely qualitative information, in which case
we may set wk ¼ k for k ¼ 1, . . . , K. The general notation, however, allows for the
case where Wi has quantitative significance. Note that Wi may itself be a function of
multiple underlying characteristics (e.g., it may enumerate age-by-location-by-industry
cells). The population frequency of the kth type of firm is Pr(Wi ¼ wk) ¼ pk with
P
K
k¼1 pk ¼ 1. To simplify what follows assume that pk > 0 for all k.
The second population is composed of ‘workers’. Associated with the jth worker is
the observed, discretely-valued, characteristic X j 2 fx1 ; . . . ; xL g ¼ X and unobserved
17
The population frequency of the lth
heterogeneity, n j (which may be vector-valued).
P
type of worker is Pr(X j ¼ xl) ¼ ql with Ll¼1 ql ¼ 1 and ql > 0 for all l.
The education example introduced above helps to fix ideas. Here the population of
‘firms’ correspond to schools in a given metropolitan area. Schools vary according to their
size, demographic composition, location, and type (e.g., magnet, charter, neighborhood,
etc.). This vector of school attributes is observed by the econometrician and coded as
17

To emphasize the presence of two distinct populations I use subscripts to index firms and superscripts to index
workers.

975

976

Bryan S. Graham

Wi 2 {w1, . . . , wK}. Schools are also heterogenous in ways unobserved by the econometrician (e.g., in terms of principal quality), these characteristics are contained in ei. The
population of ‘workers’ corresponds to teachers who vary in terms of their observed degree
type, years of experience, gender, etc. These attributes are coded as X j 2 {x1, . . . , xL}.
Teachers also vary in unobservable ways, captured by n j. For example some teachers
may prefer to work in certain neighborhoods or in charter schools.
It is convenient to maintain an inclusive definition of firm and worker type. That is
to assume that ei is independent of Wi and n j is independent of X j. When Wi and X j
are exogenous unit characteristics, which in the present context means they are unaffected by the assignment process, we can impose this restriction by normalization
(cf., Graham, Imbens and Ridder, 2009b).
Assumption 3.1 (INCLUSIVE DEFINITION OF TYPES)
ei ?Wi ;

n j? X j:

To see how Assumption 3.1 may be imposed by normalization let ei denote the
unnormalized firm attribute. Defining ei ¼ Fðei jWi Þ then yields ei independent of
Wi as required. We interpret ei as a firm’s ranking in the unobserved attribute amongst
firms of its same type.18 If there are two types of workers, those with college degrees
and those without, Assumption 3.1 means that we absorb any differences in the distribution of unobserved ability across these two groups into our ‘definitions’ of types.
From the standpoint of a firm, part of the benefit of hiring a random draw from the
distribution of college-educated workers is her higher expected ‘innate’ ability. The
econometrician adopts a similar perspective, the justification of which hinges on the
class of policies under consideration. In contrast to other policies typically studied in
empirical microeconomics, reallocations do not involve changes in the characteristics
of agents and, consequently, we are not interested in their causal effects.
The assignment process matches workers with firms. Restrictions on this process
drive the identification results reported below. Such restrictions may be directly
imposed by the researcher, as in experiments. Alternatively, a particular decentralized
assignment mechanism may be posited which induces status quo assignments with
properties that facilitate identification. Regardless of whether the observed assignment
was imposed by a centralized authority, or represents the equilibrium of a decentralized
process, its properties will feature in any identification analysis. Therefore, before turning to the actual mechanics of assignment in Section 4, I discuss the mathematical
structure of feasible matchings abstractly.
For simplicity, consider the case where the two populations are equally-sized and all
units match. Define the assignment function m(i) ¼ j if the jth worker matches with the
ith firm. Let Xm(i) ¼ Xi and nm(i) ¼ ni denote the observed and unobserved
18

Graham, Imbens and Ridder (2009b) show how to extend this argument to the case where ei is vector-valued.

Econometric Methods for the Analysis

characteristics of the ith firm’s worker; hence Xi equals the type of worker assigned to
firm i (i.e., i indexes both firms and matches). For clarity assume that the unobserved
firm and worker characteristics are discretely-valued such that
ei 2 E ¼ fe1 ; . . . ; eF g;

n j 2 V ¼ fv1 ; . . . ; vG g;

with fe(ef ) and fv(vg) respectively denoting the marginal frequency of the events ei ¼ ef
and n j ¼ vg. Let fe ¼ ( fe(e1), . . . , fe(eF))0 and fv ¼ ( fv(v1), . . . , fv(vG))0 be the F  1 and
G  1 vectors describing the marginal distributions of ei and n j.
The discrete support assumption for the unobservables is not required for the results
that follow; it makes their development more transparent. In particular, in highlights
the important idea that, in large populations, allocations can be conceptualized as constrained joint distributions.
Under the maintained large matching market assumption, a feasible assignment is
equivalent to any joint probability mass function
PrðWi ¼ w; Xi ¼ x; ei ¼ e; ni ¼ vÞ ¼ hðw; x; e; vÞ;

ð1Þ

which satisfies the KF þ LG feasibility constraints
G X
L
X

hðwk ; xl ; ef ; vg Þ ¼ pk fe ðef Þ;

g¼1 l¼1
F X
K
X

k ¼ 1; . . . ; K;

f ¼ 1; . . . ; F
ð2Þ

hðwk ; xl ; ef ; vg Þ ¼ ql fv ðvg Þ;

l ¼ 1; . . . ; L;

j ¼ 1; . . . ; G;

f ¼1 k¼1

and the adding-up condition
F X
G X
K X
L
X
hðwk ; xl ; ef ; vg Þ ¼ 1:

ð3Þ

f ¼1 g¼1 k¼1 l¼1

Note that the product structure on the right-hand side of the equalities in (2) follows
from Assumption 3.1. After eliminating
using the
P the
P two redundant
PL
P constraints
marginal adding-up restrictions  Ff¼1 Kk¼1 pk fe ðef Þ ¼ G
q
f
ðv
l
v
gÞ ¼ 1 –
g¼1
l¼1
feasibility places a total of KF þ LG  1 constraints on the allocation probability mass
function (1). Consequently, any feasible allocation may be defined in terms of a total of
(KF  1)  (LG  1) probability masses. Let H be the KF  LG matrix of probabilities such that h(wk, xl, ef , vg) is contained in the (F(k  1) þ f, G(l  1) þ g)th entry.
An assignment is completely characterized by the form of H.19
Imposing additional structure on the assignment generates more parsimonious parameterizations for H. Such parsimony can facilitate identification. Here I want to
19

In the large population context, where many agents may be identical in both observed and unobserved attributes, it is
possible for distinct allocations to have identical values for Ha. For example, two identical pairs can switch partners
without changing Ha. This lack of uniqueness has no substantive implications for empirical research.

977

978

Bryan S. Graham

Table 1 A re-parameterized feasible joint density for observed match characteristics
W\X

...

x1

w1

r11

..
.

..
.

wK1

xL1

...
..

r1

fW (w)

xL

p1 

L1

l¼1

..
.

.

rK11

rK1

L 1
X
r1l

pK1 

L1

p1

..
.

L 1
X
rK1l

pK

 1

l¼1

wK

q1 

K
1
X

rk1

...

qL1 

k¼1

fX(x)

K
1
X

rkL1

k¼1

q1

...

qL

1

K 1
X

pk 

L 1
K
1X
L 1
X
X
ql þ
rkl

k¼1
 1

l¼1

pK

k¼1 l¼1

qL

emphasize two classes of feasible assignments. The first is the class of assignments
satisfying an ‘as if’ double randomization condition (cf., Graham, 2008). I also consider
a natural extension of double randomization, which involves additional conditioning.
A second class of assignments, which imposes fewer restrictions on H, satisfies a no
matching on unobservables condition.
3.1.1 Double randomization
Under double randomization we have, letting Pr(Wi ¼ w, Xi ¼ x) ¼ rWX(w, x),
hðw; x; e; vÞ ¼ rWX ðw; xÞ fe ðeÞ fv ðvÞ:

ð4Þ

Allocations of the form (4) may be implemented as follows. First, choose rWX(w, x),
a feasible joint allocation density for (Wi, Xi). Second, form type-k-firm-to-type-lworker matches (henceforth k-to-l matches) by drawing a worker at random from
the subpopulation of workers with X j ¼ xl and assigning her to a firm drawn at random
from the subpopulation of firms with Wi ¼ wk. Under double randomization the joint
distribution of unobserved agent attributes is the same across all types of matches, as
defined in terms of observed attributes.
After eliminating redundant terms using the marginal constraints
L
X
rWX ðwk ; xl Þ ¼ pk ; k ¼ 1; . . . ; K
l¼1
K
X

rWX ðwk ; xl Þ ¼ ql ; l ¼ 1; . . . ; L;

k¼1

and the adding-up condition, the allocation density for the observed match characteristics
can be represented in terms of (K  1) (L  1) parameters. Let RWX be the KL matrix with

Econometric Methods for the Analysis

rWX(wk, xl) ¼ rkl as its (k, l )th entry. Assume that the marginal constraints are used to reparameterize the Kth row and Lth column in terms of the other (K  1) (L  1) joint probability masses and the K þ L marginal probability masses. This is illustrated in Table 1.
Using the above notation we can express an allocation which satisfies double randomization as a KF  LG matrix of the form
H ¼ RWX  fe fv 0

ð5Þ

0
RWX iL ¼ p; RWX
iK ¼ q; i0K RWX iL ¼ 1;

ð6Þ

subject to the restrictions that

and a non-negativity constraint on each element of RWX (iL denotes a L column vector
of ones).
Note that double randomization does not restrict the degree of assortativeness in
observed attributes embodied in RWX: it may differ arbitrarily from the random allocation pq0 (subject to the requirement that it is feasible). For example perfect positive
assortative matching of Wi on X j is not inconsistent with double randomization. Double randomization only restricts the matching process within k-by-l cells.
To get a feel for the structure of doubly randomized assignments consider the
special case where F ¼ G ¼ K ¼ L ¼ 2. The marginal constraints on RWX impose
the K þ L  1 ¼ 3 restrictions
r12 ¼ p1  r11 ;

r21 ¼ q1  r11 ;

r22 ¼ 1  p1  q1 þ r11 ;

Under a double randomized assignment we therefore have,

 
f ðe Þ f ðv Þ
p1  r11
r11
Hðr11 Þ ¼
 e 1 v 1
fe ðe2 Þ fv ðv1 Þ
q1  r11 1  p1  q1 þ r11


fe ðe1 Þ fv ðv2 Þ
:
fe ðe2 Þ fv ðv2 Þ

ð7Þ

Note that r11p1q1 indexes the ‘assortativeness’ of the allocation or the frequency with
which type W ¼ w1 firms are matched with type X ¼ x1 workers relative to the random matching benchmark.20 Inspection of (7) illustrates that doubly randomized allocations allow for arbitrary amounts of sorting on observables, but no sorting or
matching on unobservables.
Double randomization allows us to express the KF  LG mass points in H in terms
of just the (K  1) (L  1) parameters which uniquely define RWX. This reduces the
specification of H by KL(FG  1)  K(F  1)  L(G  1) parameters relative to the
imposition of feasibility alone. Doubly randomized allocations represent a small subset
of the class of feasible allocations.
20

Feasibility also requires that r11 satisfy the inequality p1  min {p1, q1}  r11  min {p1, q1} (cf., Graham, Imbens and
Ridder, 2007).

979

980

Bryan S. Graham

Doubly randomized allocations are of interest from a policy perspective. Consider a
social planner who is able to centrally assign workers to firms. If the planner is unable
to observe ei and n j, or legally constrained from using such knowledge when making
assignments, the class of reallocations available to her is of the form given by (5).
3.1.2 Conditional double randomization
A useful generalization of double randomization is conditional double randomization.
The motivation for this extension is two-fold. First, such assignments may characterize
some types of non-experimental matching market data. Second, it illustrates how the
two-agent aspect of matching models complicates their analysis and generates new
and interesting econometric issues.
Let Ze and Zv be observable proxies or signals for, respectively, e and v. I modify
Assumption 3.1 so that firm type is independent of e within subpopulations homogenous
in the signal Ze. Likewise, worker type is conditionally independent of v given Zv.
Assumption 3.2 (CONDITIONAL INCLUSIVE DEFINITION OF TYPES)
ei ? Wi j Zei ;

v j ? X j j Z jv :

A conditionally doubly randomized allocation is a joint density for Wi, Xi, ei, vi, Zei
and Zni of the form
hðw; x; ze ; zv ; e; vÞ ¼ rWXZe Zv ðw; x; ze ; zv Þ fe j Ze ðe j ze Þ fv j Zv ðv j zv Þ:

ð8Þ

A member of this class of allocations may be formed as follows. First, the planner
chooses a feasible joint distribution for Wi, Xi, Zei and Zni. Second, within each
Wi ¼ w and Zei ¼ ze by Xi ¼ x and Zni ¼ zv cell, the required matches are formed
by drawing workers at random from the subpopulation of workers with X j ¼ x and
Zni ¼ zv and assigning them to firms drawn at random from the subpopulation of firms
with Wi ¼ w and Zei ¼ ze.
This class of assignments allows for dependence between ei and v j. This is because
dependence between
P PZei and Zni induces dependence between ei and vi since, for
rZe Zv ðze ; zv Þ ¼ Kk¼1 Ll¼1 rWXZe Zv ðwk ; xl ; ze ; zv Þ,
fe;v ðe; vÞ ¼

D X
E
X

fe j Ze ðe j zed Þfv j Zv ðv j zve Þ rZe Zv ðzed ; zve Þ ;

d¼1 e¼1

which does not equal fe(e) fv(v) unless rZe Zvðze ; zv Þ coincides with the product of its two
marginals. In contrast with pure double randomization, higher quality firms may match
with higher quality workers.
The educational example introduced above suggests why conditional double randomization may be useful in practice. Recall that Wi and X j denote observed characteristics of the school and teacher. Let ei and v j denote unobserved characteristics of the
school and teacher, say average student ability and teacher quality, that are important

Econometric Methods for the Analysis

determinants of student achievement (the outcome of interest to the econometrician).
Let Zei and Zvj be proxies for these characteristics, such as the average student’s intake
test score and a teacher’s licensure test score. Under a conditionally doubly randomized
assignment of teachers to schools the joint distribution of Wi, Xi, Zei and Zni is
restricted only by feasibility. However, within the subpopulation of matches homogenous in these observables, student ability is independent of teacher quality. Such an
assumption can be plausible when Zei and Zvj closely approximate agents’ information
sets for ei and v j; but is more difficult, though not impossible, to justify otherwise.21
3.1.3 No matching on unobservables
An alternative approach to relaxing the requirement of double randomization is to
consider allocations that satisfy a ‘no matching on unobservables’ restriction. Unlike
conditional double randomization, this extension does not require the introduction
of proxy variables.
Let
se j X ðe j xÞ ¼ Prðei ¼ e j Xi ¼ xÞ;

sv j w ðv j wÞ ¼ Prðvi ¼ v j Wi ¼ wÞ;

denote the conditional densities of the unobserved firm and worker characteristics, say
productivity and ability, given, respectively, observed worker and firm type. Allocations with the no matching on unobservables property have joint densities of the form
hðw; x; e; vÞ ¼ rWX ðw; xÞ se j X ðe j xÞ sv j W ðv j wÞ;
subject to the F þ G þ K þ L marginal constraints
PL
PK
l¼1 se j X ðef j xl Þql ¼ fe ðef Þ;
k¼1 sv j W ðvg j wk Þpk ¼ fv ðvg Þ
PL
PK
l¼1 rWX ðwk ; xl Þ ¼ pk ;
k¼1 rWX ðwk ; xl Þ ¼ ql

ð9Þ

ð10Þ

and the K þ L þ 1 adding up conditions
F
X
se j X ðef j xl Þ ¼ 1;

l ¼ 1; . . . ; L

f ¼1
G
X
sv j W ðvg j wk Þ ¼ 1;

k ¼ 1; . . . ; K

ð11Þ

g¼1
F X
G X
K X
L
X

rWX ðwk ; xl Þse j X ðef j xl Þsv j W ðvg j wk Þ ¼ 1:

f ¼1 g¼1 k¼1 l¼1

21

Rigorously justifying this claim is not attempted here. Heckman and Vytlacil (2007a, b) provide an extensive
discussion of the role of informational assumptions in the econometric analysis of single agent models. Many of their
insights should apply here as well.

981

982

Bryan S. Graham

Restrictions (10) and (11) can be compared with their double randomization counterparts (2) and (3).
Inspection of (9) indicates that assignments which satisfy the no matching on unobservables condition are special. Like doubly randomized assignments, they impose conditional independence of ei and vi given (Wi, Xi). However, unlike doubly randomized
assignments, they do allow for a limited type of ‘input endogeneity’. Consider the
conditional distribution of ei given Xi (the analysis of the conditional distribution of vi is
entirely parallel). The distribution of ei is allowed to arbitrarily vary with Xi. If we equate
ei with firm productivity, then this allows productive firms to be more frequently matched
with certain types of workers (defined in terms of their values of X j). This is entirely analogous to a conventional production function problem where a firm’s observed input choice
may co-vary with its unobserved productivity (e.g., Griliches and Mairesse, 1998). This
type of endogenous input choice is ruled out under doubly randomized assignments.
Note, however, that (9) requires that ei’s conditional distribution be constant in Wi
conditional on Xi. This implies that the relationship between a firm’s (unobserved) productivity and its (observed) input level, is independent of its (observed) type. If the
observed and unobserved firm characteristics, respectively Wi and ei, enter the production function non-separably, then it will generally be the case that firms with specific
configurations of Wi and ei, as opposed to just ei alone, will differentially demand certain types of workers. Phrased in this way it is clear that the no matching on unobservables restriction is quite strong. Nevertheless it is weaker the requiring an allocation to
satisfy the double randomization condition.
Consider once again the education example. Under a no matching on unobservables allocation we do allow schools with unobserved high quality principals to differentially hire teachers with certain types of observed qualifications. We do not allow them
to differentially hire teachers with certain types of unobserved qualifications. Likewise
we allow teachers with certain unobserved attributes to differentially work at schools
with certain types of observed characteristics, but do not allow them to differentially
work at schools with certain types of unobserved characteristics. Assume that both
principal and teacher years of experience are observed but ‘qualities’ are not. No
matching on unobservables implies that schools with high quality principals may hire
more experienced teachers. Likewise high quality teachers may work at schools with
more experienced principals. This, in turn, implies that the conditional distributions
of principal and teacher quality will vary across subpopulations of matches defined in
terms of observed principal and teacher experience. However, within such subpopulations, there is no matching on unobserved quality.
Let sel ¼ (sejX (e1jxl), . . . , sejX (eFjxl))0 and svk ¼ (svjW (v1jwk), . . . , svjW (vGjwk))0 . This
gives Se ¼ (se1, . . . , seL) and Sv ¼ (sv1, . . . , svK) equal to, respectively, the F  L and
G  K matrices of probability masses which define the conditional distributions of ei
given Xi and vi given Wi. Using this notation the (k, l )th block of H, for an allocation

Econometric Methods for the Analysis

satisfying the no matching on unobservables assumption, takes the form rkl sel s0vk (which
is of dimension F  G). Therefore
0

H ¼ ðRWX iF i0G Þ  Se  Sv ;

ð12Þ

0
where the notation Se  Sv denotes the Hadamard, or entrywise product, of the
matrices

Se ¼ iK ðSe i0G Þ;

Sv ¼ iL ðSv i0F Þ:

Restrictions (10) and (11) may be expressed in matrix form as
Seq ¼ fe ;

Svp ¼ fv ;

Se0 iF ¼ iL ;

0
RWX
iK ¼ q;

RWX iL ¼ p;

Sv0 iG ¼ iK ;

i0K RWX iL ¼ 1:

ð13Þ

These conditions imply that Se admits a (F  1)  (L  1) parameterization and Sv
a (G  1)  (K  1) parameterization. This, along with a (K  1)  (L  1) parameterization of RWX means that no matching on unobservables imposes
ðKF  1Þ  ðLG  1Þ  ðF  1Þ  ðL  1Þ  ðG  1Þ  ðK  1Þ  ðK  1Þ  ðL  1Þ;

additional conditions on H beyond those required for feasibility. Relative to the double
randomization condition, the no matching on unobservables condition adds a total of
(F  1)  (L  1) þ (G  1)  (K  1) degrees of freedom to H.
Consider once again the special case where F ¼ G ¼ K ¼ L ¼ 2. Implementing a
no matching on unobservables allocation requires choosing feasible values for Se, Sv
and RWX. The latter choice was described above. The choice of Se involves selecting
a 2  2 matrix with columns summing to one and rows summing to fe. This imposes
3 non-redundant constraints on Se (since fe(e1) þ fe(e2) ¼ 1). Let se11 ¼ sejX (e1jx1), the
conditional frequency of type ei ¼ e1 firms among those matched to type Xi ¼ x1
workers, and sv11 ¼ svjW (v1jw1), the conditional frequency of type v j ¼ v1 workers
among those matched to type W j ¼ w1 firms. We have
0
B
B
Se ðse11 Þ ¼ B
@

se11
1  se11

fe ðe1 Þ  se11 q1
1  q1

1

0
sv11

fv ðv1 Þ  sv11 p1
1  p1

1

B
C
C
B
C
C
; Sv ðsv11 Þ ¼ B
:
C
fe ðe1 Þ  se11 q1 A
fv ðv1 Þ  sv11 p1 C
@
A
1
1  sv11 1 
1  q1
1  p1

To gauge the effects of se11 and sv11 on the properties of the assignment note that the
average difference in productivity between firms who match with type 2 (‘high’) versus
type 1 (‘low’) workers is


fe ðe1 Þ  se11
E½ei j Xi ¼ x2   E½ei j Xi ¼ x1  ¼ 
ðe2  e1 Þ ⋛ 0 as se11 ⋛ f e ðe1 Þ:
1  q1

983

984

Bryan S. Graham

If se 11 > fe(e1), then ‘low’ productivity firms (i.e., ei ¼ e1) more frequently choose
‘low’ type workers (i.e., Xi ¼ x1). In such an allocation observed worker type predicts
unobserved firm productivity. Knowing a firm’s type, however, does not help to predict
its productivity.
Similarly the average difference in ability between workers who match with type
2 (‘high’) versus type 1 (‘low’) firms is


fv ðv1 Þ  sv11
E½vi j Wi ¼ w2   E½vi j Wi ¼ w1  ¼ 
ðv2  v1 Þ ⋛ 0 as sv11 ⋛ f v ðv1 Þ;
1  p1
so that if sv11 > fv(v1), then ‘low’ ability workers (i.e., v j ¼ v1) more frequently choose
‘low’ type firms (i.e., W j ¼ w1). In such an allocation firm type predicts unobserved
worker ability. Knowing a worker’s type, however, does not help to predict its ability.
If se11 ¼ fe(e1) and sv11 ¼ fv(v1) we recover the doubly randomized assignment.
Finally, as with double randomization, the no matching on unobservables requirement
does not restrict the degree of assortativeness on observed firm and worker attributes.

3.2 Average reallocation effects (AREs)
A major motivation for the empirical analysis of matching markets is to predict the distribution of outcomes that would prevail under alternative feasible assignments of workers
to firms. Here, following Graham, Imbens and Ridder (2007, 2009a), I consider identifying the change in average outcomes induced by a different allocations (i.e., average reallocation effects (AREs)). In some settings implementing a particular assignment, while in
principle feasible, might be difficult in practice. For example, the private incentives for
re-matching may be strong under certain assignments, suggesting that they would
‘unravel’ if actually implemented. I ignore these issues in what immediately follows.
There are at least two motivations for doing so. First, an exploration of the outcome
effects of alternative assignments is a prelude to more complete policy formulation. If
the social benefits from a particular assignment are deemed large relative to the status
quo, then further thought can be given to developing a decentralized mechanism which
produces the desired assignment. In contrast, the mechanism design question is less
interesting if the distribution of outcomes is largely invariant across different assignments. Second, in some institutional settings agents’ exercise little control over whom
they match with. In these settings the estimands introduced below are directly relevant.
3.2.1 Definition of target estimands
In order to identify AREs, knowledge of the match output function, or certain features
of it, is required. A general form for the match output associated with the pairing of
firm i with worker j is
Yði;jÞ ¼ kðWi ; X j ; ei ; n j Þ:

ð14Þ

Econometric Methods for the Analysis

Equation (14) is a fully nonparametric specification of match output, being non-separable in the unobserved attributes of the matched firm and worker. Importantly, it
allows for arbitrary complementarity or substitutability between observed and unobserved firm and worker attributes. No dimensionality or monotonicity assumptions
on ei or n j are imposed.
Since ei and n j enter nonseparably, the identification of (14) may be too ambitious a
goal. Instead, we might consider conditions under which we can identify the average
match output function (AMF):
ÐÐ
dðw; xÞ ¼ kðw; x; e; vÞ fe ðeÞ fv ðvÞ dedv
ð15Þ
¼ Eei ½Evj ½kðw; x; ei ; v j Þ:
The second line of (15) establishes notation for an expectation taken with respect to the
product of two marginals.
The AMF corresponds to the expected match output associated with a pairing of a
type W ¼ w firm with a type X ¼ x worker when both the firm and worker are independent
and random draws from their respective subpopulations.
The AMF is an average with respect to the product of two unobserved heterogeneity distributions, one for each side of the matching market. The analog to (15) in a single agent model would be the average structural function (ASF) of Blundell and Powell
(2003). A direct application of the ASF definition to (14) would involve replacing fe(e)
fv(v) in (15) with fe,v(e,v). Such a definition would not correspond to a structural object
as fe,v(e,v) is not invariant across feasible assignments; it is a by-product of such
assignments.
Now consider the effect of a reassignment of workers-to-firms on the distribution
of match output. As a benchmark consider the case where the planner is unable to
use information on ei and v j when making her assignments; that is she is constrained
to choose an allocation from among the set of doubly randomized allocations. Let
ðð
a
a
ðw; xÞ dwdx
gðRWX Þ ¼ dðw; xÞ rWX
denote average match output under the alternative doubly randomized allocation
a
; for Wi and X j discretely-valued,
RWX
a
Þ¼
gðRWX

K 1X
L 1
X

rkla  fdðwK ; xL Þ  dðwK ; xl Þ  ½dðwk ; xL Þ  dðwk ; xl Þg

k¼1 l¼1

þ

L1
X

ql fdðwK ; xl Þ  dðwK ; xL Þg þ

l¼1

þ dðwK ; xL Þ

K1
X
k¼1

pK fdðwk ; xL Þ  dðwK ; xL Þg

985

986

Bryan S. Graham

The equality follows from using the K þ L  1 non-redundant marginal constraints to
a
sq
re-parameterize RWX
(see Table 1). Let RWX
denote the K  L matrix of mass probabilities which define the joint distribution of Wi and Xi under the status quo. The
a
sq
effect of choosing allocation RWX
on average match output relative to RWX
, the average reallocation effect (ARE) of Graham, Imbens, and Ridder (2007, 2009a), is then
sq

a
a
Þ ¼ gðRWX
Þ  gðRWX Þ ¼
bðRWX

K1X
L1 
X

sq 

rkla  rkl

 fKLkl ;

ð16Þ

k¼1 l¼1

where
fKLkl ¼ dðwK ; xL Þ  dðwK ; xl Þ  ½dðwk ; xL Þ  dðwk ; xl Þ;

ð17Þ

is a measure of average local complementarity (ALC) between W and X. To see this
observe that (17) measures the expected difference between the incremental return
associated with hiring a type L versus l worker across type K versus k firms. Consider
two randomly sampled firms and workers; if (17) is positive the sum of expected output
across an assortative (K,L) and (k,l) assignment will exceed that across an anti-assortative (K,l) and (k,L) assignment.
It is important to understand that fKLkl is a local measure of complementarity.
Consider K > m > k and L > n > l we may have fKLkl > 0 and fmnkl < 0; there
is no presumption that d(w,x) exhibits increasing differences or is supermodular (e.g.,
Topkis, 1998). This a priori flexibility vis-a-vis d(w,x) is important for making the
study of reallocations empirically interesting.
The representation of the average reallocation effect in terms of (K  1) (L  1)
ALC parameters facilitates its identification since, as we shall see below, (17) may be
identified even if d(w,x) is not.
Some focal assignments Among the class of feasible allocations positive and negative
assortative matchings have attracted substantial attention (e.g., Becker, 1973; Legros
and Newman, 2002). These allocations maximize output when d(w,x) is, respectively,
super-modular and submodular. The definition of these allocations requires that K ¼ L
with wkþ1 > wk and xkþ1 > xk for all k ¼ 1, . . . , K  1. In a positive assortative matching
(pam) the rank order of Wi and Xi, to the extent that feasibility allows, coincide. The
highest type firms are assigned to the highest type workers. In a negative assortative matching (nam) the opposite pattern occurs: the highest type firms are assigned to the lowest
type workers. Mathematically these two allocations concentrate the maximal feasible
amount of probability mass on, respectively, the primary and secondary diagonals of
a
RWX
.
Recall that when K ¼ L ¼ 2, the set of feasible allocations is indexed by r11. In this
pam
case the positive assortative matching chooses r11 ¼ minðp1 ; q1 Þ. This choice induces
the maximal amount of feasible assortativeness yielding an ARE of

Econometric Methods for the Analysis
sq

sq

bpam ¼ minfp1  r11 ; q1  r11 g f2211 :
nam
The negative assortative matching chooses r11
¼ max f0; p1 þ q1  1g, which induces
the maximal feasible amount of mixing. This yields an ARE of
sq

sq

bnam ¼ max fr11 ; 1  p1  q1 þ r11 gf2211 :
When K ¼ L ¼ 3 the set of feasible allocations is indexed by r11, r12, r21 and r22. The
positive assortative matching chooses the values
pam

r11 ¼ minðp1 ; q1 Þ
pam

pam

pam

pam

r12 ¼ maxð0; minfq2 ; p1  r11 gÞ
r21 ¼ maxð0; minfp2 ; q1  r11 gÞ
pam

r22

pam

pam

¼ maxð p2  r21 ; q2  r12 Þ;

with the negative assortative matching constructed analogously. For the general K ¼ L case a
recursive algorithm can be used to construct the positive and negative assortative matchings.
An interesting feature of both the bpam and bnam estimands is their dependence on
marginal distributions of firm and worker type as well as on the production technology. This
dependence affects the sampling properties of their analog estimates (see Section 4.5). It also
highlights, yet again, the interplay between the resource constraint, here the firm and worker
type distributions, and the production technology in the analysis of matching problems.
A third focal allocation is the random matching, the ARE of which is given by
brm ¼ bðpq0 Þ ¼

K 1X
L 1
X
sq
fpk ql  rkl g  fKLkl :
k¼1 l¼1

This captures the outcome effects of switching to an assignment in which agents are
randomly paired to one another.
In many situations it may be of interest to assess the maximum gain in average outcomes available via reallocation or the maximum average reallocation effect (MRE). One
attractive feature of the assumption that Wi and X j are discretely-valued is that this is
a tractable estimand. The MRE, analyzed by Graham, Imbens and Ridder (2007)
and Bhattacharya (2009), is
b

mre

¼ max
a

RWX 2R

K1
L1
XX

sq

frkla  rkl g  fKLkl ;

ð18Þ

k¼1 l¼1

where R denotes the set of feasible allocations:
n
a
a
a0
a
R ¼ RWX
: RWX
iL ¼ p; RWX
iK ¼ q; i0K RWX
iL ¼ 1;

rkla  0

o
for all k; l :

987

988

Bryan S. Graham

This is a linear assignment program, a special case of the transportation problem (e.g.,
Luenberger, 2005, Chapter 5). While the maximizing allocation need not be unique,
the value function will be. An allocation can be thought of as a (K  1)  (L  1)
dimensional polyhedron, the extreme points of which correspond to extreme allocations. By the Fundamental Theorem of Linear Programming (Luenberger, 2005;
Chapter 2.4) an optimal allocation will be one of the extreme allocations. The maximum reallocation effect, bmre, can be used to assess the efficiency of the status quo
(Bhattacharya, 2009).
When K ¼ L ¼ 2 the two extreme allocations respectively correspond to the positive and negative assortative matchings. Since the optimal allocation must be one of
these two assignments we get the elegant solution (Graham, Imbens and Ridder, 2007)
mre
r11
¼ minðp1 ; q1 Þ 1 ðf2211  0Þ þ maxf0; p1 þ p2  1g 1 ðf2211 < 0Þ;

with
sq

mre
 r11 Þ  f2211 :
bmre ¼ ðr11

When K, L > 2 the form of bmre is more complicated, but is easily solved for numerically using linear programming methods. The solution in the K ¼ L ¼ 3 case is discussed in Graham, Imbens and Ridder (2007).
3.2.2 Identification under double randomization
First, consider unrestricted match output functions of the form given in (14). If the status quo allocation satisfies the doubly randomized restriction the AMF is identified by
E½Yi j Wi ¼ wk ; Xi ¼ xl  ¼ dðw; xÞ:
Identification of fKLkl and the average reallocation effect b(Ra) follows directly under
additional support conditions.
Proposition 3.1 (Identification Under Double Randomization) If
(i) Y(i,j) ¼ k(Wi, X j, ei, n j),
(ii) the status quo assignment is of the form given by (4), and
sq
(iii) rkla > 0 only if rkl > 0, then
E½Yi j Wi ¼ wk ; Xi ¼ xl  ¼ dðw; xÞ
sq

a
and bðRWX
Þ is identified. If rkl > 0 for all k ¼ 1, . . . , K and l ¼ 1, . . . , L, then bmre is also
identified.
Condition (iii) requires the status quo and alternative allocations share a common
support. Proposition 3.1 is implicit in Graham, Imbens and Ridder (2007).
Identification of d(w, x) under conditional double randomization is more involved.
Consider the proxy variable regression

Econometric Methods for the Analysis

gðw; x; ze ; zv Þ

¼ E½Yi j Wi ¼ w; Xi ¼ x; Ze ¼ ze ; Zv ¼ zv 
ðð
¼ kðw; x; e; vÞfe j Ze ðe j ze Þfv j Zv ðv j zv Þ dmðeÞdmðvÞ;

with the second equality following from the conditional double randomization
assumption. This suggests recovering d(w,x) by
dðw; xÞ ¼ EZe ½EZv ½gðw; x; Ze ; Zv Þ:

ð19Þ

Equation (19) is similar to the partial mean estimand introduced by Newey (1994)
and widely-used in recent work on the nonparametric identification of single agent models (e.g., Blundell and Powell, 2003; Imbens, 2007a). It is distinctive in that it involves
two marginal averages, as opposed to one. To understand the importance of sequentially
averaging over the two marginal distributions, note that the conventional partial mean
EZe ;Zv ½gðw; x; Ze ; Zv Þ;
does not equal the AMF. This is because any unobserved dependence between ei and
n j will be mirrored in the observed dependence between Ze and Zv. Therefore averaging over the joint distribution of the latter will not recover the AMF. The idea that
unobserved heterogeneity may be ‘averaged out’ in a two-agent model by averaging
over the product of two proxy variable marginal distributions, one for each agent,
appears to be new (cf., Graham, Imbens, Ridder, 2009b).
This idea is summarized by Proposition 3.2.
Proposition 3.2 (Identification Under Conditional Double Randomization) If
(i) Y(i, j) ¼ k(Wi, X j, ei, n j),
(ii) the status quo assignment is of the form given by (8),
(iii) the support of Wi, Xi given Ze ¼ ze, Zv ¼ zv, does not depend on (ze, zv),
(iv) the joint support of Ze and Zv coincides with the product of its two marginals’ supports,
sq
(iv) rkla > 0 only if rkl > 0, then,
dðw; xÞ ¼ EZe ½EZv ½gðw; x; Ze ; Zv Þ;
a
for gðw; x; ze ; zv Þ ¼ E½Yi j Wi ¼ w; Xi ¼ x; Ze ¼ ze ; Zv ¼ zv  and bðRWX
Þ is identified.
sq
mre
If rkl > 0 for all k ¼ 1, . . . , K and l ¼ 1, . . . , L, then b
is also identified.
Condition (iii) ensures that for any configuration of proxies all types of matches,
defined in terms of their (Xi, Wi) value, are observed. This is similar to the ‘overlap’
assumption in the program evaluation literature. Condition (iv) is specific to the
matching context. It requires that their not be too much dependence between Zei
and Zvi. Averaging over the the two marginal distributions in (19) eliminates any bias
due to observed matching on Zei and Zvi (which proxies for unobserved matching on
e and v). If there is two much dependence between Zei and Zvi in the status quo this
double averaging cannot be performed. Conditions (iii) and (iv) are strong conditions.

989

990

Bryan S. Graham
a
In situations where point identification fails, bðRWX
Þ and bmre may still be set identified. This possibility is not explored here.

3.2.3 Identification under no matching on unobservables
Propositions 3.1 and 3.2 leave the match output function unrestricted, but make strong
a priori assumptions about the form of the status quo assignment. If we restrict the
match output function positive identification results are possible without assuming
double randomization. Consider the following restricted match outcome function
kðWi ; X j ; ei ; n j Þ ¼ dðWi ; X j Þ þ lðei ; X j Þ þ rðWi ; n j Þ;

ð20Þ

E½lðei ; xÞ ¼ E½rðw; n j Þ ¼ 0:

ð21Þ

where

These normalizations imply that that d(w,x) is the AMF as defined in (15) above.
Restriction (20) will also feature in the analysis of equilibrium matching data when
agent characteristics alone are observed (Section 4 below).
Equation (20) is restrictive. Holding unobserved firm and worker complementarity
fixed we have, for w0 > w and x0 > x,
kðw0 ; x0 ; e; nÞ  kðw; x; e; nÞ  ½kðw; x0 ; e; nÞ  kðw; x; e; nÞ
¼ dðw 0 ; x0 Þ  dðw; xÞ  ½dðw; x0 Þ  dðw; xÞ:
The degree of complementarity between observed firm and worker attributes does not
vary with unobserved firm and worker attributes.
Similarly, holding observed match characteristics fixed, for e0 > e and n0 > n,
kðw; x; e0 ; n0 Þ  kðw; x; e0 ; nÞ  ½kðw; x; e; n0 Þ  kðw; x; e; nÞ ¼ 0;
which rules out complementarity in unobserved agent attributes.
The match surplus function does allow for complementarity between ei and X j as
well as Wi and v j. Specifically
kðw; x0 ; e0 ; nÞ  kðw; x; e0 ; nÞ  ½kðw; x0 ; e; nÞ  kðw; x; e; nÞ
¼ lðe0 ; x0 Þ  lðe0 ; xÞ  ½lðe; x0 Þ  lðe; xÞ;
and
kðw 0 ; x; e; n0 Þ  kðw 0 ; x; e; nÞ  ½kðw; x; e; n0 Þ  kðw; x; e; nÞ
¼ rðw0 ; n0 Þ  rðw 0 ; nÞ  ½rðw; n0 Þ  rðw; nÞ;
may be non-zero.
The form of the surplus function drives matching incentives. Restriction (20)
has strong implications for these incentives. While it does allow for complementarity
between observed attributes, generating incentives for matching on observables, it does
not allow for complementarity between unobserved attributes. This eliminates any

Econometric Methods for the Analysis

incentive to sort on unobservables within k-by-l assignment cells. It also restricts the
types of complementarity allowed between observed and unobserved inputs. While it
allows for complementarity between ei and X j, so that firms will seek out different
types of workers depending on their value for ei, this complementarity is constant in
firm type (Wi). This suggests that the intensity of any matching of ei on X j will not vary
with Wi. Complementarity between v j and Wi is similarly restricted.
Under (20) and the no matching on unobservables restriction we have
ðwÞ;
E½Yi j Wi ¼ w; Xi ¼ x ¼ dðw; xÞ þ lðxÞ þ r

ð22Þ

ðwÞ ¼ E½rðWi ; nmðiÞ Þ j Wi ¼ w22.
for 
lðxÞ ¼ E½lðei ; Xi Þ j Xi ¼ x and r
Unlike the case of double randomization, average output across matches with
Wi ¼ w and Xi ¼ x does not coincide with d(w,x). The two additional terms, lðxÞ
ðwÞ, are due to selection bias. Under the no matching on unobservables assumpand r
tion it is still possible that firms with different values of ei differentially match with
workers of type X j ¼ x. This matching of ei on X j is captured by lðxÞ. Likewise workers with different values of v j may differentially match with firms of type Wi ¼ w. This
ðwÞ.
matching of v j on Wi is captured by r
Although allocations which satisfy the no matching on unobservables restriction do
not allow for identification of the AMF, they do allow for identification of average
local complementarity. To see this note that (22) implies that
E½Yi j Wi ¼ w0 ; Xi ¼ x0   E½Yi j Wi ¼ w 0 ; Xi ¼ x
 ðE½Yi j Wi ¼ w; Xi ¼ x0   E½Yi j Wi ¼ w; Xi ¼ xÞ
¼ dðw 0 ; x0 Þ  dðw; xÞ  ½dðw; x0 Þ  dðw; xÞ:
The ‘difference-in-differences’ structure of the ALC estimand means that any selection
bias allowed for by the no matching on unobservables restriction is differenced away
(assuming the production function is given by (20) above).
Since b(Ra) only depends on d(w,x) through the ALC terms it is also identified
under additional support conditions.
Proposition 3.3 (Identification Under No Matching on Unobservables) If
(i) Y(i,j) ¼ d(Wi,X j) þ l(ei,X j) þ r(Wi,n j),
22

To see this note that
XF XG
kðw; x; ef ; vg ÞsejX ðef jxÞsvjW ðvg jwÞ
E½Yi jWi ¼ w; Xi ¼ x ¼
f ¼1
g¼1
XF
XG
¼ dðw; xÞ þ
lðef ; xÞsejX ðef jxÞ þ
rðw; vg ÞsvjW ðvg jwÞ
f ¼1
g¼1

h 
i
mðiÞ 
¼ dðw; xÞ þ E½lðei ; Xi ÞjXi ¼ x þ E r Wi ; n
Wi ¼ w
ðwÞ:
dðw; xÞ þ lðxÞ þ r

991

992

Bryan S. Graham

(ii) the status quo assignment is of the form given by (9), and
sq
(iii) rkla > 0 only if rkl > 0, then
fKLkl ¼ E½Yi j Wi ¼ wK ; Xi ¼ xL   E½Yi j Wi ¼ wK ; Xi ¼ xl 
 ðE½Yi j Wi ¼ wk ; Xi ¼ xL   E½Yi j Wi ¼ wk ; Xi ¼ xl Þ;
sq

a
and bðRWX
Þ is identified. If rkl > 0 for all k ¼ 1, . . . , K and l ¼ 1, . . . , L, then bmre is also
identified.
Proposition 3.3 is new. It is a consequence of (i) the ‘difference-in-differences’ or
‘increasing differences’ structure of the ALC estimand and (ii) the type of selection bias
allowed under the no matching on unobservables assumption. Consider the difference
in match output across matches with workers of type Xi ¼ x0 versus Xi ¼ x:

E½Yi j Wi ¼ w0 ; Xi ¼ x0   E½Yi j Wi ¼ w0 ; Xi ¼ x ¼ dðw0 ; x0 Þ  dðw0 ; xÞ þ lðx0 Þ  lðxÞ:
ð23Þ
The first term – d(w0 ,x0 )  d(w0 ,x) – is the systematic return that a type Wi ¼ w0
firm gets from hiring a type Xi ¼ x0 versus Xi ¼ x worker. The second term

lðx0 Þ  
lðxÞ captures the difference in average firm productivity across the two
types of matches. This may arise from selective input choice on the part of the firm.
The key point is that the combination of the restricted match output function (20)
and the no matching on unobservables assumption implies that this latter term is
constant in firm type. Consequently we also have
E½Yi jWi ¼ w;Xi ¼ x0   E½Yi jWi ¼ w;Xi ¼ x ¼ dðw;x0 Þ  dðw;xÞ þ lðx0 Þ  lðxÞ: ð24Þ
Subtracting (24) from (23) yields the ALC. Underlying Proposition 3.3 are strong
assumptions the appropriateness of which will vary from application to application.
The proposition does highlight the gains from directly searching for restrictions which
identify ALC (as opposed to first identifying the AMF and then computing ALC).
3.2.4 Further thoughts on the identification of AREs
The definition of the AMF as an average over the product of two unobserved heterogeneity distributions makes identification of reallocation effects particularly challenging.
This section has outlined two approaches. The first leaves the match surplus function
nonparametric but imposes strong restrictions on the status quo assignment. These
restrictions can be weakened somewhat by additional conditioning (Proposition 3.2).
The second approach involves imposing separability assumptions on the match output
function. As noted above these restrictions are strong, particularly in the context of
allocation problems where complementarity properties are paramount. However, such
assumptions allow for the formulation of positive identification results under weaker
restrictions on the status quo assignment.

Econometric Methods for the Analysis

An area that merits further thought is the value of partially identifying restrictions of
the type discussed in Manski (2003). For example sign, monotonicity or other restrictions on the ALC may be both well motivated and informative about reallocation
effects in some situations.

3.3 Continuously-valued match characteristics
Graham, Imbens, and Ridder (2009a) study identification and estimation of AREs
when match characteristics are continuously-valued. Continuity of agent characteristics
makes some features of assignment problems simpler. For example the definitions of
the positive and negative assortative matchings are less clumsy in this case. Other
aspects of the problem become more challenging. The class of feasible assignments
becomes very large, making identification of optimal allocations difficult. Formally
the planner’s problem is a nonconvex functional (i.e., infinite dimensional) optimization problem. Such problems, unlike linear programs, are quite hard to solve in general
(e.g., Luenberger, 1969).
As before match output is given by Y(i,j) ¼ k(Wi, X j, ei, n j). However, now both Wi
and X j are continuously-valued. The average match output function is
ðð
dðw; xÞ ¼ kðw; x; e; nÞ fe ðeÞ fn ðvÞdedv
with fe(e) and fn(v) the marginal density functions for, respectively, firm productivity
and worker ability.
To keep the exposition simple assume double randomization such that the status
quo assignment density is given by
sq

hsq ðw; x; e; vÞ ¼ rWX ðw; xÞ fe ðeÞ fn ðvÞ;
so that the AMF is identified by dðw; xÞ ¼ E½Yi j Wi ¼ w; Xi ¼ x.
Feasibility of an assignment density, rWX(w, x), requires that
ð
ð
rWX ðw; xÞ dw ¼ fX ðxÞ;
rWX ðw; xÞ dx ¼ fW ðwÞ;
w

ð25Þ

x

with fW(w) and fX(x) the marginal density functions for, respectively, the firm and
worker attributes (or types). The class of reallocations studied by Graham, Imbens
and Ridder (2009a) consists of all joint densities satisfying (25).
The first estimand they consider is expected outcome gain from perfect assortative
matching of Wi on X j:
1
ðFX ðXi ÞÞ; Xi Þ  Yi ;
bpam ¼ E½dðFW

ð26Þ

1
where FX(X ) denotes the CDF of X , and FW
ðqÞ is the q-th quantile of the distribu1
tion of Wi. Therefore FW ðFX ðXi ÞÞ computes the location of match i0 s worker on the
j

j

993

994

Bryan S. Graham

CDF of X j and reassigns her to a firm on the corresponding quantile of the distribution
of Wi. Those workers with the highest value of X j are reassigned to firms with the
highest value of Wi, and so on.
The average outcome gain from negative assortative matching follows similarly with
1
ð1  FX ðXi ÞÞ; Xi Þ  Yi :
bnam ¼ E½dðFW

ð27Þ

Note that (26) and (27) are related to the partial mean estimand introduced by Newey
(1994). While the average match function d(w,x) is a bivariate function, both (26) and
(27) are averages over a single random variable. This reflects the fact that under perfectly assortative matchings the conditional distributions of Wi given Xi is degenerate:
knowledge of Xi implies knowledge of Wi. This feature of the bpam and bnam estimands
affects the limiting distribution of their sample analogs (see Section 3.4).
Because the class of feasible allocations is so large, Graham, Imbens and Ridder
(2009a) do not attempt to identify optimal allocations. Instead they introduce a two
parameter family of feasible allocations called correlated matchings. Let H( , ; r) denote
the CDF of a standard bivariate normal random variable with correlation coefficient
r.23 Let Rsq(w, x), in a change of notation, denote the CDF of the joint distribution
of (Wi, Xi) under the status quo. Correlating matchings are given by
Rcm ðw; x; t; rÞ ¼ tRsq ðw; xÞ þ ð1  tÞHðF1 ðFW ðwÞÞ; F1 ðFX ðxÞÞ; rÞ;
for t between zero and one and r between 1 and 1.
The effect of implementing a correlated matching on average outcomes is thus
bcm ðr; tÞ ¼8
ð1  tÞ
9
<ð ð
=
fðF1 ðFW ðwÞÞ; F1 ðFX ðxÞÞ; rÞ
dðw; xÞ
ðwÞ
f
ðxÞ
dwdx

E½Y

f

:
W
X
i
: w x
;
fðF1 ðFW ðwÞÞÞfðF1 ðFX ðxÞÞÞ
ð28Þ

By varying r from 1 to 1 for t ¼ 0 correlated matchings trace a path from the positive, through the random (r ¼ 0), to the negative assortative matching. By setting t ¼ 1
they can reproduce the status quo assignment. Note that unless d(w,x) is supermodular,
bcm(r,t) need not vary monotonically with r. Furthermore there is no guarantee that
an average outcome maximizing allocation corresponds to a correlated matching.
Indeed, it would be surprising if it did.
One way to conceptualize correlated matchings is to view them as particular perturbations of the random allocation. To see this note that


bcm ðr; tÞ ¼ ð1  tÞ EWi ½EX j ½dðWi ; X j ÞðWi ; X j ; rÞ  E½Yi  ;
23

To avoid small denominator problems, they actually work with a truncated bivariate normal distribution function.

Econometric Methods for the Analysis

for
 ðWi ; X j ; rÞ ¼

fðF1 ðFW ðWi ÞÞ; F1 ðFX ðX j ÞÞ; rÞ
:
fðF1 ðFW ðWi ÞÞÞfðF1 ðFX ðX j ÞÞÞ

If r ¼ 0, the weight function (w, x; r) is identically equal to one for all w and x and
bcm ð0; tÞ ¼ ð1  tÞfEWi ½EX j ½dðWi ; X j Þ  E½Yi g. If r > 0, then (w, x; r) will be
larger for pairs of Wi and X j that correspond to similar quantiles of their respective
marginal distributions. Likewise if r < 0, then (w, x; r) will be larger for pairs of
Wi and X j that correspond to very different quantiles. In the limit as r ! 1 the weight
function (Wi, X j; r) is only non-zero when the quantiles of Wi and X j coincide, as in
the perfect positive assortative matching. When r ! 1 we recover the negative
assortative matching.
Identification of bpam, bnam and bcm(r, t) requires strong support conditions. A sufficient condition for identification is that the joint support of the status quo assignment
Rsq(w,x) coincides with the product of its marginals’ support. This condition allows
the econometrician to learn about d(w,x) at all conceptually possible combinations of
w and x. Given this knowledge the average outcome across any feasible assignment
can be computed by integration. Unfortunately in many datasets this support condition
will fail (or effectively fail) to hold. For example, if under the status quo there is strong
positive dependence between Wi and Xi, then it will be difficult to identify bnam. This
is because bnam is an average of d(w,x) over pairs of w and x where w is large (small) and
x is small (large). These are precisely the match types that are infrequently observed in a
status quo with ‘lots of’ positive dependence.
In addition to being difficult to identify, assignments that are distant from the status
quo may be less policy relevant. Policies which represent incremental modifications of
the status quo may be politically and/or logistically easier to implement than large reallocations.24 Motivated by these issues Graham, Imbens and Ridder (2009a) also study
local reallocation effects (LREs) (i.e., the effects of small reallocations ‘away’ from the status quo and ‘toward’ the perfect positive assortative matching).
They derive the LRE by matching on a family of transformations of Xi and Wi,
indexed by a scalar parameter l, where for some values of l the matching is on
Wi (corresponding to the status quo), and for other values of l the matching is on Xi or
Xi, corresponding to positive and negative assortative matching respectively. Assume
that the supports of Wi and Xi are given by the intervals [wl, wu] and [xl, xu]. Let d(w) be
the following smooth function that goes to zero at the boundary of the support of Wi:
dðwÞ ¼ 1w>wm ðwu  wÞ þ 1wwm ðw  wl Þ;
where wm is the midpoint of the support of W.
24

Of course some organizations, like the military, have a greater ability to implement radical organizational changes.

995

996

Bryan S. Graham

For l 2 [1, 1], define the random variable Uli as the following transformation of
(Xi, Wi):
pﬃﬃﬃﬃﬃﬃﬃﬃﬃﬃﬃﬃﬃ
Uli ¼ l Xi dðWi Þ1 j l j þ ð 1  l2 Þ Wi :
Now we consider reallocations based on positive assortative matching on Uli:
1
blr ðlÞ ¼ E½dðFW
ðFUl ðUli ÞÞ; Xi Þ:

ð29Þ

For l ¼ 0 and l ¼ 1 we have Uli ¼ Wi and Uli ¼ Xi respectively, and hence blr(0)
recovers the status quo average outcome E½Yi  and blr (1) ¼ bpam. The negative assortative matching is also nested in this framework since
PrðX j  xÞ ¼ PrðX j  xÞ ¼ 1  FX ðxÞ;
and hence for l ¼ 1 we have blr(1) ¼ bnam. Values of l close to zero induce reallocations of Wi that are ‘local’ to the status quo, with l > 0 and l < 0 generating shifts
toward positive and negative assortative matching respectively.
Graham, Imbens and Ridder (2009a) consider the direction of the effect on average
outcomes associated with a small step toward the positive assortative matching:
blc ¼

@blr
ð0Þ:
@l

Theorem 3.1 of their paper presents two representations of this derivative:


@
lc
b ¼ E dðW Þ C
dðW ; XÞ; X j W ;
@w

ð30Þ

ð31Þ

and
blc ¼ E oðW ; XÞ

@2
dðW ; XÞ ;
@w@x

ð32Þ

where the weight function o(w,x) is non-negative and has the form
oðw; xÞ ¼ dðwÞ

FX jW ðxj wÞ ð1  FX j W ðxjwÞÞ
fX jW ðxj wÞ

ðE½X j X > x;W ¼ w  E½X jX  x; W ¼ wÞ:

The first representation of blc motivates their approach to estimation. It implies that
@
dðW ; XÞ and X is positive.
b will be positive if the conditional covariance between @w
@
This will occur if the return to increases in firm type, @w dðW ; XÞ, tends to be larger
when X exceeds its conditional mean E½X j W . Intuitively this suggests that increasing
assortativeness should raise average outcomes. Representation (31) makes this intuition
precise.
lc

Econometric Methods for the Analysis

The second representation shows that blc is a weighted average measure of complementarity between firm and worker type. This provides a connection between the
presence of complementarity and reallocation effects.

3.4 Estimation of AREs when match output is observed
The estimation of matching models raises complex and interesting statistical issues.
Some of these issues are well-known from the literature on semiparametric estimation
(Powell, 1994), others are less familiar. Consider the structure of the ARE estimand. It
is a function of three primitives (i) the production technology, (ii) the marginal distribution of the two inputs (firm and worker type) and (iii) the chosen allocation. This
intertwined aspect of the target parameter can generate surprises. For example,
Graham, Imbens and Ridder (2007) show that the limiting distribution of bpam, when
firm and worker type are discretely-valued, changes discontinuously in the marginal
distributions on W and X. Discontinuities in limit distributions arise elsewhere in
econometrics, for example in the literature on unit roots, weak instruments, and
moment inequalities, but their presence in assignment problems is, at least a priori,
surprising. When W and X are continuously-valued Graham, Imbens and Ridder
(2009a) show that the rate of convergence is slower for their estimates of the two extremal allocations bpam and bnam, than for non-extremal correlated matchings bcm.
3.4.1 Estimation of the average match output function (AMF)
Consider a setting where the status quo assignment is ‘as if’ conditionally doubly randomized as described in Section 3.1. If all covariates are discretely-valued the estimated
proxy variable regression introduced in Proposition 3.2 is given by the cell mean
PN
Yi 1ðWi ¼ w; Xi ¼ x; Zei ¼ ze ; Zvi ¼ zv Þ
^gðw; x; ze ; zv Þ ¼ Pi¼1
:
N
i¼1 1ðWi ¼ w; Xi ¼ x; Xei ¼ ze ; Zvi ¼ zv Þ
When covariates are continuously-valued g(w, x, ze, zv) can be estimated by kernel
regression. Graham, Imbens and Ridder (2009a) use the Nearest Interior Point (NIP)
kernel estimator of Imbens and Ridder (2009). This estimator eliminates boundary bias
present in the standard Nadaraya-Watson estimate.
In either case the average match output function (AMF) is recovered by separately
averaging over the sample distributions of Zei and Zvj:
N X
N
1 X
^
dðw; xÞ ¼ 2
^gðw; x; Zei ; Zvj Þ:
N i¼1 j¼1

ð33Þ

Equation (33) is similar to the partial mean estimator of Newey (1994b). It differs
in that it averages over a product of two marginals instead of the joint distribution of

997

998

Bryan S. Graham

(Zei, Zvj). Its asymptotic properties are unknown, although they should be straightforward to derive.
For simplicity in what follows I will assume the status quo assignment is doubly randomized. Many of the results will also hold if instead it satisfies the no matching on
unobservables condition and the match production function is given by (20). When
this is the case should be obvious by the context. Under double randomization, with
discretely-valued covariates, we may estimate the AMF by
PN
Yi 1ðWi ¼ w; Xi ¼ xÞ
^
dðw; xÞ ¼ Pi¼1
;
ð34Þ
N
i¼1 1ðWi ¼ w; Xi ¼ xÞ
With continuously-valued covariates d(w,x) may be estimated by NIP kernel
regression.
3.4.2 AREs with discretely-valued covariates
Fixed ‘interior’ allocations Inference on AREs for fixed interior allocations when
match characteristics are discretely-valued is straightforward. To illustrate I consider
only the simple K ¼ L ¼ 2 case. Generalizing what follows to allow for K, L > 2 is
straightforward, albeit tedious.
Recall from Section 3.1 that when K ¼ L ¼ 2 we have the one parameter
representation


a
a
r11
p1  r11
a
a
;
RWX ðr11 Þ ¼
a
a
q1  r11
1  p1  q1 þ r11
a
for all r11a such that RWX
is a valid joint distribution or
a
p1  minfp1 ; q1 g  r11
 minfp1 ; q1 g:

ð35Þ

a
Interior allocations consist of all allocations where r11
is non-stochastic and the
inequalities in (35) are strict.
Letting b(Ra) ¼ ba the analog estimator is


^a ¼ r a  ^r sq  f;
^
b
11
11

with



^ ¼^
f
d22  ^
d21  ^d12  ^d11 ;

^a will reflect
and ^
dkl ¼ ^
dðwk ; xl Þ given by (34) above. Note that sampling error in b
both uncertainty in (i) the form of the match production technology (in this case f,
the complementarity measure) and (ii) the status quo assignment distribution (in this
sq
case r11
).

Econometric Methods for the Analysis

The delta method gives

 2

pﬃﬃﬃﬃﬃ
s11
s212
s221
s222
D
^
N ðf  f0 Þ ! N 0; sq þ
sq þ
sq þ
sq ;
r11 p1  r11 q1  r11 1  p1  q1 þ r11

where s2kl ¼ VðYi j Wi ¼ wk ; Xi ¼ xl Þ.
sq
The status quo assignment, which enters the definition of ba through r11
, is assumed
unknown. However it may be consistently estimated by
N
N
N
1X
1X
1X
sq
p^1 ¼
1ðWi ¼ w1 Þ; ^q1 ¼
1ðXi ¼ x1 Þ; ^r 11 ¼
1ðWi ¼ w1 ; Xi ¼ x1 Þ;
N i¼1
N i¼1
N i¼1

with a large sample distribution equal to
0
1
00 1 0
0
p1 ð1  p1 Þ
pﬃﬃﬃﬃﬃ p^1  p1
D
sq
@
A
@
A
@
@
^
q

q
!N
0 ; r11
N
 p1 q1
1
1
sq
sq
sq
^r 11  r11
0
r11 ð1  p1 Þ

11
sq
sq
r11  p1 q1 r11 ð1  p1 Þ
sq
q1 ð1  q1 Þ r11 ð1  q1 Þ AA:
sq
sq
sq
r11 ð1  q1 Þ r11 ð1  r11 Þ

Note that sampling error in the estimate of Rsq is asymptotically independent of that
^
in f.
^a is a continuous function of sample averages b
^a is consistent for ba. A secSince b
ond application of the delta method then gives an asymptotic sampling distribution of
pﬃﬃﬃﬃﬃ a
D
^  ba Þ !
Za
N ðb

ð36Þ

where Za is the normally distributed random variable
(
s211
s212
sq
2
a
Za N 0; ðr11
 r11 Þ
sq þ
sq þ :
r11 p1  r11


s221
s222
sq
2 sq
sq þ
sq g þ f0 r11 ð1  r11 Þ :
q1  r11 1  p1  q1 þ r11

^a has two components. The first reflects
The asymptotic sampling variance of b
^ the degree of average local complementarity between W and
sampling error in f,
sq
a
X, as well as the distance between the new allocation and the status quo, r11
 r11 .
The greater the distance between the counterfactual assignment of interest and
the status quo, the greater our uncertainty about the magnitude of the ARE. The
^a arises from our imperfect knowledge of the stasecond source of sampling error in b
sq
tus quo assignment distribution; sampling error in ^r 11 . Since all the components
entering its asymptotic variance are consistently estimable, conducting large sample
^a is straightforward.
inference on b

999

1000

Bryan S. Graham

Extreme allocations Estimation of, and inference on, extremal allocations raises new
and interesting issues. First consider the case of the positive assortative matching. When
pam
K ¼ L ¼ 2 the positive assortative matching chooses r11 ¼ min fp1 ; q1 g, so that
sq

sq

bpam ¼ min fðp1  r11 Þf; ðq1  r11 Þfg:

ð37Þ

The analog estimator is
sq ^
sq ^
^pam ¼ minfð^
b
p1  ^r 11 Þf;
ð^q1  ^r 11 Þfg:
sq

sq

Since the function min fðp1  r11 Þf; ðq1  r11 Þfg is continuous we have, by the conp
^pam !
tinuous mapping theorem, b
bpam . While the demonstration of consistency is
^pam is more
straightforward, characterizing the asymptotic sampling distribution of b
difficult. This is because the definition of bpam depends on unknown features of the
^pam has three possible
population distribution of firm and worker types. In particular b
limit distributions depending on whether (i) p1 > q1, (ii) p1 < q1, or (iii) p1 ¼ q1. Since
we do not know which case obtains a priori Graham, Imbens and Ridder (2007) suggest a conservative approach to inference. To describe this approach to inference we
first need to characterize the three limiting distributions.
Case 1 p1 > q1: When p1 > q1, so that type 1 firms are more numerous than type 1
workers, we have
pﬃﬃﬃﬃﬃ
pﬃﬃﬃﬃﬃ
N ðmin fp^1 ; ^q1 g  min fp1 ; q1 gÞ ¼ N ðmin fp^1 ; ^q1 g  q1 Þ
pﬃﬃﬃﬃﬃ

pﬃﬃﬃﬃﬃ
pﬃﬃﬃﬃﬃ
¼ min N ð^
p1  p1 Þ þ N ðp1  q1 Þ; N ð^q1  q1 Þ :

Since

pﬃﬃﬃﬃﬃ
N ðp1  q1 Þ > 0 this gives

pﬃﬃﬃﬃﬃ
pﬃﬃﬃﬃﬃ
p
j N ðmin fp^1 ; ^q1 g  min fp1 ; q1 gÞ  N ð^q1  q1 Þ j ! 0;
n
o
sq ^
sq ^
sq ^
ð^q1  ^r 11 Þf
in (79) with ð^q1  ^r 11 Þf.
which allows us to replace min ð^
p1  ^r 11 Þf;
Following a sequence of steps analogous to those described above for fixed interior
allocations we then get
 D
pﬃﬃﬃﬃﬃ pam
^
 bpam ! Zqr ;
ð38Þ
N b
with Zqr the normal random variable
(
2
s212
s221
sq 2 s11
Zqr N 0; ðq1  r11 Þ
sq þ
sq þ
sq
r11 p1  r11 q1  r11
)
!
s222
sq
sq
2
þ f ð1  q1  r11 Þðq1  r11 Þ :
þ
sq
1  p1  q1 þ r11

Econometric Methods for the Analysis
sq
Note that uncertainty in two features of the status quo, q1 and r11
, are reflected in the
sampling variance of Zqr. This is because q1 enters in the definition of bpam.
Case 2 p1 < q1: When p1 < q1, so that type 1 firms are less numerous than type 1
workers, we have, following an argument parallel to case 1 above,
pﬃﬃﬃﬃﬃ pam
D
^
 bpam Þ ! Zpr
ð39Þ
N ðb

with Zpr the normal random variable
(
2
s212
s221
sq 2 s11
Zpr N 0; ðp1  r11 Þ
sq þ
sq þ
sq
r11 p1  r11 q1  r11
)
!
s222
sq
sq
þ
þ f2 ð1  p1  r11 Þðp1  r11 Þ :
sq
1  p1  q1 þ r11
Case 3 p1 ¼ q1: The limit distribution for the third case, which corresponds to the
marginal distributions of W and X coinciding, is nonstandard. To see this note that
when p1 ¼ q1 we have
npﬃﬃﬃﬃﬃ
o
pﬃﬃﬃﬃﬃ
pﬃﬃﬃﬃﬃ
N ðmin fp^1 ; ^q1 g  min fp1 ; q1 gÞ ¼ min
N ð^
p1  p1 Þ; N ð^q1  q1 Þ
D

! min ðUp ; Uq Þ;
with (Up, Uq) the bivariate normal random variable:
  

 
sq
Up
0
p1 ð1  p1 Þ
r11  p21
:
N
;
sq
Uq
0
r11  p21
p1 ð1  p1 Þ
Recalling the definition of bpam we then get
pﬃﬃﬃﬃﬃ pam


D
^
 bpam Þ ! min Zpr ; Zqr ;
N ðb
with Zqr and Zpr the normal random variables defined by (38) and (39) above. Their
covariance is given by
(
)
s211
s212
s221
s222
sq
sq
ðp1  r11 Þðq1  r11 Þ sq þ
sq þ
sq þ
sq
r11 p1  r11 q1  r11 1  p1  q1 þ r11
sq

sq

f2 ðp1  r11 Þðq1  r11 Þ:
While the distribution of min{Zpr,Zqr} is difficult to characterize analytically, it
is straightforward to simulate from: (i) draw Zpr and Zqr jointly, (ii) calculate
their minimum, and (iii) repeat. If we knew that p1 ¼ q1 in the population, then we
could simulate critical values for testing hypotheses. Consider the null hypothesis

1001

1002

Bryan S. Graham
pam

pam

bpam ¼pbﬃﬃﬃﬃ
the alternative
bpam 6¼ b0 . The proposal is to construct the statistic

0 ﬃ versus
pam
pam
^
and reject if jTNj > C1a where C1a is the 1  a quantile of
TN ¼ N b
 b0
the simulated distribution of jmin{Zpr,Zqr}j. To obtain a 1  a confidence level we
invert the test.
In practice we do not know which state of the world obtains: p1 > q1, p1 < q1 or
p1 ¼ q1. Graham, Imbens and Ridder (2007) suggest calculating the critical value for
each case and choosing the largest of the three. That is reject if jTNj > C1a with
C1a such that
n
 pﬃﬃﬃﬃﬃ pam

o
pam
^
sup
lim Pr j N ðb
 b0 Þ j > C 1a  a :
p1 >q1 ;p1 <q1 ;p1 ¼q1

N !1

An interesting feature of the above analysis is that attributes of the distribution of the
‘regressors’ feature centrally in the inferential procedure. This is quite different from
textbook hypothesis testing. The difference arises from the nature of the estimand:
the distribution of agent characteristics features directly in the definition of bpam.
Inference on the negative assortative matching is essentially the same as in the positive case. The negative assortative matching sets
nam
r11
¼ max f0; p1 þ q1  1g;

yielding the estimand
sq

sq

bnam ¼ max fr11 f; ð1  p1  q1 þ r11 Þfg:
As before we must consider three cases: (i) p1 > 1  q1 (which also corresponds to
the p1 < q1 case above), (ii) p1 < 1  q1 (which corresponds to p1 > q1 case above) and
(iii) p1 ¼ 1  q1 (which need not coincide with the p1 ¼ q1 case discussed above).
^nam coincides with that
In the first case p1 > 1  q1 so the limiting distribution of b
sq ^
of ð1  p^1  ^q1 þ ^r 11 Þf giving
 D
pﬃﬃﬃﬃﬃ nam
^
 bnam ! Z1pqþr
ð40Þ
N b
for Z1pqþr the normal random variable
Z1pqþr

N 0; ð1  p1  q1 þ

sq
r11 Þ2

(
s211
s212
s221
sq þ
sq þ
sq
r11 p1  r11 q1  r11

!
s222
sq
sq
2
þ
sq g þ f ðp1 þ q1  r11 Þð1  p1  q1 þ r11 Þ :
1  p1  q1 þ r11
^nam coincides with
In the second case p1 < 1  q1 so the limiting distribution of b
sq ^
that of ^r 11 f giving

Econometric Methods for the Analysis

 D
pﬃﬃﬃﬃﬃ nam
^
 bnam ! Zr
N b

ð41Þ

for Zr the normal random variable
Zr

N 0;

sq 2
r11

!
(
)
s211
s212
s221
s222
sq
sq
þ f2 r11 1  r11 :
sq þ
sq þ
sq þ
sq
r11 p1  r11 q1  r11 1  p1  q1 þ r11

In the third case p1 ¼ 1  q1 so that the limit distribution coincides with
 D
pﬃﬃﬃﬃﬃ nam


^
N b
 bnam ! max Zr ; Z1pqþr ;
with Z1pqþr and Zr as defined in (41) and (40) with a covariance of
sq
r11 ð1

 p1  q1 þ

(
)
s211
s212
s221
s222
sq þ
sq þ
sq þ
sq
r11 p1  r11 q1  r11 1  p1  q1 þ r11

sq
r11 Þ

sq

sq

f2 r11 ð1  p1  q1 þ r11 Þ:
We can conduct inference on bnam in a manner analogous to the method described for
the positive assortative matching above.
Optimal allocations The average reallocation effect associated with an optimal
assignment is given by, continuing with the K ¼ L ¼ 2 case, bmre ¼ max{bpam, bnam}.
It is consistently estimated by
n pam nam o
^mre ¼ max b
^ ;b
^
b
:
Let Zpam denote a random variable whose distribution coincides with the limiting
pﬃﬃﬃﬃﬃ pam
^
distribution of N ðb
 bpam Þ. Recall from the discussion above that this limit
distribution may take any of three forms. If bpam > bnam in the population then we
pﬃﬃﬃﬃﬃ mre
D
^
have
N ðb
 bmre Þ ! Z pam . Let Znam denote the limiting distribution of
pﬃﬃﬃﬃﬃ nam
^
N ðb
 bnam Þ, which may also take three forms. If bpam < bnam, then we have
pﬃﬃﬃﬃﬃ mre
D
^
N ðb
 bmre Þ ! Z nam . Finally consider the degenerate case where bpam ¼ bnam
(this occurs if the ALC is identically equal to zero). In the degenerate case the limit
pﬃﬃﬃﬃﬃ mre
D
^
distribution is given by N ðb
 bmre Þ ! max fZ pam ; Z nam g.
As in the case of the two extremal allocations conservative tests and confidence
intervals may be constructed by computing critical values under all possible cases and

1003

1004

Bryan S. Graham

Table 2 Possible limit distributions for the maximum average reallocation effect when K ¼ L ¼ 2
Limiting distributions for
Zpam

Znam

Zqr
Zpr
min{Zpr, Zqr}

n.a.
n.a.
n.a.

Marginal Type Distribution

Panel A: Positive assortative matching optimal

pﬃﬃﬃﬃﬃ mre
D
^
 bmre ! Z pam with:
N b
p1 > q1
p1 < q1
p1 ¼ q1

Panel B: Negative assortative matching optimal

pﬃﬃﬃﬃﬃ mre
D
^
 bmre ! Z nam with:
N b
p1 < 1  q1
p1 > 1  q1
p1 ¼ 1  q1

n.a.
n.a.
n.a.

Zr
Z1pqþr
max{Zr, Z1pqþr}

Panel C: Degenerate case

pﬃﬃﬃﬃﬃ mre
D
^
N b
 bmre ! maxfZ pam ; Z nam g with:
p1
p1
p1
p1
p1
p1

>
<
¼
¼
>
<

q1
q1
q1
q1
q1
q1

&
&
&
&
&
&

p1
p1
p1
p1
p1
p1

<
>
<
>
¼
¼

1
1
1
1
1
1








q1
q1
q1
q1
q1
q1

Zqr
Zpr
min{Zpr, Zqr}
min{Zpr, Zqr}
Zqr
Zpr

Zr
Z1pqþr
Zr
Z1pqþr
max{Zr, Z1pqþr}
max{Zr, Z1pqþr}

picking the largest one. Now however there are now a total of 12 possible limit distributions to consider (see Table 2).25
The number of cases that must be considered will increase with K and/or L. Given
its conservative nature the approach to inference outlined above is likely to have low
power for modestly large K and/or L (this is consistent with the pattern found by
Bhattacharya (2009) in his empirical application).
An alternative method of inference would adopt a Bayesian perspective. The planner would formulate a prior distribution for the parameters characterizing the status
quo assignment as well as those of the production function. Inference would then be
based on the resulting posterior distribution. Chamberlain (2009) considers some
25

Bhattacharya (2009) also considers inference on bmre, however he assumes that the marginal type distributions are
known so he needs to only consider a total of three limit distributions when K ¼ L ¼ 2.

Econometric Methods for the Analysis

Bayesian aspects of unconstrained treatment choice. A number of his insights might be
applicable here. Graham, Imbens, and Ridder (2007) provide a preliminary treatment
of some decision theoretic issues.
3.4.3 AREs with continuously-valued covariates
Fixed ‘interior’ allocations The starting point for estimating the average outcome gain
associated with implementing a correlated matching is equation (28) above. Note that
bcm(r, t) is an integral over the product of the marginal pdfs of W and X, not the joint.
Graham, Imbens, and Ridder (2009a) estimate bcm(r, t) by replacing these integrals with
sums over the two empirical distribution functions to get the analog estimator
8
9
< 1 X
=
N X
N
N
1
1
X
^
^
^cm ðr; tÞ ¼ ð1  tÞ
^dðWi ; X j Þ f F ðF W ðWi ÞÞ; F ðF X ðX j ÞÞ; r  1
:
Y
b
i
:N 2 i¼1 j¼1
N i¼1 ;
f F1 ðF^W ðWi ÞÞ f F1 ðF^X ðX j ÞÞ

This estimator would be a standard second order V-statistic if d(w,x), FW(w) and FX(x)
^cm ðr; tÞ depends on nonparametric estimates of each of these
were known. Instead b
^cm ðr; tÞ’s sampling properties.
objects. Sampling error in these nuisance parameters affects b
^cm ðr; tÞ Graham, Imbens and
To characterize the large sample properties of b
Ridder (2009a) first formulate a general theorem for double averages of kernel estimates (Theorem A.3). Their results demonstrate that
pﬃﬃﬃﬃﬃ the average outcome effects of
correlated matchings are estimable at the regular N parametric rate. The influence
function for their estimator is complicated with functions of the production technology, the marginal distributions of firm and worker types, the status quo assignment,
and the precise correlated matching under consideration entering.
Extreme allocations Graham, Imbens and Ridder (2009a) also present estimation
results for the extremal positive and negative assortative matchings. Their estimates
are the sample analogs of (26) and (27) above, namely,
N 
N
 1X
X
1
^
^pam ¼ 1
d F^W ðF^X ðXi ÞÞ; Xi 
b
Yi ;
N i¼1
N i¼1

ð42Þ

N 
N
 1X
nam
1X
1
^
^
^
^
d F W ð1  F X ðXi ÞÞ; Xi 
¼
Yi :
b
N i¼1
N i¼1

ð43Þ

and

It is straightforward to demonstrate consistency of these estimates. The nonparametric
estimates ^
dðw; xÞ; F^W ðwÞ, and F^X ðxÞ are uniformly consistent under their assumptions.
Consistency then directly follows. The derivation of their sampling distributions is
^pam and b
^nam involve
more involved. In contrast with correlated matchings, both b

1005

1006

Bryan S. Graham

only a single average. This is because the conditional distribution of Wi given Xi
is degenerate under an extremal assignment. Since in the first stage ^dðw; xÞ is
estimated with two arguments, but in the second stage averaged over only one, its sam^pam and b
^nam . This property
pling error dominates the asymptotic variances of b
is shared by the partial mean estimator of Newey (1994b). Graham, Imbens and
Ridder (2009a) nevertheless propose accounting for asymptotically dominated
terms when conducting inference. Their Monte Carlo results suggest that this idea
has some merit.
Local reallocations The local reallocation effect is estimated by
XN @
^lc ¼ 1
^
b
^ i ÞÞ;
dðWi ; Xi Þ dðWi Þ ðXi  mðW
i¼1 @w
N

ð44Þ

where mðW
^ i Þ is the NIP kernel regression estimate of E½Xi j Wi . This estimator is similar to the class of weighted average derivative estimators surveyed by Powell (1994)
and Newey and McFadden (1994). To see this note that if Xi  mðW
^ i Þ is removed
from (44), then the estimator coincides with an weighted average derivative estimator
^lc ’s asymptotic
(with d(Wi) equalling the known weight function). The derivation of b
sampling distribution closely parallels that of weighted average derivatives. However
the covariance structure of the estimator, as well as the additional nonparametrically
estimated object, mðW
^ i Þ, renders its influence function more complicated (see Theorem 4.4 of Graham, Imbens and Ridder, 2009a).
Implementation issues A precise implementation of the methods described in
Graham, Imbens and Ridder (2009a) would prove challenging to the typical empirical
researcher. The absence of easily usable software implementing the NIP kernel estimator of Imbens and Ridder (2009) is one barrier. An additional issue is that an analog
approach to variance estimation would require non-parametric estimation of many
objects. Finally, as in much of the semiparametric literature, the issue of bandwidth
selection is left unaddressed.
Nevertheless the simple analog structure of the estimators suggests several natural
shortcuts that may be appropriate for empirical work (at least experimentally). First
@
d(Wi, Xi), @w
dðWi ; Xi Þ and m(Wi) may be estimated by local linear regression methods.
1
ðtÞ by the tth sample quantile.
One can estimate FX(Xi) by the empirical CDF and FW
^pam ; b
^nam and b
^lc involves
^cm ðr; tÞ, b
With these objects in hand the computation of b
only summation. For this last step it may be advisable to trim observations that are near
the boundary of the joint support of Wi and Xi. No nonlinear optimization is involved.
Each of these steps can be performed with commercial software. Finally, while Graham, Imbens and Ridder (2009a) provide no formal justification for it, the bootstrap
can be used to conduct inference.

Econometric Methods for the Analysis

4. IDENTIFICATION AND ESTIMATION OF ONE-TO-ONE
MATCHING MODELS WHEN MATCH OUTPUT IS UNOBSERVED:
EQUILIBRIUM APPROACHES
This section considers what features of the match output function are identified when
only match attributes are observed. What does the choice of one’s partner alone reveal
about preferences and/or match output? As noted above, this question shares important
similarities with those which motivated the development of single agent discrete choice
models (McFadden, 1974; 1981). The two-sided nature of the matching problem,
however, complicates the identification challenge. I emphasize choice in a decentralized market where agents are ‘rivals to match’ and transfers between agents adjust to
clear the market (e.g., Becker, 1973). Conveniently this allows the econometrician
to focus directly on match output, as opposed to the separate utility functions of the
two agents. This is the case considered by Choo and Siow (2006a,b), which are the
key references.
When match output is observed, as was assumed in the previous section, identifying AREs requires identifying (features of) the average match output function
(AMF). This is difficult because units may purposely select their match partners;
hence the observed ‘inputs’ in the production function will covary with the unobserved ones. When match output is unobserved, in contrast, the challenge is not to
‘correct for’ the effects of purposeful matching, but rather to draw inferences directly
from it. This requires an explicit behavioral model of partner choice or a ‘structural’
matching model.26
Section 4.1 outlines one such model. Under specific distributional assumptions the
model corresponds to the one introduced by Choo and Siow (2006a, b); this point is developed in Section 4.2. Matching is one-to-one. Each firm matches with one worker and vice
versa; hence firms are rivals (as are workers). Associated with each match is an unobserved
transfer from the firm to the worker. The level of this transfer, which may be negative, is an
equilibrium outcome. For concreteness, I will sometimes refer to this transfer as a wage.
The equilibrium concept is that of pairwise stability: in equilibrium no firm is willing to
pay the wage required to match with a different worker and no worker is willing to accept
the wage offered by a different firm (e.g., Roth and Sotomayor, 1990).
The matching market consists of a finite number of ‘firm’ and ‘worker’ types.
However there are a large number of firms and workers of each type. This large market
assumption is important. It effectively transforms the matching problem into an applied
general equilibrium one.
Section 4.3 considers the identifying content of micro-data pairwise comparisons
without distributional assumptions as first proposed by Fox (2009a,b). A key aspect
26

Structural model of partner choice may also be helpful in settings where match output is observed and, of course,
(features of) the matching mechanism are central to any approach to identification.

1007

1008

Bryan S. Graham

of his approach is the interpretation of assortativeness in the data, the tendency for, say,
high quality teachers to match with high quality schools, as evidence of complementarity. This is also implicit in Choo and Siow (2006a,b).27,28 Writing down explicit data
generating process under which this inference is valid is non-trivial.
As a prelude to nonparametric analysis, Section 4.3 begins by showing that the Choo
and Siow (2006a,b) model can be identified and estimated via micro-data pairwise comparisons. This point, while straightforward to show, appears to be new. I term the resulting
estimation procedure ‘pairwise logit’. Pairwise logit is intriguingly similar to the fixed effects
conditional logit estimator for binary choice panel data models (e.g., Chamberlain, 1980).
However there are important differences. For example, the pairwise logit estimate is the
minimum of a U-process, to which standard M-estimation theory does not directly apply.
The pairwise implications of the CS model are interesting for at least three reasons.
First, they highlight that the method interprets local assortativeness as evidence of local
complementarity. Second, they provide a way to estimate the model without aggregate
data. Third, they show that method relies on the same insight which underlies Fox’s
(2009a,b) semiparametric approach: pairwise stability implies that if we draw any two
pairs of matches at random, then switching match partners should not raise welfare.
In addition to its potential empirical applicability, the pairwise logit estimator suggests natural semiparametric extensions. Section 4.3 explores these extensions under
one set of primitive conditions. The main result is given in Theorem 4.1. The primary
contribution of Theorem 4.1 is to provide a primitive justification for a specific version
of the pairwise method first suggested by Fox (2009a,b). An explicit data generating
process, with unobserved heterogeneity on both sides of the market, is specified from
which the identifying population restriction is formally derived.
The assumption of transferable utility is not tenable in some settings. Some thoughts
on the non-transferable case, as well as a brief survey of existing results, are provided in
Section 4.4. Issues of estimation and inference are discussed in Section 4.5.

4.1 A two-sided model of multinomial choice
Consider an assignment where firm i matches with worker j. The firm’s profit from
such a match is assumed to be
PðWi ; X j ; ei Þ ¼ dðWi ; X j Þ þ lðei ; X j Þ  tðWi ; X j Þ;
27

28

ð45Þ

The complementarity measure discussed by Galichon and Salanié (2009) and Siow (2009), for example, is the
logarithm of the likelihood ratio measure of dependence (e.g., Lehmann, 1966).
This interpretation of dependence in the data has obvious pitfalls. A simple example illustrates the problem. Say
agents on both sides of the market are characterized by two binary attributes only the first of which is observed.
These two attributes are positively dependent so that if an agent has the first attribute, she is more likely to have the
second and vice versa. Now say there is complementarity in match output between the first pair of attributes and
substitutability between the second. If the substitutability in the unobserved agent attribute is strong enough we may
observe negative assortative matching on the observed attribute despite the underlying structural complementarity.

Econometric Methods for the Analysis

where d(Wi,X j) þ l(ei,X j) is the firm’s match output and E½lðei ; xÞ ¼ 0. This output
consists of two parts: (i) a deterministic or average component, d(Wi,X j), and (ii) a
firm-specific component, l(ei,X j). The transfer/wage paid by the firm to the worker
is given by t(Wi,X j). Note that the transfer function, t(Wi, X j), depends only on
observed firm and worker characteristics. That this is an equilibrium feature of the
model will become apparent below (cf., Galichon and Salanié, 2009).
The effect of ei is to generate heterogeneity, across observationally identical firms, in
the incremental return to matching with a type x0 instead of a type x worker:
Pðw; x0 ; eÞ  Pðw; x; eÞ ¼ dðw; x0 Þ  dðw; xÞ þ ½lðe; x0 Þ  lðe; xÞ:
Such heterogeneity ensures that the conditional distribution of observed worker type,
given observed firm type will be non-degenerate in equilibrium (cf., Galichon and
Salanié, 2009; Siow, 2009).
Equation (45) imposes a strong restriction: firm match profits are constant in
unobserved worker characteristics, n j. Put differently neither firm output, or the wage
paid, depends on the particular worker employed, only her type matters. From the perspective of firms, workers, conditional on their type, are homogenous inputs or
perfectly substitutable. This assumption will be reasonable in some settings and
strain credulity in others. Choo and Siow (2006a,b) and, especially, Chiappori,
Salanié, and Weiss (2010) and Galichon and Salanié (2009) discuss this assumption
further.
Let tk ¼ (t(wk, x1), . . . , t(wk, xL))0 denote the L vector of wages/transfers at which
a type Wi ¼ wk firm can ‘hire’ each of the L types of workers. Firm’s treat these transfers as fixed when matching. Therefore, under the maintained assumption of profit
maximization, the type of worker hired by firm i, Xi, is equal to
Xi ¼ arg max fPðWi ; x; ei Þg;
x2X

with P(Wi, x, ei) as defined by (45).
Consider an assignment where worker j matches with firm i. The worker’s utility
from such a match is
V ðWi ; X j ; n j Þ ¼ tðWi ; X j Þ þ rðWi ; n j Þ;

ð46Þ

where r(Wi, n j) is a utility shifter such that E½rðw; n j Þ ¼ 0. Observationally identical
workers may rank the desirability of matching with different types of firms differently.
That is, a worker’s utility is individual-specific, but analogous to firm profits, does not
depend on the specific firm at which she works, only its type.
Let tl ¼ (t(w1, xl), . . . , t(wK, xl))0 denote the K vector of wages/transfers available
to a worker of type X j ¼ xl in exchange for matching with each of the K types of firms.
Utility maximization implies that worker j will match with a firm of type

1009

1010

Bryan S. Graham

W j ¼ arg max V ðw; X j ; n j Þ
x2W

with V(w, X j, n j) as defined by (46).
Total match surplus Y(i,j) is equal to the sum of (45) and (46),
Yði;jÞ ¼ dðWi ; X j Þ þ lðei ; X j Þ þ rðWi ; n j Þ;
which is identical to the restricted match surplus function (20) discussed in Section 3.2
above.29
In the absence of an outside option with exogenously-specified utility (i.e., the ability not to match), it is clear that an across the board increase or decrease in equilibrium
transfers will leave both firm and worker preferences unchanged. In particular changing
transfers to t k ¼ tk þ t leaves type Wi ¼ wk firms’ rankings over worker types
unchanged. Likewise tl ¼ tl þ t leaves type X j ¼ xl workers’ rankings unchanged.
Consequently the equilibrium transfer vector will be non-unique. Therefore I normalize the first element of t k and tl to zero for all firm and worker types. This generates
K þ L  1 non-redundant normalizations.30
Note that the restriction that firms (workers) are indifferent across workers (firms)
of the same type implies that in equilibrium the transfer function will vary with Wi
and X j alone. Firms are unwilling to pay a premium for workers with different realizations of n j, neither are they required to compensate workers for variability in their own
realization of ei. This means that some firms and workers will earn inframarginal rents
in equilibrium.
Associated with each firm is a vector of L productivities: one specific to each of the
L types of workers with which it may match. This vector is independently and identically distributed across firms:
ðlðei ; x1 Þ; . . . ; lðei ; xL ÞÞ0

Fl :

ð47Þ

Consistent with Condition 3.1 this distribution is constant in firm type.
Associated with each worker is a vector of K utility shifters: one specific to each of
the K types of firms with which it may match:
ðrðw1 ; n j Þ . . . ; rðwK ; n j ÞÞ0

Fr :

ð48Þ

This vector is independently and identically distributed across all workers.
29

30

The interpretation of the two sources of unobserved heterogeneity, l(ei, X j) and r(Wi, n j), is somewhat more
flexible then suggested by the language adopted here (cf., Chiappori, Salanié, and Weiss, 2010).
The introduction of an outside option for each firm and worker type (with an exogenously given utility level), will
eliminate this indeterminancy. The parallel with the role of an outside good in discrete choice models of demand is
quite close (e.g., Nevo, 2000).

Econometric Methods for the Analysis

For what follows it will sometimes be convenient, as well as conceptually helpful,
to use the abbreviated notation
ðl1i ; . . . ; lLi Þ0

Fl ;

ðr1 ; . . . ; rK Þ0
j

j

Fr ;

j

where lli ¼ l(ei, xl) and r k ¼ rðwk ; n j Þ.
The equilibrium assignment of workers to firms is determined by the interaction of
three primitives of the model: (i) the marginal distributions of firm and worker types,
respectively p ¼ (p1, . . . pK)0 and q ¼ (q1, . . . qL)0 , (ii) the distribution functions of the firm
productivities and worker utilities, respectively Fl and Fr, and (iii) the production function
at each possible (w,x) pair d ¼ ðd01 ; . . . d0K Þ0 (where dk ¼ (d(wk, x1), . . . , d(wk, xL))0 denotes
the ‘deterministic’ component of the L vector of outputs available to a type k firm).
Consider a type k firm facing the wage/transfer vector tk. This vector contains the
wage a type k firm must pay in order to match with each of the L types of workers.
The total demand for matches with type l workers by type k firms is
rklD ¼ PrðXi ¼ xl j Wi ¼ wk ; t k ; dk ; Fl Þ  pk :

ð49Þ

The first term in (49) is the conditional probability that a type k firm’s most preferred
match is with a type l worker given the vector of prevailing wages t k. The precise form
of this conditional probability will depend on the joint distribution of unobserved productivities, Fl. The second term in (49) is the marginal frequency of type k firms in the
population. The product of the two terms gives the total demand for k-to-l matches.
Now consider a type l worker facing the wage/transfer vector t l. This vector contains the wages available to a type l worker in exchange for matching with each of the
K types of firms. The total supply of matches with type k firms by type l workers is
rklS ¼ PrðW j ¼ wk j X j ¼ xl ; t l ; Gr Þ  ql :

ð50Þ

The first term in (50) is the conditional probability that a type l worker’s most preferred
match is with a type k firm given the vector of available wages tl. The second is the
marginal frequency of type l workers in the population. Their product gives the total
supply of k-to-l matches.
The (K  1)  (L  1) non-normalized transfers adjust to equate supply and
eq
eq
demand for each of the K  L types of matches. That is tk and tl adjust to satisfy
eq

eq

PrðXi ¼ xl j Wi ¼ wk ; tk ; dk ; Fl Þ  pk ¼ PrðW j ¼ wk j X j ¼ xl ; tl ; Fr Þ  ql ; ð51Þ
for k ¼ 1, . . . , K and l ¼ 1, . . . , L. After eliminating the K þ L  1 redundant conditions, we are left with (K  1)  (L  1) equilibrium conditions which pin down the
(K  1)  (L  1) transfers.
Given the equilibrium transfer vectors, the equilibrium frequency of k-to-l
eq
eq
eq
matches,rkl , is given by (49) or (50) after substituting in tk or tl .

1011

1012

Bryan S. Graham

4.2 Parametric identification of AREs when match
output is unobserved
If Fl and Fr belong to parametric families indexed by parameter , then the analysis of
identification is conceptually straightforward (although, as in single agent multinomial
choice models, the details may be involved). The problem is one of multinomial choice
subject to the (K  1)  (L  1) market clearing conditions (51). The parametric
assumptions on Fl and Fr induce specific functional forms for the conditional choice
probabilities (49) and (50). Fixing y ¼ (d0 , )0 one can therefore use (51) to solve for
the set of transfers which will clear the market t(y). This vector is then plugged back
into the firm’s conditional demand equation. Finally, y is chosen to align the predicted
with the actual match-type ‘market shares’.
Specifically, let GklD ðy; tÞ and GklS ðy; tÞ be the parametric forms for, respectively,
type k firms’ demand for type l workers and type l workers’ supply to type k firms.
These forms are induced by the parametric assumptions on Fl and Fr. In ‘step 1’ we
find, fixing y, the vector of transfers t(y) which solve the k ¼ 1, . . . , K  1 and
l ¼ 1, . . . , L  1 market clearing conditions
GklD ðy; tðyÞÞ  pk ¼ GklS ðy; tðyÞÞ  ql :

ð52Þ

In ‘step 2’ we choose y such that
GklD ðy; tðyÞÞ  pk ¼ rkl

ð53Þ

for all k ¼ 1, . . . , K  1 and l ¼ 1, . . . , L  1. Here rkl denotes the equilibrium or
status quo frequency of k-to-l matches (I drop the ‘sq’ superscript to simplify the
notation).
Under conventional distributional assumptions ‘demand’ GklD ðy; tÞ will be strictly
decreasing in ‘price’ tkl and ‘supply’ GklS ðy; tÞ will be strictly increasing in ‘price’ tkl;
consequently (52) should be straightforward to solve.31 However without additional
assumptions y is not point identified. Equation (53) provides only (K  1)  (L  1)
equations for dim (y) ¼ dim(d) þ dim() ¼ KL þ dim() unknowns. Point identification requires additional assumptions. Two basic options are available. First, we might
impose extra structure on the KL match-specific surpluses so that d ¼ d(b) for some
low dimensional b. If the support points of Wi and X j have a natural ordering then
such structure can be quite natural (e.g., following from smoothness assumptions on
d(w, x)).32 A priori restrictions on d(w, x) allow for more flexibility in the specification
31

32

Depending on the precise distributional assumptions uniqueness issues could arise. Goeree, Holt and Palfrey (2005) give
examples of distributional assumptions that lead to choice probabilities which are non-monotone in their indices.
If Wi and X j are themselves functions of multiple underlying characteristics then separability assumptions could also
be imposed on d(w, x).

Econometric Methods for the Analysis

of the joint distributions of unobserved firm productivities and worker preferences (i.e.,
a higher dimensional ). Even if Fl and Fr are known, additional assumptions will be
required in order to identify the KL match-specific surpluses d. One approach, which
may be both useful and empirically relevant, is to allow agents not to match. Introducing an outside option for each firm and worker type, and normalizing its profit/utility
to zero, will sometimes allow for the identification of d.
As an example of a parametric treatment consider the work of Choo and Siow
(2006a,b). They study the model outlined above under the additional assumption
that l(ei,xl) and r(wk,n j) are independently and identically distributed centered
Type I extreme value random variables. Galichon and Salanié (2009) relax this assumption by allowing the common scale parameter for the firm heterogeneity to differ
from that associated with the worker heterogeneity. Adopting this latter formulation
assume that
Fl ðl1 ; . . . ; lL Þ ¼

Fr ðr1 ; . . . ; rK Þ ¼

QL

ll
l¼1 exp exp 
sl

QK

!!

rk
k¼1 exp exp 
sr

!!

ð54Þ

:

Under this assumption McFadden (1974) shows that there exist closed form
expressions for the equilibrium firm demand equations (49) of, letting
eq
eq
tkl ¼ tkl ðwk ; xl Þ and dkl ¼ d(wk,xl),
rk1 ¼ pk

1
;
L
X
eq
1
1þ
exp sl ½dkm  dk1  tkm 

l ¼ 1;

ð55Þ

l ¼ 2; . . . ; L

ð56Þ

m¼2

exp s1
l ½dkl  dk1  tkl 
;
L
X
eq
1þ
exp s1
l ½dkm  dk1  tkm 
eq

rkl ¼ pk

m¼2

for k ¼ 1, . . . , K (recall that tk1 ¼ 0 by normalization). Taking logarithms of (55) and
(56) and subtracting then gives
eq

sl ln ðrkl =rk1 Þ ¼ dkl  dk1  tkl :
Similarly the equilibrium worker supply equations (50) take the form

ð57Þ

1013

1014

Bryan S. Graham

r1l ¼ ql
1þ

K
X

1

;
eq
exp s1
r ½tml 

k¼1

ð58Þ

k ¼ 2; . . . ; K;

ð59Þ

m¼2



eq
exp s1
r ½tkl 
rkl ¼ ql
K

;
X
eq
exp s1
1þ
r ½tml 
m¼2

for l ¼ 1, . . . , L (recall that t1l ¼ 0 by normalization). Taking logarithms of (58) and
(59) and subtracting then gives
eq

sr ln ðrkl =r1l Þ ¼ tkl :

ð60Þ

Finally, adding (57) and (60) yields (cf., Equation (10) of Choo and Siow (2006a)):
sl ln ðrkl =rk1 Þ þ sr ln ðrkl =r1l Þ ¼ dkl  dk1 :

ð61Þ

Further manipulation then gives (Galichon and Salanié, 2009; Siow, 2009):


rKL rkl
dKL  dKl  ½dkL  dkl 
f
ln
¼
¼ KLkl ;
rKl rkL
sl þ sr
sl þ sr
k ¼ 1; . . . ; K  1;

ð62Þ

l ¼ 1; . . . ; L  1

which identifies the average local complementarity (ALC) between Wi and and X j up
to scale. Knowledge of fKLkl up to scale is sufficient to identify b(Ra) up to scale (see
Section 3.2).
In the CS model the (K  1)  (L  1) average local complementarity (ALC) parameters are parametrically just identified by the (K  1)  (L  1) non-redundant entries
in Rsq. Embodied in the setup are a number of strong, a priori, restrictions. To see this
consider the case where Wi and X j equal male and female years of completed schooling. Consider a man with k years of schooling, it seems likely that if his idiosyncratic
valuation of women with l years of schooling, lli, is above average, then so is his valuation of women with l þ 1 years of schooling, llþ1i. Men who are particularly attracted
to college educated women may be similarly attracted to those with graduate degrees. The
CS model rules out such correlations in unobserved tastes. Furthermore, in the absence
of placing additional structure elsewhere, such correlations are unidentified. Unfortunately,
if they are present in the population, the model will generate poor forecasts of, say, the
effect of increasing the fraction of women who are college graduates on the equilibrium

Econometric Methods for the Analysis

pattern of marriages. The problem is analogous to McFadden’s (1981) well-known Red
bus/Blue bus problem.33
As noted above if d ¼ d(b) for some low dimensional b, then it will typically be
possible to make the parametric assumption on Fl and Fr less restrictive.34 Methods
refined in the empirical industrial organization (IO) literature on differentiated product
demand may be helpful in this regard (e.g., Berry, Levinsohn and Pakes, 1995;
Nevo, 2000; Ackerberg, Benkard, Berry and Pakes, 2007). In recent work, Chiappori,
Salanie and Weiss (2010), have emphasized the identifying power of observing multiple
markets where (i) the distribution of agent preferences in the same across markets, but
(ii) the distribution of agent types varies.

4.3 Nonparametric identification
Fox (2009a) initiated the study of nonparametric identification in transferable utility
matching games when only agent characteristics are observed. In addition to approaching the problem nonparametrically, his results, unlike Choo and Siow (2006a,b), who
work with aggregate ‘market share’ data, rely only on match-level pairwise comparisons. Fox’s (2009a) theorems require that a ‘rank order property’ hold. This property
ensures that, across a population of observationally identical markets, assignments
which yield more surplus when the stochastic component of match surplus is ignored
will be more frequently observed. While this assumption is intuitive, and analogous to
those underlying single agent discrete choice models, Fox (2009a) notes that it is difficult to write down data generating processes under which it holds.
A virtue of Choo and Siow’s (2006a,b) likelihood-based approach is its complete
specification of the data generating process. Unfortunately its heavy reliance on the
conditional logit model is unattractive. The discussion in Section 4 clarifies that the
CS model is perhaps best viewed as particular specification of a two-sided multinomial
discrete choice problem subject to market clearing conditions. Manski (1975) demonstrated semiparametric identification of a single agent multinomial choice model and
proposed an associated ‘maximum score’ estimator (see also Lee, 1995; Matzkin,
2007; Powell and Ruud, 2008). The discrete-choice structure of the CS model suggests that it too may have semiparametric analog.
To explore this possibility this section begins by developing some ‘pairwise implications’ of the CS model. This leads naturally to a semiparametric approach based on
pairwise comparisons similar to those first suggested by Fox (2009a). The valued-added
33

34

In recent, pedagogically-oriented work, Imbens (2007b) has re-cast this as the Chez Panise/Lalime’s problem.
Debreu (1960) is the first published account of this problem.
Galichon and Salanié (2009) consider restrictions of the form d ¼ d(b); however they do not use the resulting extra
degrees of freedom to relax the Type I extreme value forms for Fl and Fr. Instead they use the extra restrictions for
specification testing.

1015

1016

Bryan S. Graham

here, relative to Fox (2009a), is in providing a primitive justification for these comparisons. A limitation is that this justification hinges on agent characteristics being
discretely-valued (which allows me to adopt a two-sided multinomial modelling
approach). In contrast Fox (2009a), under the maintained rank order property, can
accommodate continuously-valued agent characteristics. Fox (2009a) is also able to
accommodate situations where matching is many-to-many.
4.3.1 Pairwise logit identification
Consider the subpopulation of type k and m firms that choose to match with either
type l or n workers. Likewise consider the subpopulation of type l and n workers that
choose to match with either type k or m firms. This defines a conditional analog of the
simple 2  2 assignment problem discussed above. Consider two matches, say match i
and match j, which are independent random draws from a population of equilibrium
matches. Let
Aklmn
¼ 1ðWi 2 fwk ; wm gÞ1ðWj 2 fwk ; wm gÞ1ðXi 2 fxl ; xn gÞ1ðX j 2 fxl ; xn gÞ; ð63Þ
ij
be a binary indicator for the event that both matches belong to the klmn sub-allocation
(i.e., belong to the set of k-to-l, k-to-n, m-to-l and m-to-n matches). There are a total
   
K
L
of J ¼

such sub-allocations.35 Each randomly sampled pair of matches
2
2
will belong to at least one sub-allocation. If Wi 6¼ Wj and Xi 6¼ Xj, an event I will condition on below, then they will belong to a unique sub-allocation.
We can imagine locally reallocating workers across firms within the klmn suballocation of matches. If we normalize
rkl
rkl þ rkn þ rml þ rmn
rkl þ rkn
pklmn ¼
rkl þ rkn þ rml þ rmn
rkl þ rml
qklmn ¼
;
rkl þ rkn þ rml þ rmn
r klmn ¼

ð64Þ

then the set of feasible sub-reallocations is summarized in Table 3. The klmn suballocation may be made more assortative by increasing rklmn, and less so by decreasing it.
Now, for randomly sampled matches i and j, define


Sij ¼ sgn ðWi  Wj ÞðXi  X j Þ :
ð65Þ
35

Note that this definition allows two sub-allocations to be over-lapping. For example the KLkl and KLmn suballocations overlap.

Econometric Methods for the Analysis

Table 3 The set of feasible klmn sub-allocations
X ¼ xn
W\X
X ¼ xl

W ¼ wk
W ¼ Wm

pklmn  rklmn

rklmn
klmn

q

r

klmn

1p

klmn

pklmn

q

klmn

þr

1  pklmn

klmn

1  qklmn

qklmn

If match i and j are assortatively paired, consisting of, for example, one (k, l ) and
one (K, L) match, then Sij ¼ 1. If, in contrast, the two matches are ‘integrated’ or
anti-assortatively paired, consisting of, for example, one (k, L) and one (K, l ) match,
then Sij ¼ 1. If either firm or worker type (or both) are the same across the two
drawn matches then Sij ¼ 0. In such cases a switch of workers by the two firms would
leave the joint distribution of (Wi, Xi) unchanged. This case corresponds to sampling
matches which belong to multiple sub-allocations. The above discussion assumes, as
is conventional, that the support points of Wi and X j are ordered in increasing
magnitude.
Consider the probability of drawing an assortatively matched pair conditional on (i)
the draw being either assortative or anti-assortative and (ii) the pair belonging to the
klmn sub-allocation. By the definition of conditional probability we have
PrðSij ¼ 1 j Sij 2 f1; 1g; Aklmn
¼ 1Þ
ij
¼

r klmn ð1  pklmn  qklmn þ r klmn Þ
:
r klmn ð1  pklmn  qklmn þ r klmn Þ þ ðpklmn  r klmn Þðqklmn  r klmn Þ

By equation (62) above the right-hand-side of this expression, under the maintained
assumptions of the CS model, is


kn dkl Þ
exp dmn dsmllðd
þsr

:
¼ 1Þ ¼
PrðSij ¼ 1 j Sij 2 f1; 1g; Aklmn
ij
dmn dml ðdkn dkl Þ
1 þ exp
sl þsr
Recall that fmnkl ¼ dmn  dml  (dkn  dkl) equals average local complementarity
(ALC) in the klmn sub-allocation. Let Aij be the J  1 vector of all sub-allocation
indicators and f the corresponding set of average local complementarities. We have
shown
PrðSij ¼ 1 j Sij 2 f1; 1g; Aij Þ ¼

exp ððsl þ sr Þ1 A0ij fÞ
1 þ exp ððsl þ sr Þ1 A0ij fÞ

:

ð66Þ

1017

1018

Bryan S. Graham

Equation (66) has the form a two-period panel data conditional logit probability (e.g.,
Chamberlain, 1980). This is a consequence of its pairwise formulation and event
conditioning (i.e., discarding Sij ¼ 0 draws). Insights from the panel data literature
on discrete choice will prove useful below (Manski, 1987; Chamberlain, 2010).
Galichon and Salanié (2009) propose the following parameterization of the average
match surplus function
dðw; xÞ ¼ aðwÞ þ bðxÞ þ eðw; xÞ0 b;

ð67Þ

for e(w,x) a known low dimension vector of basis functions and a(w) and b(x)
arbitrary.36 Define
mmnkl ¼ eðwm ; xn Þ  eðwm ; xl Þ  ½eðwk ; xn Þ  eðwk ; xl Þ;
and let M be the matrix composed of J rows of the form m0mnkl . This gives f ¼ Mb and
hence
PrðSij ¼ 1 j Sij 2 f1; 1g; Aij Þ ¼

exp ððsl þ sr Þ1 A0ij MbÞ
1 þ exp ððsl þ sr Þ1 A0ij MbÞ

:

Now, imposing the scale normalization sl þ sr ¼ 1, consider the the criterion
function
LN ðbÞ ¼

N X
X

n
o
j Sij j Sij A0ij Mb  ln ½1 þ exp ðSij A0ij MbÞ :

ð68Þ

i¼1 j<i

Assuming that in the population rkl > 0 for all k and l the minimizer of (68), the pairwise
^ , will be consistent for b. This estimate is the minimizer of a second
logit estimate b
PL
order U-Statistic. This class of estimators was introduced by Huber (1964). Honoré and
Powell (1994) provide distribution theory for minimizers of U-processes.37 The sampling
properties of the minimizer of (68) are outlined in Section 4.5 below.
4.3.2 Nonparametric identification in a 2  2 matching market
This section demonstrates that the sign of f is identified in semiparametric analog of
the CS model. Fox (2009a,b) also shows that the sign of local complementarity is identified, but under non-primitive assumptions about the data generating process. The
derivation given below provides a primitive justification of Fox’s (2009a,b) approach.
To keep the analysis simple initially consider a market with just two types of firms
and two types of workers (i.e., Wi 2 {wk, wm} and X j 2 {xl, xn}). This allows a
36

37

There is a close connection between (67) and models used to parameterize K  L ordinal contingency tables (e.g.,
Goodman, 1979).
Honoré and Powell (2005) characterize the large sample properties of minimizers of kernel weighted U-statistics. In
the statistics literature Bose (1998, 2002) studies the asymptotic properties of U-statistic minimizers.

Econometric Methods for the Analysis

demonstration of identification that formally resembles Manski’s (1987) extension of
maximum score to two period binary choice panel data models.
As in Section 4 firm profits are given by
P ðWi ; X j ; ei Þ ¼ dðWi ; X j Þ þ lðei ; X j Þ  tðWi ; X j Þ
and worker utility by
V ðWi ; X j ; n j Þ ¼ tðWi ; X j Þ þ rðWi ; n j Þ:
There are four types of matches in a 2  2 market. To show identification it suffices
to consider just two of them. Consider first matches between Wi ¼ wm firms and
type X j ¼ xn workers. Firms in such matches, at the equilibrium vector of transfers,
prefer type n to type l workers. This generates the inequality, first recalling the notation
j
dkl ¼ d(wk,xl), tkl ¼ t(wk,xl), lli ¼ l(ei,xl) and rk ¼ rðwk ;n j Þ,
dmn  tmn þ lni  dml  tml þ lli :

ð69Þ

The left-hand-side equals firm profits when matched with a type n worker, the righthand-side profits when matched with a type l worker. Rearranging yields the equivalent expression
lli  lni  dmn  dml  ðtmn  tml Þ;
which says that a firm chooses a type n worker if the systematic ‘gains’, dmn  dml 
(tmn  tml), exceed the idiosyncratic ‘losses’, lli  lni, from doing so. Since transfers
adjust such that all type m firms who prefer type n workers may match with one in
equilibrium we have
Fll ln ðdmn  dml  ðtmn  tml ÞÞ ¼ rmn =pm ;

ð70Þ

with Fll ln ð Þ the (unknown) distribution of lli  lni and rmn/pm the fraction of type m
firms matching with type n workers in equilibrium.
Now consider the opposite side of the market. For type n workers who choose to
match with type m firms we must have
mðiÞ

tmn þ rmðiÞ
m  tkn þ rk ;
so that
Frk rm ðtmn  tkn Þ ¼ rmn =qn ;
j

ð71Þ

with Frk rm ð Þ the (unknown) distribution of rk  rjm and rmn/qn the fraction of type n
workers matching with type m firms in equilibrium.
Now consider type k firms who choose to match with type l workers. For such
firms we have

1019

1020

Bryan S. Graham

dkl  tkl þ lli  dkn  tkn þ lni ;
so that
1  Fll ln ðdkn  dkl  ðtkn  tkl ÞÞ ¼ rkl =pk :

ð72Þ

Finally for type l workers who choose to match with type k firms we have
mðiÞ

tkl þ rk

 tml þ rmðiÞ
m ;

so that
1  Frk rm ðtml  tkl Þ ¼ rkl =ql :

ð73Þ

Assume that both Fll ln ð Þ and Frk rm ð Þ are strictly increasing on the entire real
line with continuous, bounded derivatives. Subtracting the sum of the inverses of
(72) and (73) from the sum of the inverses of (70) and (71) yields.
!
!
1

p

q
þ
r
1

p

q
þ
r
k
l
kl
k
l
kl
Fl1
þ Frk rm
l ln
1  pk
1  ql
!
!
ð74Þ
pk  rkl
ql  rkl
1
1
 Frk rm
¼ dmn  dml  ðdkn  dkl Þ;
Fll ln
pk
ql
where the feasibility conditions pm ¼ 1  pk, qn ¼ 1  ql and rmn ¼ 1  pk  ql þ rkl are
also substituted in.
Equation (74) shows that the average local complementarity parameter fmnkl ¼ dmn 
dml  (dkn  dkl) can be written in terms of the observed allocation and the unobserved
heterogeneity distribution functions. Under the extreme value assumption of Section 4
equation (74) is equivalent to the complementarity measure derived by Galichon and
Salanié (2009) and Siow (2009) (see (62) above).
Observe that if rkl ¼ pk ql the left-hand-side of (74) evaluates to
ð1  ql Þ þ Fr1
 1ð1  pk Þ  Fl1
ð1  ql Þ  Fl1
ð1  pk Þ ¼ 0:
Fl1
l ln
l ln
l lm
k rm
If the status quo allocation is the random allocation we may conclude that fmnkl ¼ 0.
Differentiating with respect to rkl yields
1
fll ln

1  pk  ql þ rkl
1  pk

!

1
þ
1  pk

1
frk rm

!

1
1  ql

1  pk  ql þ rkl
1  ql
1
1
1
1
! þ
! > 0:
þ
pk  rkl pk
ql  rkl ql
fll ln
frk rm
pk
ql

Econometric Methods for the Analysis

So that if rkl > pkql we may conclude that fmnkl > 0 and if rkl < pkql we can conclude
the opposite. Summarizing we have
sgnfrkl  pk ql g ¼ sgnffmnkl g;

ð75Þ

so that assortativeness implies complementarity and mixing implies substitutability.
Now consider the median of Sij conditional on it equalling 1 or 1. Since Sij always
equals 1 or 1 its median is necessarily one or the other with
medðSij j Sij 2 f1; 1gÞ ¼ 1 , ð1  pk  ql þ rkl Þrkl > ð1  pk Þð1  ql Þ
medðSij j Sij 2 f1; 1gÞ ¼ 1 , ð1  pk  ql þ rkl Þrkl < ð1  pk Þð1  ql Þ:
Since ð1  pk  ql þ rkl Þrkl > ð1  pk Þð1  ql Þ , rkl > pk ql we have therefore have
medðSij j Sij 2 f1; 1gÞ ¼ sgnðfmnkl Þ:
4.3.3 Nonparametric identification in a K  L matching market
Generalizing the argument outlined above to general K  L matching markets requires
imposing additional structure on the distributions of firm and worker heterogeneity.
Theorem 4.1 provides a formal result based on one sufficient set of conditions. The
proof shows how monotonicity of the firm demand and worker supply probabilities
in their indexes, combined with the assumption that the matching market clears, delivers a conditional quantile restriction that can be used to identify the sign of fmnkl.
Theorem 4.1 (Semiparametric Identification)
Consider the two-sided multinomial discrete choice model described in Section 4.1 with firm
profits given by (45) and worker utilities by (46). If
(i) rkl is known for all k ¼ 1, . . . , K and l ¼ 1, . . . , L,
(ii) Xi ¼ xl implies that P (Wi,xl,ei)  P (Wi,xn,ei) for all n ¼ 1, . . . , L and W j ¼ wk
implies that V (wk,X j,n j)  V (wm,X j,n j) for all m ¼ 1, . . . , K,
(iii) at the equilibrium wage schedule all firms hire their preferred type of worker, and all workers
are employed by their preferred firm type,
L
K
Y
Y
j
j
j
Fl ðlli Þ; Fr ðr1 ; . . . ; rK j X j Þ ¼
Fr rk , and
(iv) Fl ðl1i ; . . . ; lLi j Wi Þ ¼
j

l¼1

l¼1

(v) Fl(lli) and Fr ðrk Þ are strictly increasing on the entire real line, with bounded, continuous
derivatives, then the sign of average local complementarity (ALC)
fmnkl ¼ dmn  dml  ðdkn  dkl Þ
is identified, for rklmn, pklmn and qklmn as defined in (64) above, by


sgn r klmn  pklmn qklmn ¼ sgnffmnkl g;
for all k, m (with k 6¼ m) and all l, n (with l 6¼ n).

1021

1022

Bryan S. Graham

Proof. The proof consists of four parts. First, following Manski (1975), I use (iv)
and (v) to show monotonicity of the choice probabilities in the deterministic firm
and worker payoffs (so that if, for example, dmn  tmn > dmo  tmo, then Pr(Xi ¼ xn
jWi ¼ wm) > Pr(Xi ¼ xojWi ¼ wm)). Second, following Fox (2009c), I show that
monotonicity holds within subsets. Parts one and two of the proof are entirely standard
and included only for completeness. Let Fll ln ð j Wi ¼ wm ; Xi 2 fxl ; xn gÞ be the distribution function for lli  lni in the subpopulation of type m firms who choose to match
with either type l or n workers in equilibrium and let Fll ln ð j Wi ¼ wk ; Xi 2 fxl ; xn gÞ
be the same function for type k firms. The third part of the proof uses monotonicity
and market clearing (iii) to show that Fll ln ð j Wi ¼ wm ; Xi 2 fxl ; xn gÞ and
Fll ln ð j Wi ¼ wk ; Xi 2 fxl ; xn gÞ cross just once and at that this point of crossing is
their 1  qklmn quantile (qklmn is defined by (64) above). Finally, this conditional quantile restriction is then used to show the main result in an adaptation of the simple argument developed for the 2  2 case in the previous section.
Part 1: The conditional probability that a type m firm chooses a type n worker is,
using (ii) and (iv), given by
PrðXi ¼ xn j Wi ¼ wm Þ ¼ Prðlo  ln < dmn  dmo  ðtmn  tmo Þ; o ¼ 1; . . . ; L; o 6¼ nÞ
1
ð Y
L
¼
Fl ðln þ dmn  dmo  ðtmn  tmo ÞÞfl ðln Þ dln ;
1 o¼1;o6¼ n

so that for all l 6¼ n
PrðXi ¼ xn j"Wi ¼ wm Þ  PrðXi ¼ xl j Wi ¼ wm Þ
1
ð
L
Y
Fl ðl þ dmn  dmo  ðtmn  tmo ÞÞ
¼
1



o¼1;o6¼ n

L
Y

#

Fl ðl þ dml  dmo  ðtml  tmo ÞÞ fl ðlÞdl:

o¼1;o6¼ l

This gives, using (v),
PrðXi ¼ xn j Wi ¼ wm Þ v PrðXi ¼ xl j Wi ¼ wm Þ

ð76Þ

according to whether
dmn  dml  ðtmn  tml Þ v 0:
Part 2: Dividing both sides of (76) by Pr(Xi ¼ xnj Wi ¼ wm) þ Pr(Xi ¼ xljWi ¼ wm)
does not change the inequality that so that by the definition of a conditional probability
we have
PrðXi ¼ xn j Wi ¼ wm ; Xi 2 fxl ; xn gÞ v PrðXi ¼ xl j Wi ¼ wm ; Xi 2 fxl ; xn gÞ

Econometric Methods for the Analysis

according to whether dmn  dml  ðtmn  tml Þ v 0. Replicating the above arguments
also gives
PrðW j ¼ wm j X j ¼ xn ; W j 2 fwk ; wm gÞ v PrðW j ¼ wk j X j ¼ xn ; W j 2 fwk ; wm gÞ
according to whether tmn  tkn v 0.
Part 3: Note that
PrðXi ¼ xn j Wi ¼ wm ; Xi 2 fxl ; xn gÞ ¼ Fll ln ðdmn  dml  ðtmn  tml Þj Wi ¼ wm ;Xi 2 fxl ; xn gÞ
PrðXi ¼ xn j Wi ¼ wk ; Xi 2 fxl ; xn gÞ ¼ Fll ln ðdkn  dkl  ðtkn  tkl Þj Wi ¼ wk ;Xi 2 fxl ;xn gÞ

Conditional monotonicity implies that these two CDFs cross just once. Furthermore,
market clearing, or hypothesis (iii), implies the sub-allocation feasibility condition:
ð1  pklmn ÞFll ln ðdmn  dml  ðtmn  tml Þ j Wi ¼ wm ; Xi 2 fxl ; xn gÞ
þpklmn Fll ln ðdkn  dkl  ðtkn  tkl Þ j Wi ¼ wk ; Xi 2 fxl ; xn gÞ ¼ 1  qklmn :
That is, within the klmn suballocation, the ‘demand’ for matches with type n workers
equals the available ‘supply’. This gives the conditional quantile restriction
Fl1
ð1  qklmn j Wi ¼ wm ; Xi 2 fxl ; xn gÞ ¼ Fl1
ð1  qklmn j Wi ¼ wk ; Xi 2 fxl ; xn gÞ:
l ln
l ln
ð77Þ
A parallel argument gives
Fr1
ð1  pklmn j X j ¼ xn ; W j 2 fwk ; wm gÞ ¼ Fr1
ð1  pklmn j X j ¼ xl ; W j 2 fwk ; wm gÞ:
k rm
k rm
ð78Þ

Part 4: Inverting the conditional ‘demands’ and ‘supplies’ yields

!
klmn
klmn
klmn 
1

p

q
þ
r

1
Fll ln
 Wi ¼ wm ; Xi 2 fxl ; xn g ¼ dmn  dml  ðtmn  tml Þ

1  pklmn

!
klmn
klmn
klmn 
1

p

q
þ
r

Fr1
 X j ¼ xn ; W j 2 fwk ; wm g ¼ tmn  tkn
k rm

1  qklmn

!
klmn
klmn 
p

r

1
Fll lL
 Wi ¼ wk ; Xi 2 fxl ; xn g ¼ dkn  dkl  ðtkn  tkl Þ

pklmn

!
klmn
klmn 
q

r

Fr1
 X j ¼ xl ; W j 2 fwk ; wm g ¼ tml  tkl :
k rm

qklmn
Following the derivation beginning with Equation (74) in the discussion of the 2  2
▪
case gives the result.

1023

1024

Bryan S. Graham

The assumption of independence across the elements of Fl(l1, . . . ,lL) and
Fr(r1, . . . ,rK) could be relaxed to exchangeability (cf., Goeree, Holt and Palfrey,
2005; Fox, 2009c).
The conclusion of Theorem 4.1 is a discrete analog of Fox’s (2009a, Theorem 5.1)
derivative-based approach to identifying local complementarity for continuouslyvalued inputs. The underlying intuition behind the two results coincide: assortativeness
suggests complementarity. The value-added of Theorem 4.1 is that it is an implication
of an explicitly specified data generating process, whereas Fox’s (2009a) result is not
primitively justified.
The availability of a large number of each type of firm and worker is essential for
the conclusion of Theorem 4.1. Market thickness ensures that equilibrium transfers
depend only on firm and worker types. This allows the econometrician to construct
functions of the data that are invariant to these transfers. Identification requires the
observation of only a single market. In contrast, Fox (2009a) formally considers identification in a population of many small markets. If markets are truly small, with only a
few agents on each side, one can, using the linear programming representation of the
equilibrium matching and a parametric specification of Fl and Fr, write down a likelihood for the market-level assignment (cf., Fox, 2009b). When markets are mediumsized this approach is less tractable numerically. In such situations the large market
result of Theorem 4.1 may be an useful approximation.
Theorem 4.1 generates, recalling the definitions of Sij, Aij, and f given in the discussion of pairwise logit above, the following conditional median restriction
medðSij j Sij 2 f1; 1g; Aij Þ ¼ sgnðA0ij fÞ:

ð79Þ

Note that (79) has the form of the conditional median restriction derived by Manski
(1987) in the context of a two period binary choice panel data model. In the absence
of additional structure only the signs of the ALC parameters are identified. This loss of
point identification relative to the pairwise logit case is intriguingly analogous to
Chamberlain’s (2010) identification analysis for binary choice panel data.
^
If we assume that f ¼ Mb, then (79) suggests choosing b
MRC to maximize the rank
correlation criterion suggested by Han (1987):
LN ðbÞ ¼

N X
X

sgnðA0ij MbÞSij :

ð80Þ

i¼1 j<i

This criterion was first advocated by Fox (2009a,b) and Fox and Bajari (2009) in the
matching context.
^
Since A0ij M is discretely-valued b
MRC will be set-valued and this will remain true as N
grows large. Consequently b is only set identified, however if its dimension is small relative
to f, then the identified set may be quite small (see Cavanagh and Sherman, 1998, Section 5).

Econometric Methods for the Analysis

4.4 Identification in one-to-one matching markets without transfers
In some contexts it may be difficult for match partners to make transfers to one
another. For example the institutional structure of the teacher labor market in New
York limits the amount of variation in wages across schools (Loeb, Boyd, Lanford
and Wyckoff, 2003). Theorists, starting with the seminal paper by Gale and Shapley
(1962), have extensively studied two-sided matching problems without transfers (e.g.,
Roth and Sotomayor, 1990). Little econometric work on these models has been
undertaken.
In a change of notation assume that firm utility is given by
UðWi ; X j ; ei Þ ¼ #ðWi ; X j Þ þ lðei ; X j Þ;
and worker utility by
V ðWi ; X j ; n j Þ ¼ fðWi ; X j Þ þ rðWi ; n j Þ:
Consider two matches, i and j, that are assortatively configured. That is matches i and j
consist of, respectively type w and w0 firms and x and x0 workers with w < w0 and x < x0 .
For this configuration to be stable we require that either the firm in match i or the worker
in match j (or both) prefer the status quo (i.e., U(w,x,ei) > U(w,x0 ,ei) and/or V(w0 ,x0 ,n j) >
V(w,x0 ,n j)). If this were not the case then this pair could block the assignment by leaving
their partners and forming a new match. Similarly stability requires that either the worker
in match i or the firm in match j (or both) prefer the status quo (i.e., U(w0 ,x0 ,ej) > U(w0 ,x,ej)
and/or V(w,x,ni) > V(w0 ,x,ni)).38
These stability conditions, which rule out so called blocking pairs, are considerably
more complicated than those needed when utility is transferable. One implication of
the absence of transfers is that the relationship between complementarity and assortativeness is weakened (cf., Becker and Murphy, 2000). Consider the case where
#(w, x) ¼ #w(w) þ #x(x) and f(w,x) ¼ fw(w) þ fx(x) such that there is no complementarity. If #x(x0 ) > #x(x) and fw(w0 ) > fw(w) agents will nevertheless assortatively
match (assuming, as maintained above, that l(ei,x0 ) and l(ei,x) are identically distributed
and similarly for r(w0 ,n j) and r(w,n j)).
When agents make transfers to one another the equilibrium assignment is (i) generically unique and (ii) surplus maximizing.39 In the absence of transfers neither of these
two conditions typically holds. Multiplicity of equilibria complicate empirical modelling. These considerations suggests that the recovery of agent preferences from match
characteristics alone is likely to be even more difficult than in the case with transfers.
38

39

Stability also requires that each matched agent prefer their assignment to the always available alternative of not
matching at all. For simplicity assume that this condition holds in what follows.
If externalities are present, as in Baccara, Imrohoroglu, Wilson and Yariv (2009), then multiple equilibria are possible
even when transfers between agents are allowed.

1025

1026

Bryan S. Graham

While identification in two-sided matching problems without transfers has not been
formally studied, several papers have implemented different estimation procedures.
These papers make various simplifying assumptions. Loeb, Boyd, Lankford and
Wyckoff (2003) rule out multiplicity by assuming the status quo assignment is the
product of the Gale and Shapley (1962) deferred acceptance algorithm (with firms
proposing). Gordon and Knight (2009), in contrast, restrict preferences to ensure
uniqueness. Srensen (2007) and Logan, Hoff and Newton (2008) use Bayesian methods. The latter paper attempts to sidestep the issue of multiplicity by choosing the distribution of firm and worker utilities to maximize the probability that the observed
assignment is stable. Unfortunately it seems likely that ‘the’ maximizing distribution
of preferences is not unique, particularly if the matching market is small.

4.5 Estimation on the basis of match characteristics alone
Variants of the simple two-sided conditional logit model outlined in Section 4.2
underlie a growing body of empirical work. In an early application Dagsvik, Brunborg
and Flaaten (2001) fit the model with population register data from Norway. Their
point estimates suggest substantial decline in the net returns to marriage over the
1986 to 1994 period. Chiappori, Salanié and Weiss (2010) use another variant of
the model to study changes in the ‘returns’ to education on the U.S. marriage market
since the 1970s. Siow (2008) studies the effects of sex ratio imbalances generated by a
famine associated with the ‘Great Leap Forward’ on the marriage market in Sichuan,
China.
These applications notwithstanding, a systematic approach to inference in the CS
model has yet to be developed. Fortunately the close connection between the model
and a K  L contingency table, suggests that the development of the required estimation and inference theory is likely to be straightforward. Indeed some of the required
results are provided in Siow (2009) and Galichon and Salanié (2009). Some additional
results, based on its pairwise logit representation, are given below.
When firm and worker preferences are not parametrically specified an estimator
based on Theorem 4.1 can be used. This leads to a simple rank regression estimator.
The asymptotic properties of rank regression are well-known (Han, 1987; Cavanagh
and Sherman, 1998). The lack of point identification in the matching context results
in some inferential challenges. These may be solved using methods recently developed
for models defined by moment inequalities (e.g., Rosen, 2008; Andrews and Soares,
2010; Romano and Shaikh, 2010).
4.5.1 Testing for supermodularity
Siow (2009) exploits methods developed for contingency table analysis to test for
super-modularity of the match surplus function. Assessing this hypothesis has been
a focus of empirical research since Becker (1973). Equation (62) shows that the

Econometric Methods for the Analysis

two-sided conditional logit model equates average local complementarity (ALC) with
local dependence as measured by the local log-odds ratio:


rkþ1lþ1 rkl
dkþ1lþ1  dkþ1l  ½dklþ1  dkl 
ln
¼
; k ¼ 1; . . . ; K  1; l ¼ 1; . . . ; L  1:
rkþ1l rklþ1
sl þ sr
Positivity of all (K  1) (L  1) of these local log odds ratios implies that d(w,x) exhibits ‘increasing differences’ or is supermodular (Topkis, 1998). Assessing the supermodularity hypothesis therefore corresponds to a multivariate one-sided testing problem
of the type first studied by Kudo (1963).40 The supermodularity null corresponds to
H0 : dkþ1lþ1  dkþ1l  ½dklþ1  dkl  > 0;

k ¼ 1; . . . ; K  1; l ¼ 1; . . . ; L  1;

with the alternative that the inequality is weak or reversed for at least one k and l pair.
Siow (2009) notes that this null is formally equivalent to testing whether a K  L contingency table is totally positive of order 2 (TP2) (cf., Douglas et al. 1990):
H0 : lnðrkþ1lþ1 Þ  lnðrkþ1l Þ  ½lnðrklþ1 Þ  lnðrkl Þ > 0; k ¼ 1; . . . ; K  1; l ¼ 1; . . . ; L  1:
ð81Þ
Siow (2009) conceptualizes his data as a N draw random draws from a multinomial
population with the probabilities for each match type given by the K  L assignment
matrix RWX introduced in Section 3.1 above. This allows him to form a likelihood
ratio statistic for the supermodularity null. Unfortunately the sampling distribution of
this statistic is not w2 (it follows a ‘chi-bar-square’ distribution). Dardanoni and Forcina
(1998) describe how to compute critical values.
4.5.2 Parametric modeling of average match surplus
Recall the f ¼ Mb parameterization for the ALC terms proposed by Galichon and
Salanié (2009) and discussed in Section 4.3 above. From (62) we have, after imposing
the scale normalization sl þ sr ¼ 1, the equality


rmn rkl
ln
¼ fmnkl :
rml rkn
The left-hand-side of this expression is consistently estimable from a random sample
of matches (with a asymptotic sampling variance that is also consistently estimable).
Galichon and Salanié (2009) then suggest estimating the structural parameters b in a
second step by minimum distance (e.g., Chamberlain 1982, 1984).41 To be precise
40

41

The Silvapulle and Sen (2005) monograph summarizes the extensive statistics literature on this, and related, testing
problems.
Section 5.2 of their paper also introduces an alternative moment matching estimator.

1027

1028

Bryan S. Graham

^ be vector of all estimated local odds ratios and V^ an estimate of their asymptotic
let f
sampling variance. An efficient minimum distance estimator is

0

 

1 
1 ^
^  Mb V^ 1 f
^  Mb ¼ M 0 V^ 1 M
^ ¼ arg min f
:
M 0 V^ f
b
b

4.5.3 Pairwise logit estimation
An alternative to minimum distance estimation is the pairwise logit procedure
introduced in Section 4.3. The ‘one step’ nature of the pairwise logit procedure is
attractive, as is its direct connection to the pairwise stability concept emphasized by
Fox (2009a,b). In very large datasets, however, the minimum distance approach may
be preferable for computational reasons (since it requires no nonlinear optimization).
A comparison of the asymptotic properties of the two procedures is beyond the scope
of this chapter.
Recall the suggested criterion function
N X
n
o
X
2
LN ðbÞ ¼
j Sij j Sij A0ij Mb  ln ½1 þ exp ðSij A0ij MbÞ :
ð82Þ
N ðN  1Þ i¼1 j<i
Let

"

#
)


1ðSij ¼ 1Þ 
 Wi ; Xi ;
1 þ exp ðA0ij Mb0 Þ 

(
0

sðZi ; b0 Þ ¼ E j Sij j M Aij

exp ðA0ij Mb0 Þ

with O0 ¼ E½sðZi ; b0 ÞsðZi ; b0 Þ0  and
(
)
0
N X
X
exp
ðA
Mb
Þ
2
0
ij
G0 ¼ lim M 0
j Sij j
Aij A0ij M:
N !1
N ðN  1Þ i¼1 j<i
½1 þ exp ðA0ij Mb0 Þ2
The results of Honoré and Powell (1994, 2005) yield a large sample distribution for the
minimizer of (82) equal to

pﬃﬃﬃﬃﬃ
^  b ! N ð0; L0 Þ; L0 ¼ 4G1 O0 G1 :
N b
ð83Þ
PL
0
0
0
^G
^ ¼ 4G
^ 1 O
^ 1 with
This limiting variance may be estimated by L
N

 
0
X
^ sN Zi ; b
^
^¼ 1
sN Zi ; b
O
PL
PL ;
N i¼1

for

(
sN ðZi ; bÞ ¼ M 0

(
))
N
X
exp ðA0ij MbÞ
1
;
j Sij j Aij 1ðSij ¼ 1Þ 
N  1 j¼1;j6¼ i
1 þ exp ðA0ij MbÞ

Econometric Methods for the Analysis

and

8
>
<

9


>
0
^
N X
=
exp Aij M bPL
X
2
0
0
^
G ¼ M
j Sij j h

i2 Aij Aij M:
>
>
^
:N ðN  1Þ i¼1 j<i
;
1 þ exp A0ij M b
PL

Formulating primitive regularity conditions under which (83) holds is beyond the
scope of this chapter. However to get a feel for the small sample properties of the method
Tables 4 and 5 summarize the results of a simple Monte Carlo experiment. I consider
two designs. In both cases K ¼ L ¼ 3. In the first design the ALCs take the form
fmnkl ¼ b1 ðwm  wk Þðxn  xl Þ;
with b1 ¼ 1. This implies that d(w,x) is supermodular. As a result the equilibrium
assignment, reported in Panel B of Table 4, is highly assortative.
In the second design I set
fmnkl ¼ b1 ðwm  wk Þðxn  xl Þ þ b2 f1ðwm ¼ 3; xn ¼ 3Þ  1ðwm ¼ 3; xl ¼ 3Þ
½1ðwk ¼ 3; xn ¼ 3Þ  1ðwk ¼ 3; xl ¼ 3Þg;
with b1 ¼ 1 and b2 ¼ 2. This induces a more complicated equilibrium assignment.
The upper-left-hand 2  2 portion of the assignment matrix is assortatively matched,
while the lower-right-hand 2  2 portion is anti-assortatively matched. Other features
of the two designs are summarized in Panel A of Table 4.
For both designs I draw 1000 samples of 1000 matches each from the equilibrium
assignment distributions. For each draw I estimate b by pairwise logit, form an estimated standard error, and a 95% asymptotic confidence interval. Table 5 summarizes
the results. Across both designs the pairwise logit estimates are, up to simulation error,
mean and median unbiased. Their Monte Carlo sampling distributions are also wellapproximated by the asymptotic distribution theory sketched above.
4.5.4 Pairwise maximum score estimation
Fox (2009b) studies semiparametric estimation of matching models. His criterion function is similar to the one suggested by Theorem 4.1 above. While set identification is
not generic in his set-up, it can occur. For this reason he recommends the use of subsampling methods for conducting inference (e.g., Delgado, Rodrı́guez-Poo and Wolf, 2001;
Romano and Shaikh, 2010). Fox and Bajari (2009) provide an empirical illustration.

5. SEGREGATION IN THE PRESENCE OF SOCIAL SPILLOVERS
Debates about the social costs and benefits of ‘segregation’ are present in many areas of
social policy. As a famous example consider the effect of racial segregation in schools
on academic achievement. Coleman et al. (1966), in research which helped initiate

1029

1030
Bryan S. Graham

Table 4 Pairwise logit Monte Carlo designs

Panel A: Parameterizations of Monte Carlo Designs

Design 1
Design 2

a(w)

b(x)

e(w,x)

e2(w,x)

b1

b2

(p1, p2, p3)

(q1, q2, q3)

w
w

x
x

w x
w x

–
1(w ¼ 3, x ¼ 3)

1
1

–
2

(1/3, 1/3, 1/3)
(1/3, 1/3, 1/3)

(1/3, 1/3, 1/3)
(1/3, 1/3, 1/3)

Panel B: Average Match Surplus & Equilibrium Assignment
Design 1
Average Match Surplus
W\X
1
2
3

1
3
5
7

2
5
8
11

3
7
11
15

Equilibrium Assignment
W\X
1
2
3

1
0.205
0.100
0.028

2
0.100
0.133
0.100

3
0.028
0.100
0.205

Design 2
Average Match Surplus
W\X
1
2
3

1
1
2
3

2
2
4
6

3
3
5
7

Equilibrium Assignment
W\X
1
2
3

1
0.198
0.080
0.055

2
0.080
0.088
0.165

3
0.055
0.165
0.113

NOTES: Panel A summarizes the two data generating processes. Panel B reports the average match surplus for each w and x combination as well as the equilibrium
sq
assignment, RWX . The equilibrium assignments were computed using the algorithm given in Section 6 of Galichon and Salanié (2009). These allocations are then
checked against equation (62) above.

Econometric Methods for the Analysis

Table 5 Monte Carlo results
(1)
Mean
^ (m)
b

for Pairwise Logit estimator
(2)
(3)
(4)
Median
Std. Dev.
Mean
^ (m)
^ (m)
^ (m))
b
b
ase(b

(5)
Median
^ (m))
ase(b

(6)
Coverage
(nom. 0.95)

Design 1
b1(¼ 1)

0.998

0.998

0.0667

0.0669

0.0667

0.9480

1.002
2.002

1.001
2.010

0.0723
0.1939

0.0753
0.2002

0.0751
0.2001

0.958
0.956

Design 2
b1(¼ 1)
b2(¼ 2)

NOTES: Monte Carlo results based on 1,000 samples of size N ¼ 1, 000 drawn from the two equilibrium assignments
^ðmÞ across the Monte Carlo
listed in Table 4. Columns 1 through 3 report the mean, median and standard deviation of b
^ðmÞ . Column 6
replications. Columns 4 and 5 report the mean and median estimated asymptotic standard error of b
reports the actual coverage of an asymptotic 95% confidence interval.

widespread court-ordered desegregation in the 1970s, argued that racial isolation lowered the academic achievement of black students. Despite the substantial body of
subsequent social science research, there remains widespread disagreement about the
effects of segregation in schools. The absence of a consensus opinion among social
scientists is, at least partially, due to methodological difficulties (Schofield, 1995).
This section outlines a framework for measuring the ‘equity and efficiency’ implications of segregation in the presence of social spillovers based on Graham, Imbens
and Ridder (2009b). The applied theory literature on segregation in the presence of
social spillovers is rich (see the Epple and Romano chapter in this Handbook for a
review). As in other successful applications of economic theory to real world problems,
much of this work is highly stylized. For example Benabou (1996) models agents as
binary-typed but otherwise identical (cf., Becker and Murphy, 2000). While the resulting analysis is insightful and elegant, in particular allowing for a sharp characterization
of the laissez faire assignment against which the planner’s solution may be compared, it
is not obvious how to empirically evaluate it.
Section 5.1 extends the basic set-up employed by Benabou (1996) to include unobserved individual- and neighborhood-level heterogeneity. Sections 5.2 and 5.3 then
outline two sets of estimands. The first measure the effects of global reallocations.
The second measure the effects of reallocations which only slightly perturb the status
quo. Some parametric examples are explored in Section 5.4.

5.1 Population setup
Consider a population of individuals (‘students’) indexed by i 2 I. Individuals are
binary-typed, Ti 2 {0, 1}, and heterogenous in unobserved ability, Ai. As in Section
2 I maintain an inclusive definition of type such that Ti and Ai are independent.

1031

1032

Bryan S. Graham

A second population of locations (‘classrooms’) indexed by c 2 C also exists. These
locations are where reference groups ‘reside’. Locations are also heterogenous with
their unobserved quality given by Uc. For example, teacher quality might vary across
classrooms.
Let Gi ¼ c if individual i is assigned to location c. To avoid double-subscripting
let, in an abuse of notation, Ui ¼ UGi denote the quality of individual i’s location
of residence. The assignment vector G ¼ (G1, . . . , GI)0 completely summarizes the
population assignment of individuals to groups. An individual’s peer or reference
group consists of all other individuals who reside in her location or the index set:


pðiÞ ¼ j : Gj ¼ Gi ; i 6¼ j :
An individual’s overall neighborhood environment is completely characterized by
(i) the types and abilities of her peers and (ii) her location’s quality. Let T pðiÞ ; A pðiÞ be
the vectors of individual i0 s peers’ types and abilities. Without loss of generality assume
that peers are sorted such that low types come first, followed by high types, so that
L
0
H
A pðiÞ ¼ ðA LpðiÞ ; A H
pðiÞ Þ, with A pðiÞ the ability vector for i s low type peers and A pðiÞ for
her high type peers. Collecting terms let Qi ¼ ðT pðiÞ ; A pðiÞ ; Ui Þ be an individual’s overall ‘neighborhood quality’. Observe that there are two sources of variation in unobserved neighborhood quality: (i) that due to variation in the ability structure of peers
and (ii) that due to variation in location-specific characteristics.
Graham, Imbens and Ridder (2009b) posit the existence of an individual-specific
allocation response function
Yi ðgÞ;

g 2 G;

ð84Þ

where G denotes the set of all feasible assignments; Yi(g) gives the potential outcome
for individual i associated with allocation g 2 G. Let G denote the observed assignment, then the observed outcome Yi coincides with Yi(G). To make further progress
Graham, Imbens and Ridder (2009b) impose two additional restrictions on Yi(g). First
they rule out spillovers across groups. Second they assume peers of the same type are
exchangeable within groups (i.e., equally influential).
The first assumption implies that if the two assignments g and g
~ are such that
qi ¼ ~qi , then Yi ðgÞ ¼ Yi ð~
gÞ. This implies that the allocation response function varies
with qi alone:
Yi ðgÞ ¼ Yi ðqi Þ ¼ Yi ðt pðiÞ ; a pðiÞ ; ui Þ:

ð85Þ

The second assumption implies that
Yi ðqi Þ ¼ Yi ðsi ; tNL ða LpðiÞ Þ; tNH ða H
pðiÞ Þ; ui Þ;

ð86Þ

Econometric Methods for the Analysis

P
where N ¼ NL þ NH is total group size, si ¼ N 11 j2pðiÞ Tj is the fraction of high


type peers, tNL a LpðiÞ is the vector of the first NL elementary symmetric polynomials


42
on a LpðiÞ , and tNH a H
pðiÞ is defined analogously.
Equation (86) indicates the allocation response is an individual-specific function of
peers’ types, peers’ abilities and location quality. There are three distinct sources of
unobserved heterogeneity in this setup: (i) own ability, (ii) peers’ ability and (iii) locational quality. This heterogeneity arises from two distinct populations: that of individuals and that of locations. This represents a substantial complication over a
conventional single agent econometric model. Identification arguments in such a
setting will necessarily involve restrictions on the conditional distribution of the three
sources of unobserved heterogeneity given observables.
To keep what follows simple I will assume a version of double randomization holds.
To understand the required condition consider a social planner who must assign individuals to locations. Assignment is done on the basis of the individual-level binary
characteristic. No additional individual- or location-level characteristics are used by
the planner. For simplicity assume that each location accommodates the same number
of individuals. Since the planner only acts on knowledge of Ti we may assume that
each high type individual in a group is an independent random draw from the subpopulation of high types (and likewise for low types). Groups, so formed, are randomly
assigned to a location.
Under a doubly randomized assignment mechanism individual i’s expected outcome given assignment to a group where si of her peers’ are high types is
2
3
ð ð
ð 



 Y
Yie ðSi Þ ¼ 4
Yi si ; tNL a LpðiÞ ; tNH a H
fA ðaj Þ daj 5fU ðui Þ dui : ð87Þ
pðiÞ ; ui
j2pðiÞ

Note that Yie ðsi Þ is an expectation over a product of marginals. This is because double
randomization ensures independence between own and peer ability and own ability
and location quality. Loosely speaking it rules out ‘sorting’ and ‘matching’ on unobservables. If the planner is constrained, either informationally or institutionally, to implement only double randomized allocations, then she only requires knowledge of the
distribution of Yie ðsi Þ.
Restricting counterfactual assignments to be doubly randomized is reasonable; an
econometrician cannot do social planning calculations if knowledge of individual ability and/or location quality is required. Assuming the status quo assignment is doubly
randomized is harder to motivate (outside of the important special case of experimental
42

Allowing for multiple group-sizes is straightforward but ignored here in order to keep the notation simple.

1033

1034

Bryan S. Graham

settings). Much of what follows can be extended to settings where double randomization does not hold, at least if auxiliary restrictions on the production technology are
also imposed. These extensions are important for empirical work, but substantially
complicate both the notation and analysis (see Graham, Imbens and Ridder, 2009b).
Here I wish to focus on a more basic issue: that of measurement. In particular how
one can define estimands that give statistical content to the various ‘equity versus efficiency’ questions that typically arise when considering desegregation policies?

5.2 Global reallocations: the social planner’s problem
Let mH(s) denote the expected outcome for a high type individual in a group with composition s, when groups are formed according to the doubly randomized mechanism. Let mL(s) be
the corresponding expected outcome for low types. If mL ðsi Þ ¼ E½Yie ðsi Þ j Ti ¼ 0
and mH ðsi Þ ¼ E½Yie ðsi Þ j Ti ¼ 1 with Yie ðsi Þ given by (87) above, then




sN

 sN  1
mL ðsÞ ¼ mL
; mL ðsÞ ¼ mL
:
N 1
N 1
The composition weighted average
mðsÞ ¼ smH ðsÞ þ ð1  sÞmL ðsÞ;

ð88Þ

gives the expected average outcome, irrespective of type, in a group of composition s.
If the status quo is doubly randomized then
E½Yi j Si ¼ s; Ti ¼ 1 ¼ mH ðsÞ;

E½Yi j Si ¼ s; Ti ¼ 0 ¼ mL ðsÞ:

ð89Þ

Equation (89) is intuitive, perhaps even obvious, under doubly randomized assignment, but showing the equality holds formally requires some work. This is because
mH(s) and mL(s) are averages over the products of several marginal distributions: one
ability distribution for each group member and one locational quality distribution (cf.,
Graham, Imbens and Ridder, 2009b). In what follows I assume that (89) holds. In
practice other ways of identifying mH(s) and mL(s), which might involve introducing
separability assumptions of the type explored in the context of two-sided matching
models above, may be important.
Now consider a planner who, given knowledge of m(s) and the population frequency of high types, pH, chooses a distribution of group composition, FS(s), to maximize the average outcome:
ð
max mðsÞfS ðsÞds;
ð90Þ
FS ð Þ

subject to the feasibility constraint

ð
sfS ðsÞds ¼ pH :

ð91Þ

Econometric Methods for the Analysis

The problem defined by (90) and (91) is one of functional optimization. Although
in general such problems are quite difficult to solve, Graham, Imbens and Ridder
(2009b) show that the above problem has a simple solution. Before considering their
solution it is helpful to underscore why the planner’s problem is, at least on the surface,
a challenging one. Consider the case where both mH(s) and mL(s) are constant in s. This
corresponds to a complete absence of social spillovers. In this case we have the maximand in (90) equal to
ð
½smH þ ð1  sÞmL  fS ðsÞds ¼ pH mH þ ð1  pH ÞmL ;
where the equality follows by substituting in the feasibility constraint (91). In the
absence of social spillovers the average outcome is invariant across all feasible assignments. For the assignment problem to be interesting we require the presence of social
spillovers. The presence of such spillovers also makes the planner’s problem non-trivial.
This is because the form of the social spillover is left nonparametric.
It is helpful to begin by analyzing the planner’s problem under two special cases: (i)
m(s) is globally concave and (ii) m(s) is globally convex (i.e., rssm(s) is respectively less
than and greater than zero for all s 2 [0, 1]). These two cases are the focus of an extensive applied theory literature on multi-community models (e.g., Benabou, 1993, 1996;
Becker and Murphy, 2000; de Bartolome, 1990; Durlauf 1996a,b, 2004; Epple and
Romano, 1998; Fernández, 2003).
When m(s) is globally concave Jensen’s inequality implies that
mðpH Þ  EFS ½mðSÞ;
for any feasible FS( ). Since the restriction holds with equality for the degenerate distribution concentrated at pH, corresponding to the perfectly integrated assignment, global
concavity of m(s) implies that integration maximizes the average outcome.
If m(s) is globally convex, then a mean value expansion and the feasibility constraint
(91) gives
  pH Þ2 ;
EFS ½mðSÞ ¼ mðpH Þ þ EFS ½rss mðSÞðS
for S an intermediate value between S and pH. Convexity of m(s) yields the upper and
lower bounds
mðpH Þ þ min rss mðsÞ
s2½0;1

VFS ðSÞ  EFS ½mðSÞ  mðpH Þ þ max rss mðsÞ
s2½0;1

VFS ðSÞ:

These bounds are maximized at the most dispersed distribution on [0, 1] with mean pH.
This distribution, which corresponds to the perfectly segregated assignment, places a
mass of pH on one and a mass of 1  pH on zero. Global convexity of m(s) therefore

1035

Bryan S. Graham

implies that segregation maximizes the average outcome. Figure 1 illustrates the planner’s solution when m(s) is convex or concave.
The difficult case corresponds to situations where rssm(s) may change signs on
[0, 1]; that is where m(s) is neither concave or convex. Let M(s) be the concave envelope of m(s). Formally M(s) is a function whose truncated lower epigraph coincides
with the convex hull of the truncated lower epigraph of m(s) (e.g., Rockafellar,
Panel A.2

0.8

mH (s) and mL(s)

mH (s) and mL(s)

Panel A.1

0.6
0.4
0.2

0.4
0.3
0.2
0.1
0.0

0.0
0.0

0.2

0.4

0.6

0.8

0.0

1.0

0.2

0.4

0.6

0.2

0.5

h(s) and h(s) + l(s)

h(s) and h(s) + l(s)

1.0

Panel B.2

Panel B.1

0.6

0.8

s

s

0.4
0.3
0.2
0.1
0.0
0.0

0.2

0.4

0.6

0.8

1.0

0.0
−0.2
−0.4
−0.6
0.0

0.2

0.4

0.6

s

0.8

Panel C.2

0.5

C

0.8

C

0.4

A

m(s)

M(s)

0.6

1.0

s

Panel C.1

1.0

m(s)

1036

0.4

m(s)

0.2

A

0.3

m(s) = M(s)
0.2
0.1

B

B

0.0
0.0

0.2

0.4

0.6

s

0.8

1.0

0.0
0.0

0.2

0.4

0.6

0.8

1.0

s

Figure 1 Social planner’s assignment when m(s) is globally convex and concave.
Notes: Panel A of the figure plots the type specific group composition response functions mH(s)
(black line) and mL(s) (gray line). Panel B plots the associated (s) (solid line) and (s) þ l(s) (dashed
line) functions. The sign of these functions indicate whether a local increase in segregation at point
s would raise, respectively, movers’ and stayers’ average outcomes. Panel C plots m(s), its concave
envelope, M(s), and the maximal attainable average outcome (point A).

Econometric Methods for the Analysis

1970; Horst, Pardalos and Thoai, 2000). Intuitively it is the uniformly best concave
overestimator of m(s). If the planner could ‘produce on’ M(s), then an optimal assignment, by virtue of concavity, would be the perfectly integrated one. This assignment
would yield an average outcome of M(pH). This observation yields the following
inequality on the planner’s maximand
EFS ½mðSÞ  MðpH Þ;
for any feasible FS( ). Now let sL and sU be the first points respectively below and above
pH where m(s) and its envelope coincide:
sL ¼ max fs : 0  s  pH ; MðsÞ ¼ mðsÞg
sU ¼ min fs : pH  s  1; MðsÞ ¼ mðsÞg:
Since M(s) is linear on the interval [sL, sU] the upper bound on the maximand is
attained by the assignment
8 pH  sL
s < sU
>
>
< sU  sL L
opt
:
FS ðsÞ ¼ ð1  pÞ1ðs  sL Þ þ p1ðs  sU Þ; p ¼
1
>
>
sL ¼ sU
: 2
Panels C.1 & C.2 of Figure 2 illustrate the planner’s solution. In the figures point A
corresponds to (pH, M(pH)). To achieve this bound the planner forms two types of
groups. The first has a fraction of high types equal to the s-axis value of point B in
the figure, corresponding to sL; the second the s-axis value of point C, corresponding
to sU. The feasibility constraint determines the relative frequency of the two types of
groups. It is then not hard to see that the average outcome associated with this assignment is equal to M(pH). Since M(pH) is an upper bound to the planner’s objective function this assignment is indeed an optimal one.
With the planner’s solution characterized we can define the maximum change in
the average outcome available via reassignment as
bmre ¼

1
½ðsU  pH Þ mðsL Þ þ ðpH  sL Þ mðsU Þ  E½Y :
sU  sL

ð92Þ

Given knowledge of the extreme points of the concave envelope of m(s) the maximum reallocation effect is straightforward to compute. Unfortunately finding the concave
envelope of m(s) requires knowledge of m(s) at all points on the unit interval. This requires
sq
that the status quo assignment, FS ð Þ, have support along the entire unit interval.
Graham, Imbens and Ridder (2009b) do not develop estimation and inference
results for bmre. Showing consistency of a simple plug in estimator should be straightforward. If mðsÞ
^ is some uniformly consistent nonparametric estimate of m(s), say the
NIP estimate used by Graham, Imbens and Ridder (2009a), then sL and sU should be
consistently estimable and hence so should bmre. Characterizing the asymptotic

1037

Bryan S. Graham

Panel A.1

Panel A.2
0.7

mH (s) and mL(s)

mH (s) and mL(s)

0.8
0.6
0.4
0.2

0.6
0.5
0.4
0.3
0.2
0.1

0.0

0.0
0.0

0.2

0.4

0.6

0.8

0.0

1.0

0.2

0.4

s

h(s) and h(s) + l(s)

h(s) and h(s) + l(s)

0.5
0.0
−0.5
−1.0
0.2

0.4

0.6

0.8

0.5
0.0
−0.5
−1.0
−1.5
0.0

1.0

0.2

0.4

0.8

A

D

0.8

m(s)

0.4

0.8

1.0

Panel C.2

1.0

C
M(s)

0.6
s

Panel C.1

0.6

1.0

1.0

s
1.0

0.8

Panel B.2

1.5

1.0

−1.5
0.0

0.6

s

Panel B.1

1.5

m(s)

1038

C
A

M(s)

0.6
0.4

m(s)

m(s)

B

0.2

0.2

D

B
0.0
0.0

0.2

0.4

0.6

s

0.8

1.0

0.0
0.0

0.2

0.4

0.6

0.8

1.0

s

Figure 2 Social planner’s assignment when m(s) is neither convex nor concave.
Notes: Panel A of the figure plots the type specific group composition response functions mH(s)
(black line) and mL(s) (gray line). Panel B plots the associated (s) (solid line) and (s) þ l(s) (dashed
line) functions. The sign of these functions indicate whether a local increase in segregation at point
s would raise, respectively, movers’ and stayers’ average outcomes. Panel C plots m(s), its concave
envelope, M(s), and the maximal attainable average outcome (point A).

sampling properties of such an estimator would be more challenging. Consider the case
^mre , which would be a function of mðs
where sL, sU and pH are known, then b
^ L Þ and
mðs
^ U Þ, would behave similarly to a nonparametrically estimated conditional mean.
When sL, sU and pH are replaced with estimates, the effects of the additional sampling
error would need to be ascertained.

Econometric Methods for the Analysis

5.3 Local reallocations: movers versus stayers
Studying the effects of small, local, reallocations on outcomes generates additional
insights. Consider the set of groups with group composition s. As before, high- and
low-type individuals in these groups are random draws from their respective subpopulations and assignment to locations is random. Now consider the following local reallocation. In half of the groups the fraction high is increased from s to s þ ds. This change is
accommodated by reducing the fraction high from s to to s – ds in the remaining groups.
Implementing this reallocation requires low type individuals in the first half of groups to
switch places with high type individuals in the second half of groups. Call the set of individuals who actually switch groups as part of the reallocation movers.
The change in average outcomes for high type movers is given by
mH ðs þ dsÞ  mH ðsÞ;

ð93Þ

while that for low type movers is given by
mL ðs  dsÞ  mL ðsÞ:

ð94Þ

The average outcome of movers will increase if the sum of (93) and (94) is positive. For
ds infinitesimally small this is equivalent to the condition
rs mH ðsÞ  rs mL ðsÞ > 0:

ð95Þ

Equation (95) is a measure of local complementarity between own and peers’ type. If, at
group composition s, high type individuals gain more from small increases in peer quality than do low type individuals, then (95) will be positive. In such situations, a high
type and a low type can raise their total expected outcome by switching groups. Note
that such a switch will often involve a ‘winner’ and a ‘loser’. For example if rsmH(s)
and rsmL(s) are both positive, then (95) implies that the outcome gain for the high
type mover exceeds the outcome loss for the low type mover.43
Those individuals who do not move as part of the reallocation, or stayers, also experience changes in expected outcomes. This is because the reallocation changes these
individuals’ peer groups. To see this note that the total change in expected outcomes,
movers and stayers inclusive, is given by
mðs þ dsÞ þ mðs  dsÞ  2mðsÞ
:
2
43

The locational sorting literature emphasizes the case where (95) is positive for all s 2 [0, 1] (e.g., Benabou, 1996). This
corresponds to assuming that own and peer types are global complements. Assuming that (i) utility is linear in the expected
outcome and (ii) that there is a functioning market for ‘seats’ or ‘residences’ in groups, this condition generates strong
incentives for sorting. Since a high type individual initially in a group with composition s gains more from moving to a
group with composition s þ ds than a low type loses from making the reverse move, high types will outbid low types for
spots in high s groups.

1039

1040

Bryan S. Graham

For ds infinitesimally small this change will be positive if
rss mðsÞ > 0:
Local convexity of m(s) implies that locally increasing segregation will raise average
outcomes. Now observe that
rss mðsÞ ¼ 2ðsÞ þ lðsÞ:

ð96Þ

for
ðsÞ ¼ rs mH ðsÞ  rs mL ðsÞ;

lðsÞ ¼ srss mH ðsÞ þ ð1  sÞrss mL ðsÞ:

The first term in (96), (s), equals the local complementarity term of (95) above. If it
is positive movers will benefit, on net, from local increases in segregation. The second
term, l(s), is what Benabou (1996) has termed ‘curvature’. The direction of the reallocation’s impact on the stayers’ average outcome depends on the relative magnitudes
of complementarity and curvature. In particular if (s) þ l(s) is negative then stayers
will be hurt, on net, by local increases in segregation. Panels B of Figures 1 and 2 plot
(s) and (s) þ l(s) for four different pairs of mH(s) and mL(s). In three of these four
examples the effects of local increases in segregation on movers and stayers are opposite signed for at least some values of s. Situations where (s) þ l(s) and (s) do not
have the same sign are of particular interest as they suggest that the private and social
returns to segregation are grossly misaligned. Even when the two terms share a common sign, there will exist a wedge between the private and social returns to sorting.
This wedge arises because movers have no incentive to internalize the effects of their
actions on stayers.
Translating the above analysis into meaningful estimands is challenging. One
approach would involve estimating mH(s) and mL(s), as well as their first and second
derivatives, pointwise and constructing sample analogs of Figures 1 and 2. Figures of
this type would give some indication of the likely effects of small increases in segregation at various values of s. This approach is conceptually simple, but would likely result
in noisy inferences (e.g., the maximal feasible rate of convergence for l(s) would be
that of a one dimensional second derivative). Graham, Imbens and Ridder (2009b)
propose an alternative method. They introduce a family of feasible reallocations that
involves perturbing the group composition distribution across its entire support. They
then study the effects of such reallocations on average outcomes and inequality. They
focus on the case where the resulting reallocation becomes vanishingly close to the status quo. While this approach has obvious limitations it does lead to an intuitive estimand and a tractable estimator (which converges at the normal parametric rate).
Their approach is most likely to be informative about the effects of modest changes
in the degree of segregation or integration.

Econometric Methods for the Analysis

Decompose the derivative of m(s) as
rs mðsÞ ¼ pðsÞ þ eðsÞ;
with
pðsÞ ¼ mH ðsÞ  mL ðsÞ;

eðsÞ ¼ srs mH ðsÞ þ ð1  sÞrs mL ðsÞ:

The first term, p(s), captures the private, or compositional effect, of a small change in
group composition on the average outcome. The second term, e(s), in an external
effect. It captures the effect of changes in group composition on the outcomes of
stayers.
Now consider implementing a reallocation of the following form
DSc ¼ lðSc  pH;k Þ  dk ðSc Þ;

l>0

ð97Þ

with dk(s) ¼ 1 (s > k) 1 (s < 1  k) for some k 2 (0, 1) and pH;k ¼ E½Ti j dk ðSi Þ ¼ 1.
This allocation takes high type individuals in predominately low type groups and
switches them with low type individuals in predominately high type groups. The function dk(Sc) excludes groups with compositions close to zero or one from the reallocation. This ensures that, for small enough l, (97) is feasible. The dk(s) also serves as a
fixed trimming device for estimation purposes.
Graham, Imbens and Ridder (2009b) show that the sign of the effect on average
outcomes from implementing (97) in the limit where l approaches zero coincides with
the sign of
blsoe ¼ E½dk ðSi Þrs mðSi ÞðSi  pH;k Þ:

ð98Þ

They term blsoe the local segregation outcome effect (LSOE). The form of blsoe is intuitive.
If rsm(Si) tends to be larger for Si < pH,k, then increasing segregation should lower
average outcomes. This is because the returns to group composition are highest in
those groups that have few high types. Increasing segregation therefore involves taking
high types away from groups where the return to their presence is highest.
The LSOE can be broken down into the two components
almse ¼ E½dk ðSi ÞpðSi ÞðSi  pH;k Þ
alsse ¼ E½dk ðSi ÞeðSi ÞðSi  pH;k Þ;
with blsoe ¼ almse þ alsse. The signs of almse and alsse respectively coincide with the
signs of the reallocation’s effect on the average outcomes of movers and stayers. To
show this Graham, Imbens and Ridder (2009b) provide the following representations
almse ¼ pk VðSi j dk ðSi Þ ¼ 1Þ  E½oðSi ÞðSi Þ j dk ðSi Þ ¼ 1
alsse ¼ pk VðSi j dk ðSi Þ ¼ 1Þ  E½oðSi ÞfðSi Þ þ lðSi Þg j dk ðSi Þ ¼ 1;

1041

1042

Bryan S. Graham

for pk ¼ E½dk ðSi Þ and o(Si) a mean one weight function. That is almse is equal to a
weighted average of the local complementarity measure (s). Recall that it is the sign
of (s) that determines whether movers gain from local increases in segregation in
the neighborhood of s. A weighted average of these local measures gives the overall
direction of implementing (97) on movers. Likewise alsse is equal to a weighted average
of (s) þ l(s), the sign of which determines the effect of local increases in segregation
on stayers’ average outcomes.
Under random sampling analog estimation of blsoe is straightforward; rsm(Si) may
be estimated by differentiating the Nadarya-Watson kernel regression estimate of
^lsoe
m(Si) and pH,k by the trimmed sample mean of Ti. With these estimates in hand b

is given by the sample analog of (98) after replacing rsm(Si) and pH,k with their estimates. Characterizing the limiting distribution of the resulting estimator is more
involved. Graham, Imbens and Ridder (2009b) derive the appropriate influence function and show how to properly take into account the group-structure of the data when
conducting inference.
Policy debates which touch on issues of segregation often center on its implications
for inter-type inequality. Graham, Imbens and Ridder (2009b) show that the sign of
the effect of a local increase in segregation on inter-type inequality is given by
"
#
d
ðS
Þ
k
i
blsie ¼ E
fmH ðSi Þ þ Si rs mH ðSi ÞgðSi  pH;k Þ
pH
"
#
dk ðSi Þ
E
fmL ðSi Þ þ ð1  Si Þrs mL ðSi ÞgðSi  pH;k Þ :
1  pH

They call blsie the local segregation inequality effect (LSIE). As with the LSOE they
propose an analog estimator and characterize its large sample properties.

5.4 Parametric examples
Empirical work on the socioeconomic effects of segregation generally assumes parametric forms for mH(s) and mL(s). This section evaluates several widely-used parametric
models in light of the material reported in Sections 5.2 and 5.3 above.
Perhaps the most common empirical peer effects model is the linear-in-means
one analyzed by Manski (1993). A reduced form version of this model amounts to
assuming that
mH ðsÞ ¼ aH þ bs;

mL ðsÞ ¼ aL þ bs:

This model restricts the marginal effect of group composition to be the same for high and
low type individuals. Since rs mH(s) ¼ rs mL(s) ¼ b and rss mH(s) ¼ rss mL(s) ¼ 0 thismodel implies that the LSOE is zero by construction. All assignments lead to the same

Econometric Methods for the Analysis

average outcome. The model does allow for segregation to generate inequality. The
LSIE, for example, equals
blsie ¼ VðSi Þ 

2b
;
pH ð1  pH Þ

where, to simplify the expression, I set k ¼ 0 such that dk(s) ¼ 1. Note that segregation
always increases inequality (if b > 0). Although the linear-in-means model is widelyused (e.g., Graham, 2008) it is clearly inappropriate for studying the effects of alternative assignments to groups.
A slight generalization of the linear-in-means model allows the return to group
composition to vary by type. This model is frequently employed in analyses of the
effects of racial segregation on student achievement (e.g., Schofield, 1995; Angrist
and Lang, 2004; Guryan, 2004; Card and Rothstein, 2007). We have
mH ðsÞ ¼ aH þ bH s
mL ðsÞ ¼ aL þ bL s:
This model, while more flexible than the linear-in-means one, also rules out curvature
by construction: l(s) ¼ 0. This means that the interests of movers and stayers are perfectly aligned. This is an important limitation given the focus on inefficient segregation
in theoretical work.
In this model the LSOE equals
blsoe ¼ VðSi Þ  2ðbH  bL Þ:
Note that the sign of blsoe coincides with the sign of bH  bL. Features of the status
quo group composition distribution cannot alter the LSOE’s sign. The LSIE effect is
given by


ð1  pH ÞbH þ pH bL
blsie ¼ VðSi Þ  2
:
pH ð1  pH Þ
As with the outcome effect, the direction of the effect of local increases in segregation
on inter-type inequality is independent of the status quo.
A simple parametric model that allows for curvature is the ‘quadratic-in-means’
model:
mH ðsÞ ¼ aH þ bH s þ gH s2
mL ðsÞ ¼ aL þ bL s þ gL s2 :
In this model complementarity equals (s) ¼ (bH  bL)  (gH  gL) s and curvature is
given by l(s) ¼  [s gH þ (1  s) gL]. Global complementarity is not assumed a priori
and the model is flexible enough to allow for a misalignment between the interests of
movers and stayers (see Figures 1 and 2 above for examples).

1043

1044

Bryan S. Graham

The LSOE in this model is given by
h
h
i
i
blsoe ¼ VðSi Þ  2ðbH  bL þ gL Þ þ 2pH þ VðSi Þ1=2 SðSi Þ  3ðgH  gL Þ ;
where SðSi Þ is the skewness of Si. Note that features of the status quo assignment
meaningfully enter the above expression. The sign of 2pH þ VðSi Þ1=2 SðSi Þ will vary
sq
depending on the form of FS ð Þ. Thus, even if the production function is the same
across two ‘societies’, the effect of small increases in segregation need not be. The
interplay between the production technology and the distribution of types in the population is a fundamental feature of assignment problems. This feature is often obscured
when simple parametric forms for the production technology are employed. It motivates the focus on nonparametric approaches throughout this chapter.

6. TREATMENT RESPONSE WITH SPILLOVERS
The conventional approach to causal inference assumes the absence of interference
between units (Holland, 1986). In practice many interventions are likely to generate
spillover effects. For example, providing college scholarships to a few students may
increase the college attendance of non-recipients within the same school. The probability of viral infection for unvaccinated individuals may vary with the fraction of their
close peers who are vaccinated (e.g., Ali et al. 2005). A common reaction to ‘interference’ among statisticians has been to treat it as a nuisance; something to be avoided by
experimental design or method of data collection (see Rosenbaum (2007) for a related
discussion). This approach is problematic since social planning requires knowledge of
the entire treatment response; inclusive of any spillover effects. This point is elegantly
made by Manski (2009a,b).
In recent work Hudgens and Halloran (2008) and Manski (2010) have developed
frameworks for analyzing treatment response in the presence of social spillovers. The
exposition here follows Manski (2010). Let i 2 I index individuals in a population
who receive treatment Ti 2 T . In the most general setup an individual’s potential outcome may vary with the entire population vector of treatment assignments. This yields
a treatment response function of
Yi ðtI Þ;

ð99Þ

where tI is one element of the Cartesian product of T across the entire population:
T I ¼ i2I T . Note the similarity, in terms of the degree of interconnectedness across
agents, with the allocation response function introduced in the previous section (equation (84) above).
Manski (2010) emphasizes two sets of restrictions on (99). The first, which he calls
constant treatment response (CTR), assumes that outcomes remain constant when tI

Econometric Methods for the Analysis

varies within specified subsets of T I . For example an individual’s outcome might only
depend on own and peers’ treatments. Reference groups may be person-specific, but
are assumed to be non-manipulable.44 The second restriction is that interactions are
distributional. This corresponds to exchangeability of peers within reference groups.
These two assumptions play roles similar to those of the no spillovers across groups
and peer exchangeability assumptions made by Graham, Imbens and Ridder (2009b).
Let ci( ) be a function mapping the population treatment vector onto a set. The
CTR assumptions is that, for treatment vectors tI and sI,
ci ðtI Þ ¼ ci ðsI Þ ) Yi ðtI Þ ¼ Yi ðsI Þ:

ð100Þ

Let Gi I be individual i’s reference group. If (99) varies only with own and peers’
treatments, then ci ðt I Þ ¼ t Gi .
Let Gi denote the leave-own-out reference group and QðtGi Þ the distribution of
treatments across i’s peers. If interactions occur only within-groups and are additionally
distributional then


ti
I
ci ðt Þ ¼
:
ð101Þ
QðtGi Þ
If the treatment is binary-valued then the within-group distribution of treatment effects
is entirely summarized by the fraction of one’s peers who are treated (implicit in Manski’s formulation of distributional interactions is that reference group size does not matter). This means that if Ti is binary (100) and (101) give
Yi ðtI Þ ¼ Yi ðti ; ti Þ:

ð102Þ

Note that, in contrast to the allocation response function introduced in the previous
section, peer unobservables do not directly enter (102). This simplification arises
because here peer groups are non-manipulable.
The law of total probability yields an identification region for P½Yi ðti ; ti Þ, the distribution of Yi ðti ; ti Þ, equal to
HfP½Yi ðti ; t i Þg ¼ fP½Yi ðti ; ti Þ j Ti ¼ ti ; T i ¼ t i  P½Ti ¼ ti ; T i ¼ ti 
þ d P½Ti 6¼ ti or T i 6¼ ti ; d 2 DY g;
where DY denotes the space of all probability distributions on Y. Manski (2010) studies
a variety of additional restrictions that may tighten HfP½Yi ðti ; t i Þg.
44

That is reference groups may be directional in the sense that i may belong to j’s reference group but not vice-versa
(i.e., reference groups may be overlapping). This differs from Graham, Imbens and Ridder (2009b) who require
that reference groups form a non-overlapping partition of the population.

1045

1046

Bryan S. Graham

Manski (2009a,b) studies social planning problems in the presence of treatment spillovers. Let ui ðti ; t i Þ ¼ ui ½Yi ðti ; t i Þ; ti ; ti  be the utility of individual i when she is assigned
treatment Ti ¼ ti and t i of her reference group receives treatment. Define
aðt i Þ ¼ E½ui ð0; t i Þ;

bðt i Þ ¼ E½ui ð1; ti Þ;

to be the average utility of a non-treated and treated individual, respectively, when ti of
reference group members are treated. For example bðt i Þ and aðti Þ might be the average
probability of infection given vaccination and non-vaccination when t i of the reference
group is vaccinated. Assume that bðt i Þ adjusts for the cost of vaccination as well as any
vaccine side-effects.
What fraction of the reference group should be vaccinated? The planner’s criterion
function is
W ðti Þ ¼ ð1  t i Þaðt i Þ þ ti bðt i Þ:

ð103Þ

If the vaccine is fully effective, then bðt i Þ ¼ b. Assume further that spillovers onto the
untreated are linear
aðti Þ ¼ ð1  t i Þa0 þ t i a1 :
Under these assumptions Manski (2009a) shows that the optimal vaccine rate is



1 1 b þ a0
ti ¼ max 0; min þ
;1 :
2 2 a1  a0
Knowledge of the structure of any treatment spillovers, in this case, a0 and a1, is
required to implement this rule. Manski (2009a,b) also studies social planning under
ambiguity. The point I wish to make here is that social planning requires knowledge
of the external effect.

7. AREAS FOR FURTHER RESEARCH
Several areas touched on in this chapter merit further study. Developing identification
results and estimation methods for nontransferable utility matching models is one. Since
the set of stable matchings can be large it seems likely that the parameters of these models
will be set identified in absence of additional restrictions on the matching mechanism.
Results for more complex matching structures, such as those with one-to-many and
many-to-many matching, are also needed. Fox (2009a,b) provides some results along
these lines. Relatedly, tractable, yet microtheory-founded, econometric models of network formation would help empirical researchers in their analyses of (increasingly available) social network data (e.g., Christakis, Fowler, Imbens and Kalyanaraman, 2010).
The material surveyed above has unduly focused on restrictions which result in
point identification of the parameter of interest. The underlying economics of the class

Econometric Methods for the Analysis

of models surveyed above naturally generates partially identifying restrictions (e.g., stability inequalities). Developing results based on these restrictions would help to extend
the material surveyed above to a larger number of empirical problems.

REFERENCES
Ackerberg, D.l., Benkard, L.C., Berry, S., Pakes, A., 2007. Econometric tools for analyzing market outcomes. In: Heckman, J.J., Leamer, E.E. (Eds.), Handbook of Economics. 6A, North-Holland, Amsterdam, pp. 4171–4275.
Ali, M., et al., 2005. Herd immunity conferred by killed oral cholera vaccines in Bangladesh: a reanalysis.
Lancet 366 (9479), 44–49.
Andrews, D.W.K., Soares, G., 2010. Inference for parameters defined by moment inequalities using
generalized moment selection. Econometrica 78 (1), 119–157.
Angrist, J.D., Lang, K., 2004. Does school integration generate peer effects? Evidence from Boston’s
Metco Program. Am. Econ. Rev. 94 (5), 1613–1634.
Aradillas-López, A., Tamer, E., 2008. The identification power of equilibrium in simple games. J. Bus.
Econ. Stat. 26 (3), 261–283.
Baccara, M., Imrohoroglu, A., Wilson, A., Yariv, L., 2009. A field study on matching with network
externalities. Mimeo.
Becker, G.S., 1973. A theory of marriage: part I. J. Polit. Econ. 81 (4), 813–846.
Becker, G.S., 1974. A theory of marriage: part II. J. Polit. Econ. 82 (2.2), S11–S26.
Becker, G.S., Murphy, K.M., 2000. Social Economics: Market Behavior in a Social Environment. Harvard University Press, Cambridge, MA.
Benabou, R., 1993. Workings of a city: location, education, and production. Q. J. Econ. 108 (3),
619–652.
Benabou, R., 1996. Equity and efficiency in human capital investment: the local connection. Rev. Econ.
Stud. 63 (2), 237–264.
Berry, S., Levinsohn, J., Pakes, A., 1995. Automobile prices in market equilibrium. Econometrica 63 (4),
841–890.
Bhattacharya, D., 2009. Inferring optimal peer assignment from experimental data. J. Am. Stat. Assoc. 104
(486), 486–500.
Blume, L.E., Brock, W.A., Durlauf, S.N., Ioannides, Y.M., 2010. Identification of social interactions. this
Handbook.
Blundell, R.W., Powell, J.L., 2003. Endogeneity in nonparametric and semiparametric regression models.
In: Dewatripont, M., Hansen, L.P., Turnovsky, S.J. (Eds.), Advances in Economics and Econometrics:
Theory and Applications. II, Cambridge University Press, Cambridge, pp. 312–357.
Bose, A., 1998. Bahadur representation of Mm estimates. Ann. Stat. 26 (2), 771–777.
Bose, A., 2002. U statistics and Mm estimates. In: Misra, J.C. (Ed.), Uncertainty and Optimality: Probability, Statistics and Operations Research. World Scientific Publishing Co. Pte. Ltd, Singapore,
pp. 257–292.
Brock, W.A., Durlauf, S.N., 2001a. Discrete choice with social interactions. Rev. Econ. Stud. 68 (2),
235–260.
Brock, W.A., Durlauf, S.N., 2001b. Interactions-based Models. In: Heckman, J., Leamer, E. (Eds.),
Handbook of Econometrics. 5, North-Holland, Amsterdam, pp. 3297–3380.
Brock, W.A., Durlauf, S.N., 2007. Identification of binary choice models with social interactions.
J. Econom. 140 (1), 52–75.
Buddin, R., Zamarroa, G., 2009. Teacher qualifications and student achievement in urban elementary
schools. J. Urban Econ. 66 (2), 103–115.
Burkard, R., Mauro, D., Martello, S., 2009. Assignment Problems. Society for Industrial and Applied
Mathematics, Philadelphia.

1047

1048

Bryan S. Graham

Card, D., Rothstein, J., 2007. Racial segregation and the black–white test score gap. J. Public Econ. 91
(11–12), 2158–2184.
Carrell, S.E., Fullerton, R.L., West, J.E., 2009. Does your cohort matter? Measuring peer effects in college achievement. J. Labor Econ. 27 (3), 439–464.
Cavanagh, C., Sherman, R.P., 1998. Rank estimators for monotonic index models. J. Econom. 84 (2), 351–381.
Chamberlain, G., 1980. Analysis of covariance with qualitative data. Rev. Econ. Stud. 47 (1), 225–238.
Chamberlain, G., 1982. Multivariate regression models for panel data. J. Econom. 18 (1), 5–46.
Chamberlain, G., 1984. Panel data. In: Griliches, Z., Intriligator, M.D. (Eds.), Handbook of Econometrics. 2, North-Holland, Amsterdam, pp. 1247–1318.
Chamberlain, G., 2009. Bayesian aspects of treatment choice. Mimeo.
Chamberlain, G., 2010. Binary response models for panel data: identification and information. Econometrica 78 (1), 159–168.
Chiappori, P.A., Oreffice, S., 2008. Birth control and female empowerment: an equilibrium analysis.
J. Polit. Econ. 116 (1), 113–139.
Chiappori, P.-A., Salanie, B., Weiss, Y., 2010. Partner choice and the marital college premium. Mimeo.
Choo, E., Siow, A., 2006a. Who marries whom and why. J. Polit. Econ. 114 (1), 175–201.
Choo, E., Siow, A., 2006b. Estimating a marriage matching model with spillover effects. Demography 43
(3), 463–490.
Coleman, J.S., et al., 1966. Equality of Educational Opportunity. Department of Health, Education and
Welfare, Washington, U.S.
Crawford, V.P., Knoer, E.M., 1981. Job matching with heterogeneous firms and workers. Econometrica
49 (2), 437–450.
Christakis, N., Fowler, J., Imbens, G.W., Kalyanaraman, K., 2010. An empirical model for strategic
network formulation. Mimeo.
Dagsvik, J.K., 2000. Aggregation in matching markets. Int. Econ. Rev. (Philadelphia) 41 (1), 27–57.
Dagsvik, J.K., Brunborg, H., Flaatten, A.S., 2001. A behavioral two-sex marriage model. Math. Popul.
Stud. 9 (2), 97–121.
Dardanoni, V., Forcina, A., 1998. A unified approach to likelihood inference on stochastic orderings in a
nonparametric context. J. Am. Stat. Assoc. 93 (443), 1112–1123.
de Bartolome, Charles, A.M., 1990. Equilibrium and inefficiency in a community model with peer group
effects. J. Polit. Econ. 98 (1), 110–133.
Debreu, G., 1960. Review of ‘Individual Choice Behavior: A Theoretical Analysis’ by R. Duncan Luce.
Am. Econ. Rev. 50 (1), 186–188.
Delgado, M.A., Rodrı́guez-Poo, J.M., Wolf, M., 2001. Subsampling inference in cube root asymptotics
with an application to Manski’s maximum score estimator. Econ. Lett. 73 (2), 241–250.
Domencich, T.A., McFadden, D., 1975. Urban Travel Demand: A Behavioral Analysis. North Holland,
Amsterdam.
Douglas, R.E.F., Lee, M.T., Sampson, A.R., Whitaker, L.R., 1990. Positive dependence concepts for
ordinal contingency tables. In: Block, H.W., Sampson, A.R., Savits, T.H. (Eds.), Topics in statistical
dependence. Institute of Mathematical Statistics, Hayward, CA, pp. 189–202.
Durlauf, S.N., 1996a. Neighborhood feedbacks, endogenous stratification, and income inequality. In:
Barnett, W.A. et al., (Ed.), Dynamic Disequilibrium Modeling. Cambridge University Press,
Cambridge, pp. 505–534.
Durlauf, S.N., 1996b. A theory of persistent income inequality. J. Econ. Growth 1 (1), 75–93.
Durlauf, S.N., 1996c. Associational redistribution: a defense. Polit. Soc. 24 (4), 391–410.
Durlauf, S.N., 2004. Neighborhood effects. In: Henderson, J.V., Thisse, J.F. (Eds.), Handbook of
Regional and Urban Economics. 4, North-Holland, Amsterdam, pp. 2173–2242.
Echenique, F., Lee, S.M., Shum, M., 2010. Aggregate matchings. California Institute of Technology
Social Sciences Working Paper 1316.
Eckstein, Z., Wolpin, K.I., 1990. Estimating a market equilibrium search model from panel data on individuals. Econometrica 58 (4), 783–808.
Edelman, B., Ostrovsky, M., Schwarz, M., 2007. Internet advertising and the generalized second-price
auction: selling billions of dollars worth of keywords. Am. Econ. Rev. 97 (1), 242–259.

Econometric Methods for the Analysis

Epple, D., Romano, R., 1998. Competition between private and public schools, vouchers, and peergroup effects. Am. Econ. Rev. 88 (1), 33–62.
Epple, D., Romano, R., 2010. Peer effects in education: a survey of the theory and evidence. this Handbook.
Fernandez, J.C., 1992. Soldier quality and job performance in team tasks. Soc. Sci. Q. 73 (2), 253–265.
Fernández, R., 2003. Sorting, education and inequality. In: Dewatripont, M., Hansen, L.P.,
Turnovsky, S.J. (Eds.), Advances in Economics and Econometrics: Theory and Applications, Eighth
World Congress. 2, Cambridge University Press, Cambridge, pp. 1–40.
Ferreyra, M.M., 2007. Estimating the effects of private school vouchers in multidistrict economies. Am.
Econ. Rev. 97 (3), 789–817.
Flinn, C.J., 2006. Minimum wage effects on labor market outcomes under search, matching, and endogenous contact rates. Econometrica 74 (4), 1013–1062.
Fox, J.T., 2009a. Identification in matching games. Mimeo.
Fox, J.T., 2009b. Estimating matching games with transfers. Mimeo.
Fox, J.T., 2009c. Semiparametric estimation of multinomial discrete-choice models using a subset of
choices. Rand J. Econ. 38 (4), 1002–1019.
Fox, J.T., Bajari, P.k., 2009. Measuring the efficiency of an FCC spectrum auction. Mimeo.
Gale, D., 1960. The Theory of Linear Economic Models. McGraw-Hill Book Company, New York.
Gale, D., Shapley, L.S., 1962. College admissions and the stability of marriage. Am. Math. Mon. 69 (1),
9–15.
Galichon, A., Salanié, B., 2009. Matching with trade-offs. Mimeo.
Glaeser, E., Scheinkman, J., 2001. Measuring social interactions. In: Durlauf, S., Young, P. (Eds.), Social
Dynamics. MIT Press, Cambridge, MA, pp. 83–130.
Glaeser, E., Scheinkman, J.A., 2003. Nonmarket interactions. In: Dewatripont, M. (Ed.), Advances in
Economics and Econometrics: Theory and Applications, Eighth World Congress. 1, Cambridge
University Press, Cambridge, pp. 339–369.
Goeree, J.K., Holt, C.A., Palfrey, T.R., 2005. Regular quantal response equilibrium. Experimental Economics 8 (4), 347–367.
Goodman, L.A., 1979. Simple models for the analysis of association in cross-classifications having ordered
categories. J. Am. Stat. Assoc. 74 (367), 537–552.
Gordon, N., Knight, B., 2009. A spatial merger estimator with an application to school district consolidation. J. Public Econ. 93 (5–6), 752–765.
Graham, B.S., 2008. Identifying social interactions through conditional variance restrictions. Econometrica 76 (3), 643–660.
Graham, B.S., Ridder, G., Imbens, G.W., 2007. The effect of reallocating an indivisible input with
discrete values. Mimeo.
Graham, B.S., Ridder, G., Imbens, G.W., 2009a. Complementarity and aggregate implications of assortative matching: a nonparametric analysis. Mimeo.
Graham, B.S., Ridder, G., Imbens, G.W., 2009b. Measuring the average outcome and inequality effects of
segregation in the presence of social spillovers. Mimeo.
Griliches, Z., Mairesse, J., 1998. Production functions: the search for identification. In: Strm, S. (Ed.),
Econometrics and Economic Theory in the 20th Century: The Ragnar Frisch Centennial Symposium.
Cambridge University Press, Cambridge, pp. 169–203.
Guryan, J., 2004. Desegregation and black dropout rates. Am. Econ. Rev. 94 (4), 919–943.
Han, A.K., 1987. Non-parametric analysis of a generalized regression model: The maximum rank correlation estimator. J. Econom. 35 (2–3), 303–316.
Hatfield, J.W., Milgrom, P.R., 2005. Matching with contracts. Am. Econ. Rev. 95 (4), 913–935.
Heckman, J.J., Vytlacil, E.J., 2007a. Econometric evaluation of social programs, part I: causal models,
structural models and econometric policy evaluation. In: Heckman, J.J., Leamer, E.E. (Eds.), Handbook of Econometrics, vol. 6. (2), North-Holland, Amsterdam, pp. 4779–4874.
Heckman, J.J., Vytlacil, E.J., 2007b. Econometric evaluation of social programs, part II: using the marginal
treatment effect to organize alternative econometric estimators to evaluate social programs, and to forecast their effects in new environments. In: Heckman, J.J., Leamer, E.E. (Eds.), Handbook of Econometrics, vol. 6. (2), North-Holland, Amsterdam, pp. 4875–5143.

1049

1050

Bryan S. Graham

Holland, P.W., 1986. Statistics and causal inference. J. Am. Stat. Assoc. 81 (396), 945–960.
Honoré, B.E., Powell, J.L., 1994. Pairwise difference estimators of censored and truncated regression
models. J. Econom. 64 (1–2), 241–278.
Honoré, B.E., Powell, J.L., 2005. Pairwise difference estimators for nonlinear models. In: Andrews, D.W.
K., Stock, J.H. (Eds.), Identification and Inference for Econometric Models. Cambridge University
Press, Cambridge, pp. 520–553.
Horst, R., Pardalos, P.M., Thoai, N.V., 2000. Introduction to Global Optimization, second ed. Kluwer
Academic Publishers, Dordrecht.
Huber, P.J., 1964. Robust estimation of a location parameter. Annals of Mathematical Statistics 35 (1),
73–101.
Hudgens, M.G., Halloran, E., 2008. Toward a causal inference with interference. J. Am. Stat. Assoc. 103
(482), 832–842.
Imbens, G.W., 2007a. Nonadditive models with endogenous regressors. In: Blundell, R., Newey, W.,
Persson, T. (Eds.), Advances in Economics and Econometrics: Theory and Applications, Ninth World
Congress. III, Cambridge University Press, Cambridge, pp. 17–46.
Imbens, G.W., 2007b. What’s News in Econometrics?. Unpublished lecture notes.
Imbens, G.W., Ridder, G., 2009. Estimation and inference for generalized full and partial means and average derivatives. Mimeo.
Jacob, B.A., Lefgren, L., 2007. What do parents value in education? An empirical investigation of parents’
revealed preferences for teachers. Q. J. Econ. 122 (4), 1603–1638.
Kelso, A.S., Crawford, V.P., 1982. Job matching, coalition formation, and gross substitutes. Econometrica
50 (6), 1483–1504.
Koopmans, T.C., Beckmann, M., 1957. Assignment problems and the location of economic activities.
Econometrica 25 (1), 53–76.
Kremer, M., 1997. How much does sorting increase inequality? Q. J. Econ. 112 (1), 115–139.
Kremer, M., Maskin, E., 1996. Wage inequality and segregation by skill. NBER Working Paper No. W5718.
Kudo, A., 1963. A multivariate analogue of the one-sided test. Biometrika 50 (3–4), 403–418.
Lankford, H., Loeb, S., Wyckoff, J., 2003. Teacher sorting and the plight of urban schools: a descriptive
analysis. Educ. Eval. Policy Anal. 24 (1), 37–62.
Lee, L., 1995. Semiparametric maximum likelihood estimation of polychotomous and sequential choice
models. J. Econom. 65 (2), 381–428.
Lehmann, E.L., 1966. Some concepts of dependence. Annals of Mathematical Statistics 7 (5), 1137–1153.
Legros, P.k., Newman, A.F., 2002. Monotone matching in perfect and imperfect worlds. Rev. Econ.
Stud. 69 (4), 925–942.
Loeb, S., Boyd, D., Lankford, H., Wyckoff, J., 2003. Analyzing determinants of the matching of public
school teachers to jobs: estimating compensating differentials in imperfect labor markets. NBER
Working Paper 9878.
Logan, J.A., 1998. Estimating two-sided logit models. Sociol. Methodol. 28 (1), 139–173.
Logan, J.A., Hoff, P.D., Newton, M.A., 2008. Two-sided estimation of mate preferences for similarities in
age, education, and religion. J. Am. Stat. Assoc. 103 (482), 559–569.
Loury, G.C., 1977. A dynamic theory of racial income differences. In: Wallace, P.A., LaMond, A. (Eds.),
Women, Minorities and Employment Discrimination. Lexington Books, Lexington, MA,
pp. 153–186.
Loury, G.C., 2002. The Anatomy of Racial Inequality. Harvard University Press, Cambridge, MA.
Luenberger, D.G., 1969. Optimization by Vector Space Methods. John Wiley & Sons, New York.
Luenberger, D.G., 2005. Linear and Nonlinear Programming, second ed. Springer, New York.
Matzkin, R.L., 2007. Heterogenous choice. In: Blundell, R., Newey, W., Persson, T. (Eds.), Advances in
Economics and Econometrics: Theory and Applications. III, Cambridge University Press, Cambridge,
pp. 75–110.
Manski, C.F., 1975. Maximum score estimation of the stochastic utility model of choice. J. Econom. 3 (3),
205–228.
Manski, C.F., 1987. Semiparametric analysis of random effects linear models from binary panel data.
Econometrica 55 (2), 357–362.

Econometric Methods for the Analysis

Manski, C.F., 1992. Educational choice (vouchers) and social mobility. Econ. Educ. Rev. 11 (4),
351–369.
Manski, C.F., 1993. Identification of endogenous social effects: the reflection problem. Rev. Econ. Stud.
60 (3), 531–542.
Manski, C.F., 2003. Partial Identification of Probability Distributions. Springer-Verlag, New York.
Manski, C.F., 2009a. Social planning with partial knowledge of social interactions. J. Inst. Theor. Econ.
165 (1), 146–158.
Manski, C.F., 2009b. Vaccination with partial knowledge of external effectiveness. Proc. Natl. Acad. Sci.
U. S. A. 107 (9), 3953–3960.
Manski, C.F., 2010. Identification of treatment response with social interactions. Mimeo.
McFadden, D., 1974. Conditional logit analysis of qualitative choice behavior. In: Zarembka, P. (Ed.),
Frontiers in Econometrics. Academic Press, New York, pp. 105–142.
McFadden, D., 1981. Econometric models of probabilistic choice. In: Manski, C.F., McFadden, D. (Eds.),
Structural Analysis of Discrete Data with Econometric Applications. MIT Press, Cambridge, MA,
pp. 198–272.
Moffitt, R.A., 2001. Policy interventions, low-level equilibria and social interactions. In: Durlauf, S.,
Young, P. (Eds.), Social Dynamics. MIT Press, Cambridge, MA, pp. 45–82.
Mortensen, D.T., 1988. Matching: finding a partner for life or otherwise. A.J.S. 94 (Suppl.), S215–S240.
Nechyba, T.J., 2006. Income and peer quality sorting in public and private schools. In: Hanushek, E.,
Welch, F. (Eds.), Handbook of the Economics of Education. 2, North-Holland, Amsterdam,
pp. 1327–1368.
Nevo, A., 2000. A practioner’s guide to estimation of random-coefficient logit models of demand.
J. Econ. Manag. Strategy 9 (4), 513–548.
Newey, W.K., 1994. Kernel estimation of partial means and a general variance estimator. Econometric
Theory 10 (2), 233–253.
Newey, W.K., McFadden, D., 1994. Large sample estimation and hypothesis testing. In: Engle, R.F., McFadden, D.L. (Eds.), Handbook of Econometrics. 4, North Holland, Amsterdam, pp. 2111–2245.
Ostrovsky, M., 2008. Stability in supply chain networks. Am. Econ. Rev. 98 (3), 897–923.
Piketty, T., 2000. Theories of persistent inequality and intergenerational mobility. In: Atkinson, A.,
Bourguignon, F. (Eds.), Handbook of Income Distribution. 1, North Holland, Amsterdam, pp. 430–476.
Powell, J.L., 1994. Estimation of semiparametric models. In: Engle, R.F., McFadden, D.L. (Eds.), Handbook of Econometrics. 4, North Holland, Amsterdam, pp. 2443–2521.
Powell, J.L., Ruud, P.A., 2008. Simple estimators for semiparametric multinomial choice models. Mimeo.
Rockafellar, R.T., 1970. Convex Analysis. Princeton University Press, Princeton, NJ.
Romano, J.P., Shaikh, A., 2010. Inference for the identified set in partially identified econometric models.
Econometrica 78 (1), 169–211.
Rosen, A.M., 2008. Confidence sets for partially identified parameters that satisfy a finite number of
moment inequalities. J. Econom. 146 (1), 107–117.
Rosenbaum, P.R., 2007. Interference between units in randomized experiments. J. Am. Stat. Assoc. 102
(477), 191–200.
Roth, A.E., 2008. What have we learned from market design? Economic Journal 118 (527), 285–310.
Roth, A.E., Sotomayor, M., 1990. Two-Sided Matching: A Study in Game-Theoretic Modeling and
Analysis. Cambridge University Press, Cambridge.
Roth, A.E., Vate, J.H.V., 1990. Random paths to stability in two-sided matching. Econometrica 58 (6),
1475–1480.
Sattinger, M., 1980. Capital and the Distribution of Labor Earnings. Amsterdam, North-Holland.
Schofield, J.W., 1995. Review of research on school desegregation’s impact on elementary and secondary
school students. In: Banks, J.A., Banks, C.A.M. (Eds.), Handbook of Research on Multicultural Education. Macmillan Publishing USA, New York, pp. 597–616.
Shapley, L.S., Shubik, M., 1971. The assignment game I: the core. International Journal of Game Theory
1 (1), 111–130.
Shapley, L., Scarf, H., 1974. On cores and indivisibility. Journal of Mathematical Economics 1 (1), 23–37.

1051

1052

Bryan S. Graham

Siow, A., 2008. How does the marriage market clear? An empirical framework. Can. J. Econ. 41 (4),
1121–1155.
Siow, A., 2009. Testing Becker’s theory of positive assortative matching. University of Toronto, Department of Economics Working Paper 356.
Silvapulle, M.J., Sen, P.K., 2005. Constrained Statistical Inference: Inequality, Order, and Shape Restrictions. John Wiley & Sons, Inc, Hoboken, N.J.
Srensen, M., 2007. How smart is smart money? A two-sided matching model of venture capital.
J. Finance 62 (6), 2725–2762.
Topkis, Donald M., 1998. Supermodularity and Complementarity. Princeton University Press, Princeton,
NJ.
Warner, J.T., Asch, B.J., 1995. The economics of military manpower. In: Hartley, K., Sandler, T. (Eds.),
Handbook of Defense Economics. 1, North-Holland, Amsterdam, pp. 347–398.
Weiss, Y., 1997. The formation and dissolution of families: Why marry? Who marries whom? And what
happens upon divorce. In: Rosenzweig, M.R., Stark, O. (Eds.), Handbook of Population and Family
Economics, vol. 1. (1), North-Holland, Amsterdam, pp. 81–123.
Yang, Y., Shi, M., Goldfarb, A., 2009. Estimating the value of brand alliances in professional team sports.
Marketing Science 28 (6), 1095–1111.

