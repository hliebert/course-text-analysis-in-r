Empir Econ (2010) 39:111–137
DOI 10.1007/s00181-009-0297-3
ORIGINAL PAPER

Identification of the effects of dynamic treatments
by sequential conditional independence assumptions
Michael Lechner · Ruth Miquel

Received: 4 September 2007 / Accepted: 16 March 2009 / Published online: 1 May 2009
© Springer-Verlag 2009

Abstract This paper approaches the dynamic analysis of the effects of training
programs for the unemployed in West Germany, or in general the effects of sequences
of interventions, from a potential outcome perspective. The identifying power of different assumptions concerning the connection between the dynamic selection process
and the outcomes of different sequences is discussed. When participation in the particular sequence of programs is decided period by period depending on its success
so far, many parameters of interest are no longer identified. Nevertheless, some interesting dynamic forms of the average treatment effect are identified by a sequential
randomization assumption. Based on this approach, we present some new results on
the effectiveness of West-German training programs.
Keywords Labor market effects of training programs · Dynamic treatment regimes ·
Nonparametric identification · Causal effects · Sequential randomization ·
Program evaluation · Treatment effects · Dynamic matching · Panel data

Michael Lechner has further affiliations with ZEW, Mannheim, CEPR, London, IZA, Bonn, and PSI,
London. Financial support from the Swiss National Science Foundation (grants 4043-058311 and
4045-050673) and the IAB, Nuremberg (grants 6-531A and 6-531A.1), is gratefully acknowledged. We
presented previous drafts of this paper at seminars and workshops at the Universities of Cambridge, Juan
Carlos III Madrid, Geneva, and Strasbourg, at INSEE–CREST, Paris, at IFAU in Uppsala, at the ESEM in
Lausanne, at the EC2 in Louvain-la-Neuve, and at the annual meeting of the econometrics section of the
German Economic Association in Rauischholzhausen. We thank participants for helpful comments. We
also very much appreciate comments by Bruno Crépon, Bernd Fitzenberger, Guido Imbens, Jim
Heckman, and Jeff Smith, as well as by anonymous referees. They helped to improve and simplify a
previous version of the paper considerably.
M. Lechner (B) · R. Miquel
Swiss Institute for Empirical Economic Research (SEW), University of St. Gallen,
Varnbüelstr. 14, 9000 St. Gallen, Switzerland
e-mail: Michael.Lechner@unisg.ch
URL: http://www.sew.unisg.ch/lechner

123

112

JEL Classification

M. Lechner, R. Miquel

C21 · C31 · J68

1 Introduction
The empirical and methodological literature on econometric program evaluation places
great emphasis on learning causal effects of economic interventions from empirical correlations by understanding selection processes. Many recent contributions to
this literature explicitly use a ‘causal model’ of potential outcomes that is typically
associated with Neyman (1923), Wilks (1932), Roy (1951), Cochran and Chambers
(1965), and Rubin (1974). This type of causal inference relates to the question of what
would happen in one hypothetical situation like participating in a training program,
compared to another situation like not participating in such a program. The static
treatment model is the workhorse of empirical evaluation studies (we use the term
treatment as a substitute for program or intervention to stick to the terminology of this
literature, which has strong links to statistics and biometrics). The static model is very
explicit about problems and possible solutions of selective treatment participation. It
allows the derivation of exciting results with respect to nonparametric identification
and robust estimation allowing for very general effect heterogeneity. Examples are
papers by Imbens and Angrist (1994) for the identifying power of instrumental variables, Heckman and Vytlacil (2006), and Vytlacil (2002) for nonparametric selection
models, and Rubin (1977) for the conditional independence assumption. Furthermore,
see the comprehensive surveys by Heckman and Robb (1985), Heckman et al. (1999),
and Imbens (2004), as well as the textbook by Cameron and Trivedi (2005). The static
model is, however, silent about selection that occurs while treatment is already in progress (dropout). It is also not helpful to address selection problems that occur during
a sequence of treatments when interest is in the effect of the full sequence.
Consider the problem of evaluating individual labor market effects of training programs for the unemployed. In many countries that use such policies, unemployed
might participate in a sequence of courses, instead of only one course. For example,
an unemployed person is assisted with job search. If she remains unemployed, then she
is sent to a short training program. If she remains unemployed, then she participates
in a longer and more extensive training program, and so on. Usually, the effects of
the programs, in which the individual participated so far, influence the next program
participation (or her attrition from the planned program sequence). Similar issues
arise when the start dates of the programs vary individually, when there are different
program durations, or in any combination of such dynamic phenomena. Obviously,
any static causal framework needs many simplifying assumptions to be able to define
the interesting questions, not to mention the ability to discuss identification of causal
parameters of interest.
An explicit dynamic treatment framework has the advantage that questions relating to the definition of parameters and selection biases that occur while the treatment (the sequence) is in operation can be addressed explicitly. Thus, we can derive
explicitly the conditions required to identify such parameters from experimental and
non-experimental data by allowing for dynamic selection processes that depend on
the success of the treatment received so far. This type of selection comes on top of the

123

Identification of the effects of dynamic treatments

113

‘static’ selection process in operation when deciding which treatment sequences to
start with. Its dependence on the intermediate outcomes of the treatment complicates
identification of the causal effects. This type of endogeneity bias is the key issue we
tackle in the methodological part of this paper.1
In recent econometric evaluation studies of labor market programs, several authors
have addressed dynamic causal issues by using ad-hoc modifications of the static
causal framework. For example, Bergemann et al. (2004) evaluate training program
sequences, Lechner (1999) and Sianesi (2004) propose procedures to deal with participants entering labor market programs at different points in their unemployment
spell (different ‘waiting times’). In a related setting, Crépon and Kramarz (2002) use
different ‘start times’ to analyze the effects of the introduction of a policy to reduce
standard working hours in France. A similar problem is the issue of program duration
as analyzed by Behrman et al. (2005) in the context of a school subsidy experiment.
Because these papers use static models of potential outcomes, it is difficult to define
the desired causal effect in a way such that the impact of the (implicit) assumptions
about the dynamic selection process on the estimand becomes apparent.2
Applications of the explicit dynamic causal framework based on potential outcomes
are very rare in econometrics so far. Ding and Lehrer (2003) use such a framework
to evaluate a sequentially randomized class size study using difference-in-differencetype estimation methods. The paper by Lechner (2004) suggests different estimators,
subjects them to a Monte Carlo study, and applies some of them to Swiss labor market
data. Based on artificial data, Lechner (2008a,b) discusses practical issues that may
arise in applications using those matching-type estimators.
The suggested approach builds on work in epidemiology and biostatistics that uses
dynamic counterfactual outcomes explicitly to define the effect of treatments in discrete time (e.g. Robins 1986, 1989, 1997, 1999; Robins et al. 1999a,b, for discrete
treatments; Robins 1998; Gill and Robins 2001, for continuous treatments). Identification is achieved by sequential randomization assumptions (see the summaries by
Abbring 2003; Abbring and Heckman 2008, as well as Heckman and Navarro 2005;
Taber 2000, for more structural approaches). The effects are typically estimated using
parametric models to contain the dimensionality problem that is common in such a
set-up. There is also a similarity to Murphy (2003). She proposes estimators for optimal treatment rules that specify how the treatment changes over time depending on
how covariates change.
In this paper, we use an explicit dynamic causal model of potential outcomes to
discuss conditions for identifying different causal parameters that are of interest in program evaluation and other causal studies. Similar to Robins et al. we find that observing
1 See Rosenbaum (1984), Rubin (2004, 2005), and Lechner (2008a,b) on how the fact that the treatment
influences control variables (and thus renders them endogenous) may bias the usual estimators of static
evaluation models.
2 There are further connections to other strands of econometrics: for example, the literature on dynamic
panel data models that are identified by sequential moment conditions (e.g. Chamberlain 1987, 1992) is
related (see discussion paper version of the paper for details). Another connection is with the literature on
social learning. In particular, Manski (2004) is concerned with dynamic selection problems from one cohort
to the next. However, he assumes that the outcome distribution is stationary over time, which is in sharp
contrast to our modeling of the outcomes.

123

114

M. Lechner, R. Miquel

the information set that influences the allocation to the next treatment in a treatment
sequence as well as the outcome of interest is sufficient to identify average population
treatment effects nonparametrically even if this information is influenced by the past of
the treatment sequence. In addition to the biometrics literature, we show that treatment
effects are not only identified for the (average) population, but also for some subpopulations experiencing parts, or all, of the treatment sequence. These parameters are called
treatment-on-the-treated treatment effects and are popular for example in labor market
evaluations as they can be used to analyze effect heterogeneity among different populations characterized by participation status. However, for many such subpopulations, it
turns out that this assumption is not strong enough. The reason is that the subpopulation
of interest (the participants who completed the sequence) has evolved (been selected)
based on the realized intermediate outcomes of the sequence. In many cases, the
sequential randomization assumption must be strengthened by imposing (exogeneity)
conditions on the joint distribution of potential outcomes and conditioning variables to
obtain identification of treatment on the treated parameters. Intuitively, this additional
assumption rules out any influence of intermediate outcomes on the future selection
processes.
The paper is organized as follows: the next section outlines the general setup of
our empirical example that is concerned with the evaluation of German training programs for unemployed and based on a large administrative database. We use this
example in all later sections to clarify ideas and to show the usefulness and feasibility of our approach in applied work. In Sect. 3, we define the notation as well as
the effects of interest in a dynamic treatment setting. Only for ease of exposition,
we concentrate on the simplest version of the dynamic model with two periods and
two treatments per period. The general model with a finite number of periods and
a finite number of treatments per period is available in a previous discussion paper
version that is available from the website of the authors. Section 4 proposes identification strategies based on sequentially applying conditional independence assumptions
and discusses their identifying power for the effects defined in Sect. 3. Section 5
briefly sketches possible estimation procedures. Section 6 contains the results for the
empirical example and Sect. 7 summarizes our main findings and concludes. The
Appendix contains the proofs of the theorems stated in the main part of the paper.
Finally, additional technical material, as well as material concerning the details of the
empirical application is available on the internet at http://www.siaw.unisg.ch/lechner/
lm_2005.

2 Empirical example: government sponsored training in West Germany
Germany runs a considerable active labor market policy to combat its high unemployment. In this example, we concentrate on the training part of the policy in West
Germany. Between 1991 and 1997, West Germany spent about 3.6 bn Euro per year
on such training programs. Lechner et al. (2005, LMW in the following) evaluate the
effects of the different training programs. More precisely, they evaluate the effects of
beginning the first program participation spell in 1993 or 1994 based on an informative
new administrative database. LMW find that the programs have different short-term

123

Identification of the effects of dynamic treatments

115

and long-term effects. However, the causal effects they are estimating neither take
account of dropout nor do they include the additional effects of subsequent program
participation.
We use the same administrative data as LMW and refer the reader to LMW and
the internet appendix for more details concerning the data. We focus on a subsample
of individuals who enter unemployment between January 1992 and December 1993
and receive unemployment benefits or unemployment assistance. It is the first month
of unemployment within this window that we define as period zero - our reference
period. We are interested in comparing three different types of treatments: (1) remaining unemployed and receiving benefits and services from the employment offices
(denoted by U ); (2) participating in a vocational training program paid for by the
employment office (T ); and (3) participating in a retraining program paid for by the
employment office (R, the aim of such programs is to obtain a vocational degree
in a different occupation). Since in the data there is not enough variation over time
to analyze monthly movements in and out of R and T , we aggregate the monthly
information into quarterly information. We are interested in the effects of participating for four quarters in different types of programs (TTTT vs. RRRR). Furthermore, we consider the effects of participating in either of those programs compared
to remaining in open unemployed (TTTT vs. UUUU, RRRR vs. UUUU).3 Our outcome of interest is whether the individual is employed two, respectively four, years
later.
Table 1 shows descriptive statistics for selected variables. The statistics give an
indication about differences over time as well as across subsamples defined by treatment status (note that, e.g. UUUU is a subsample of UUU, which is a subsample of
UU, which is a subsample of U ).
It is important to distinguish two types of variables, those that are time constant and, thus, cannot be influenced by the treatment (but may influence selection
decisions), and those that are time varying and may be influenced by the treatment. The first panel gives some examples of such variables (like age, sex, nationality). The remaining parts of this table contain examples of time varying variables,
like the receipt of unemployment benefits, earnings, and the remaining claim to
unemployment benefits. Note that time variation in some earnings and particular
unemployment benefit claim variables is generated by short interruptions of the unemployment spell as well as by specific events within the unemployment spell, like training or benefit sanctions. There is additional information about education, position
in last job, last occupation, industrial sector, region, and information about the last
employer (sector, size), employment and unemployment histories and benefit entitlement.

3 There are many other effects that could be defined and estimated using this framework, like the effect of
entering programs at different times (e.g. UTTT compared to TTTT or UTTT-TTT), like the effect of different lengths of programs (e.g. T-TTTT, TU-TTTT, etc.), but for the sake of brevity they will be discussed
elsewhere. Note that in our application there is an additional state beginning in period 2, which is defined
by neither participating in the programs nor being registered as unemployed (i.e. anything else that is not
covered by the sequences of interest).

123

123

38

Age

34

5

85

33

43

36

5

82

30

42

33

10

83

40

42

UU

33

10

83

42

41

UUU

80

64

56

Before quarter 2

Before quarter 3

Before quarter 4

29

19

5

89

86

6

5

2

1,902

1,846

1,789

1,792

Before quarter 1

Before quarter 2

Before quarter 3

Before quarter 4

1,639

1,606

1,604

1,605

1,512

1,510

1,517

1,524

Last monthly earnings (in euros; mean of positive earnings)

90

Before quarter 1

1,873

1,875

1,875

1,874

66

79

87

89

1,976

1,978

1,978

1,978

75

82

87

89

UE benefits in the month before the beginning of the period under consideration

32

Western European

At least one child

83

9

German

Nationality

41

Women

R

U

Subpopulations

T

Means/shares in % in subsamples

Variables

Table 1 Descriptive statistics for selected variables

2,069

2,070

2,070

2,069

77

82

87

89

32

11

82

43

40

UUUU

1,646

1,607

1,611

1,612

29

13

1

90

34

5

85

33

44

TT

1,684

1,662

1,662

1,663

22

1

1

90

32

5

85

33

40

TTT

1,756

1,756

1,756

1,753

0

1

0

91

29

7

85

33

38

TTTT

1,527

1,524

1,524

1,532

4

2

0

87

37

4

84

30

43

RR

1,519

1,520

1,520

1,529

1

0

0

86

38

3

84

30

44

RRR

1,529

1,529

1,529

1,377

0

0

0

86

38

4

84

30

45

RRRR

116
M. Lechner, R. Miquel

5.3
4.4

Before quarter 2

Before quarter 3

Before quarter 4

4.0

494

52

50

5.2

5.7

6.3

3.1

174

66

29

6.1

5.8

5.8

19,677

27

26

4.4

5.8

8.1

10.6

UU

See LMW and Table WWW.A.1 in the internet appendix for more details on the data

27,332

32

48 month after the first unemployment spell

Sample size

32

24 month after the first unemployment spell

Employment (1: employed)

9.5
6.7

Before quarter 1

Remaining unemployment (UE) benefits claim in months

R

U

Subpopulations

T

Means/shares in % in subsamples

Variables

Table 1 continued

15,417

23

21

5.0

6.8

9.0

11.5

UUU

12,484

19

17

5.8

7.6

9.8

12.3

UUUU

372

53

48

5.6

6.1

7.0

4.5

TT

231

56

46

6.2

7.1

6.9

4.7

TTT

120

58

42

7.6

7.3

7.2

4.5

TTTT

164

69

27

6.4

6.0

5.9

3.2

RR

149

70

24

6.4

6.0

5.8

3.2

RRR

143

71

24

6.5

6.0

5.8

3.2

RRRR

Identification of the effects of dynamic treatments
117

123

118

M. Lechner, R. Miquel

The about 27,000 individuals who are unemployed in the first quarter dominate the
sample. 19,500 of them are coded as receiving unemployment benefits every quarter
(and did not participate in R or T ). A similar decline is observed for vocational training (T ) that has a mean duration below 1 year (500 → 120), whereas the number of
participants in retraining (R) with a mean duration of almost 2 years remains relatively
stable (175 → 150).
The first three columns reveal some information about the initial selection into
the treatments. We see that the main differences occur with respect to age. The nonparticipants are 4–8 years older on average, had higher earnings and higher remaining benefit claims (both positively correlated with age) before getting unemployed.
Over time the older unemployed are more likely to remain unemployed, thus those
remaining unemployed over 1 year are on average 5 years older than those who are
unemployed in the first period. Similar changes over time do not occur with the other
groups. The raw estimates, i.e. unadjusted for any differences in observable covariates,
of the employment impacts 4 years later suggest a large positive effect of training
and retraining compared to unemployment (TTTT− UUUU = 39%-points; RRRR −
UUUU = 52%-points) and a positive effect of at least 1 year of retraining compared
to at least 1 year of training of about 13%-points. In Sect. 6, we present the results
that correct for selection effects and will find that the effects are generally smaller for
the comparison with unemployment and more in favor of RRRR when compared to
TTTT.
A more sophisticated way to analyze differences in covariates in the different subsamples is to use sequential binary probit analysis, using as covariates time-constant
and predetermined time-varying variables (with their full history across the quarters)
that may be considered to influence selection in each step of each sequence as well as
the outcome variables. Table 2 shows the results of these probits for selected variables
(see the Internet Appendix for the results with all covariates and for standard errors).
Note that there is one particular specification for every transition we are interested
in. Therefore, Table 2 displays results for 12 probits. The specification is intended
to be similar across different programs. However, in some cases (typically related to
R, a program with not much dropout and not much variation in the planned program
duration), there is not much variation in the dependent variable. For example, 164
observations are observed in RRR, of which only 15 do not appear in RRRR. In these
cases, drastically fewer variables are used as independent variables in the respective
probit estimation.
The table shows many variables influencing the different transitions in a statistically significant way. The coefficients seem to confirm the impressions obtained from
the descriptive statistics discussed above. Since history of the time-varying variables
is included in all specifications (for reasons that will become apparent after the next
section), some multicollinearity problems appear. They either lead to alternating signs
of coefficients for different lags of these variables (in the case of U ) or lead to serious
instability or break down of the estimation for some variables in T . In case of breakdown, some of the variables are omitted. Finally, note that due to small movement over
time for retraining, it appears to be hard to find significant variables for these transitions (other than the constant term), which suggests that selection bias (conditional on
having chosen R in the first period) is a minor issue for RR, RRR and RRRR.

123

0.03

0.14
0.11

0.02

0.38

−0.19

−0.25∗

0.01

Part-time worker

Unskilled worker
0.06

0.10∗

−0.18

−0.00
−0.01

−0.00

0.07

0.02

0.11∗

0.03

−0.21

−0.06

−0.00

−0.13∗

−0.10

−0.13∗
−0.11∗

0.00

0.02

−0.02

UUU
if UU
coeff.

0.03

−0.14

0.02

UU
if U
coeff.

0.11∗

−0.02

−0.01

0.01

−0.15

−0.14∗

0.08

−0.06∗

−0.01

0.11

−0.30

−0.18

1.16

0.22

−0.10∗
0.55∗

TT
if T
coeff.

UUUU
if UUU
coeff.

−0.34

0.11

−0.26

−0.04

0.33

−0.23

TTT
if TT
coeff.

−0.60

−0.48

1.05

−0.34

2.83

0.23

TTTT
if TTT
coeff.

0.37
0.00
−0.39

0.05

−0.08

−0.17

12th. month before beg.

24th. month before beg.

Unemployed in the sixth month before beg.
0.15

−0.07

−0.21
−0.11

−0.11

0.11

0.01

−0.10

−0.03

0.15

0.10

−0.09

0.36

1.00∗
0.10

0.09
−0.21

−0.34

−0.90

−1.88

−0.75

Unemployment and employment status before the beginning of the period under consideration: (reference categories: out-of-labor, missing)

0.42

0.12
−0.27

−0.22∗

Salaried employee

Position in last job (reference category: skilled worker, Master craftsman)

At least one child

Western European

German

Nationality

0.27
−0.14

−0.58

−0.19

Younger than 26 years

0.19∗

−1.10∗

−0.01

−0.04

−0.04

−0.06

0.14∗

Age/10

(Age/10)ˆ2

−0.99∗

0.13

−0.05

0.11

coeff.

coeff.

coeff

U vs. R

R vs. T

U vs. T

Women

Variables

0.55

RR
if R
coeff.

Table 2 Estimated coefficients of sequential binary probit models for choice of state in the beginning of the different periods (selected variables only)

0.26

RRR
if RR
coeff.

0.24

RRRR
if RRR
coeff.

Identification of the effects of dynamic treatments
119

123

123

R vs. T

coeff.

U vs. T

coeff

coeff.

U vs. R

UU
if U
coeff.

UUU
if UU
coeff.

UUUU
if UUU
coeff.

TT
if T
coeff.

TTT
if TT
coeff.

−0.73∗

−0.06

−0.67∗

0.05

−0.03

0.04

−0.12

0.25∗

0.22∗

0.04
−0.15∗

0.05∗
−0.00

−0.08

0.12∗

0.03∗
−0.06

−0.25∗

0.19

−0.26∗

0.92∗

−0.05

−0.07

−0.81∗

0.23∗

−0.11

−0.41

0.67∗

−0.42

−0.31

0.53

0.49

−0.88∗

0.48∗

−0.26

TTTT
if TTT
coeff.

0.10

RR
if R
coeff.

−0.02

RRR
if RR
coeff.

0.06

RRRR
if RRR
coeff.

Empty cell means that the respective variable is excluded from this equation. Bold numbers indicate significance at the 5% level, numbers in italics relate to the 10% level and
* to the 1% level. The following variables are included in the estimates but omitted from this table: constant term; education; last monthly earnings and missing information
about earnings; various variables capturing future claim of unemployment; industrial sector, previous occupation before defining unemployment spell; firm size of employer;
regional information; various historical un-/out-of/employment information before the “first unemployment period”. The appendix contains a table with all variables included.
The detailed results including asymptotic SD errors can be found in the internet appendix. All the results for unemployment are from the comparison with training

Before quarter 4

Before quarter 3

Before quarter 2

Before quarter 1

Remaining unemployment (UE) benefits claim in months

Before quarter 4

Before quarter 3

Before quarter 2

Before quarter 1

UE benefits in the month before the beginning of the period under consideration (reference category: UE assistance)

Variables

Table 2 continued

120
M. Lechner, R. Miquel

Identification of the effects of dynamic treatments

121

3 The notation of the dynamic model of potential outcomes
3.1 The variables
In the previous section, we considered a setup with three types of treatments that could
occur in four different periods (plus the initial period in which everybody became
unemployed). However, to focus ideas we present the formal model for the ‘minimal’
case of two treatments and two periods only (to compare TT vs. RR in our example).
Although, the necessary extension is not entirely trivial, the key ideas become apparent
with this stylized version.4
Consider a world with an initial period in which everybody is in the same treatment
state (U in our example), plus two subsequent periods in which different treatment
states are realized. The periods are indexed by t or τ (t, τ ∈ {0, 1, 2}). A vector of
random variables S = (S0 , S1 , S2 ) describes the treatment received by members of the
population.5 Later on, for notational convenience, the initial period is not mentioned
explicitly. Starting in period 1, St can take two values (e.g. T or R). A particular realization of St is denoted by st ∈ {0, 1}. Furthermore, denote the history of variables
up to period t by a bar below a variable, i.e. s 2 = (0, s1 , s2 ) (e.g. URR).6 In period 1,
a member of the population can be observed in exactly one of two treatments. In
period 2, she participates in one of four treatment sequences [(0,0), (1,0), (0,1), (1,1)],
depending on what happened in period 1. This notation allows us to specify shorter
(partial) sequences by considering effects of sequences s1 instead of s 2 . Therefore,
every individual ‘belongs’ to exactly one sequence defined by s1 and another sequence
defined by s 2 .7 To sum up, in the three-periods-two-treatments example we consider
six different overlapping potential outcomes corresponding to two mutually exclusive
states defined by treatment status in period 1 (e.g. T, R), plus four mutually exclusive
states defined by treatment status in period 1 and 2 together (e.g. TT, TR, RT, TT), thus
allowing us to evaluate treatments of different lengths.
The variables used to measure the effects of the treatment, i.e. the potential outs
comes, are indexed by treatments, and denoted by Yt 2 (e.g. employment 2 or 4 years
4 The notation and most of the proofs for the general model are contained in a previous discussion paper
version of this paper that is available from the website of the authors (Lechner and Miquel 2001). See also
Robins (1986), etc., for the identification of the average population effects.
5 We avoid the technical term units for members of the population. Given our motivating application, we
call them individuals instead. Generally, the notational setup in this section follows the spirit of Rubin
(1974) and others.
6 To differentiate between different sequences, sometimes a letter (e.g. j) is used to index a sequence like
j
s t . Furthermore, since all sequences are identical for the base period, we ignore that period in the following

when denoting different sequences. As a further convention, capital letters usually denote random variables,
whereas small letters denote specific values of the random variable. Deviations from this convention will
be obvious.
7 There are different ways to understand such shorter and longer sequences. As suggested by a referee, one
may rightly call the effect for the longer sequences the ‘structural parameter’ as it measures the total effect
of the intervention. In that case, the effect for the shorter sequence may be called a reduced form parameter.
However, there are contexts in which the later is of primary interest as well and thus becomes structural
(e.g. when we are interested in the effect of a case worker sending an unemployed into a program without
forcing the unemployed to stay on the program, as the later would be impossible in many countries).

123

122

M. Lechner, R. Miquel

after the beginning of unemployment). Potential outcomes are measured at the end of
(or just after) each period, whereas treatment status is measured in the beginning of
each period. For each length of a sequence (1 or 2 periods), there are corresponding
potential outcomes. For each length of the sequence, one of the potential outcomes is
observable and denoted by Yt . The resulting observation rules are defined in Eq. (1):
Yt = S1 Yt1 + (1 − S1 )Yt0 ; t ≥ 1
Yt = S1 S2 Yt11 + (1 − S1 )S2 Yt01 + S1 (1 − S2 )Yt10 + (1 − S1 )(1 − S2 )Yt00 , t ≥ 2.
(1)
In words, for those who participated in training in the first period, we observe YtT .
For those remaining in training for two periods, we observe YtT T . It remains to define
the variables X , that may influence treatment selection and (or) potential outcomes.
Because we do not rule out that treatment status influences the values of these varis
s
ables, there are potential values of these variables (X s τ = (X 0τ , X 1τ )) that we call
sτ
sτ
dynamic confounders. X t may contain Yt or functions of it. The K -dimensional
vector X t is observable at the same time as Yt . The corresponding observation rule for
X t is analogous to the one for the potential outcomes given in Eq. (1).

3.2 The effects
The purpose of the intended empirical analysis is to estimate the mean causal effect
s k ;s l

denoted by θt τ τ (t ≥ τ ) in period t of a sequence of treatments defined up to period
1 or 2 (or further) (s1k or s k2 ), e.g. T or TT, compared to another sequence of the
same length ( s1l or s l2 ), e.g. R or RR. For notational convenience, we consider only
pair-wise effects of sequences having the same length. Effects may be heterogeneous
across participants in different sequences. For obvious reasons, we are only interested
in subpopulations defined by treatment status not specified beyond the last period of
the specified treatment sequence. In other words, we do not consider the effects of the
treatment in period 1 for the population of participants in a treatment sequence defined
for periods 1 and 2.
The definition of the average causal effects is given in Eq. (2):
s k ;s lτ

θt τ

j

sk

j

sl

j

(s τ̃ ) := E(Yt τ |S τ̃ = s τ̃ ) − E(Yt τ |S τ̃ = S τ̃ ),

0 ≤ τ̃ ≤ 2, 1 ≤ τ ≤ 2, τ̃ ≤ τ, k = l, k, l ∈ (1, . . . 2τ ),

j ∈ (1, . . . 2τ̃ ).
(2)

Note that all of what follows is also valid in strata defined by the dynamic attributes
that are not influenced by the treatment conditional on S τ̃ = s τ̃ .
In our examples, if we were interested in the effect of two periods of retraining
compared to training in the first period and retraining in the second period for those
participating in retraining in both periods on the outcome in period 3, we denote this
effect as θ3T T ;RT (R R). If the relevant subpopulation consists only of those receiving
retraining in period 1, then θ3T T,RT (R) is the relevant parameter. For τ̃ = 0, we obtain

123

Identification of the effects of dynamic treatments

123

Table 3 Summary of notation and definitions
Symbol

Meaning

Timing within period

t = 0, 1, 2

Time periods

–

S = (0, S1 , S2 )

RV: treatment

Beginning

s 1 = (0, s1 ), s 2 = (0, s1 , s2 )

Beginning
Beginning

Y s t = (Y1 t , Y2 t )

Specific sequence of treatments
until period 1 or 2
2 exclusive treatments in each
period
RV: potential outcomes

Y = (Y1 , Y2 )

RV: observable outcomes

End

X s t = (X 0t , X 1t )

RV: potential confounders

End

X = (X 0 , X 1 )

RV: observable confounders

End

Mean causal effect of s kτ compared
j
to s lτ for those participating in s τ̃

End

st ∈ {0, 1}
s

s

s

s

s k ;s l
j
θt τ τ (s τ̃ )

End

RV random variable

the average effect for the population (which is defined by their status in period 0),
s k ;s l

j

e.g. θ3T T,RT . To interpret θt τ τ (S τ̃ ) as a causal effect, the standard assumptions of
the potential outcome framework, like the Rubin (1974) Stable Unit Treatment Value
Assumption (SUTVA) have to be invoked as well. They imply that the effects of treatment on person i do not depend on the treatment choices of other people, as is already
implied by the specific potential outcome notation. SUTVA is already implicit in the
observation rules.
There is a close resemblance of the effects defined in Eq. (2) to effects that are
typically of interest in the static evaluation literature, namely the average treatment
effect (ATE, e.g. θ3T,R ) and the ATE on the treated (ATET, e.g. θ3T,R (T )). Here, we
s k ,s lτ

call θt τ

s k ;s lτ

the dynamic average treatment effect (DATE). Accordingly, θt τ

(s kτ ), e.g.
s kτ ;s lτ l
T T,RT
T T,RT
θ3
(T T ), as well as θt
(s τ ), e.g. θ3
(RT ) are termed DATE on the treated
s k ;s l
8
(DATET) and DATE on the nontreated. There are cases in-between, like θt 2 2 (s1l ),
e.g. θ3T T,RT (R), for which the conditioning set is defined by a sequence shorter than the

ones that are evaluated. Furthermore, note that the effects are symmetric in the sense
s k ;s l

j

s l ;s k

s k ;s l

s l ;s k

of θt τ τ (S τ̃ ) = −θt r r (Slτ̃ ), but also that θt τ τ (S kτ ) = −θt τ τ (Slτ ). The appendix
provides results concerning the connection of effects defined for different lengths of
treatments and conditioning sets.
Table 3 and Fig. 1 summarize the notation as well as the definitions introduced
so far, whereas Fig. 1 clarifies the timing of the different potential and observable
variables, as well as how they relate to the potential treatment paths. To understand the
effect of the latter is the ultimate goal of an evaluation exercise based on a dynamic
causal framework.
8 Note that this notation can be used to capture an additional year for some program compared to some
alternative, like θ3T T,RT (RT ). Behrman et al. (2004) call such effects ‘marginal effects’.

123

124

M. Lechner, R. Miquel

Period t=0

t=1

t=1

S1 = 0

X 10 (Y10 )

t=2

t=2

S2 = (0,0)

Y200

S2 = (0,1)

Y201

X 101 (Y101 )
X 100 (Y100 )

θ 201;00 (.)

S0 = 0

θ 210;01 (.)
S1 = 1

1
1

1
1

X (Y )
10
1

X (Y )

X0

S1

S2 = (1,0)

10
2

Y

X 111 (Y111 )
10
1

S0

θ 210;00 (.)

X 1 (Y1 )

θ 211;10 (.)
S2 = (1,1)

S2

θ 211;00 (.)
θ 211;01 (.)

Y211

Y2

Fig. 1 Notation and time line of the dynamic causal model

To simplify our notational burden and increase readability of the paper, we will not
consider comparisons for which the dynamic approach does not provide new insights,
because they are essentially static. These include all comparisons for a treatment specified over one period only, as well as those comparisons of sequences that are defined
for two periods but for which period one coincides for the two sequences as well as
for the population under investigation, like θ3T T,T R (T ).
3.3 Sampling and regularity conditions
To complete the framework, assume that a large random sample {s1i , s2i , x0i , x1i , x2i ,
y1i , y2i }i=1:N is at disposal, drawn from a large population of participants in S0 = 0.
This population is characterized by the corresponding random variables (S1 , S2 , X 0 ,
X 1 , X 2 , Y1 , Y2 ). Furthermore, all conditional expectations that are of interest in the
remainder of this paper shall exist. Taken together these assumptions allow phrasing
the questions of identification of the causal parameters as to whether it is possible to
express the various expectations of the potential outcomes in terms of expectations of
observable outcomes, which, in principle, can be estimated consistently.

4 Identification of the effects of dynamic treatment regimes
4.1 Introduction
From the considerations in the previous section, it is obvious that the data alone could
not identify the effects. Like with any causal model based on potential outcomes,
there are three general routes to identification. The first option is to choose a particular
parametric specification (up to a finite number of unknown parameters) of the joint
distribution of the potential outcome and selection variables conditional on attributes.
A major criticism of this approach is that, usually, particular specifications are hard to
justify with behavioral, institutional, and data related arguments, in particular when
they are not a result of a structural behavioral model.

123

Identification of the effects of dynamic treatments

125

Most of the modern program evaluation literature focuses on nonparametric
identification (e.g. Heckman et al. 1999). Within this group, there are two different
approaches. The first one relies on having access to variables that influence treatment
choice but do not influence potential outcomes, thus fulfilling an exclusion restriction.
The causal implications of these so-called instrumental variable (IV) approaches in
a nonparametric setting with effect heterogeneity have been explored first by Imbens
and Angrist (1994), Angrist et al. (1996), and Heckman and Vytlacil (1999). Based on
various types of exclusion restrictions Miquel (2002, 2003) developed identification
strategies for the dynamic causal model presented in the previous section. Ding and
Lehrer (2003) apply these ideas in their empirical work.
The second group of nonparametric identification strategies also assumes the existence of an instrument, but does not require observing it. Instead, it supposes that all
variables that jointly influence selection and outcome are observed (and the potentially unobserved instrument causes some additional variation of treatment status to
be exploited). Thus, conditional on the values of these variables, called confounding
variables in the statistics literature, we are in an experimental situation and we can
learn the (unobservable) nontreatment outcomes of the treated from the (observable)
nontreatment outcome of the nontreated and vice versa (Rubin 1974, 1977). This
assumption is called ‘selection-on-observables’ or conditional independence assumption (CIA) and gives rise to matching type estimators (see the excellent survey by
Imbens 2004). The current surge in the use of matching estimation is probably due
to better data becoming available, in particular from government sources (e.g. Gerfin
and Lechner 2002, or Angrist 1998). Better means more informative about outcome
and selection variables as well as more observations. The additional information is
crucial for making the identifying assumptions plausible, whereas a large number of
observations permit application of nonparametric estimation techniques.
The database used in our empirical example falls in this category. In this case,
substantial efforts have been made to compile these data from government sources with
the particular intention of gathering selection information. Therefore, in the remainder of this section we explore the identifying power of two different versions of the
selection on observables assumption in the dynamic context. Compared to the static
approach, the major complication is that the outcomes of the treatments experienced
so far may influence the variables used to correct for the selection effects.

4.2 Dynamic conditional independence assumptions
In LMW, we argue extensively that the data used in the empirical example is very
rich in covariates (like socio-demographic variables, regional variables, employment
histories, etc.). Therefore, we proceed under the assumption that the data contains
the variables that jointly influence the selection process as well as the outcome variables (see LMW for an extensive discussion of the available variables, the institutional
details underlying the selection process, the selection process itself, and the plausibility of the static CIA). Of course, this implies that we suppose that unobserved
factors, like discount rates for example, have only a negligible influence conditional
on observables. Assumption 1 stating the weak dynamic conditional independence

123

126

M. Lechner, R. Miquel

assumptions (W-DCIA) formalizes this idea using sequential statements about the
conditional independence of outcomes and selection variables given the values of the
confounders (also called sequential randomization assumption in various papers by
Robins).9
Assumption 1 Weak dynamic conditional independence assumption (W-DCIA)10

(a) Y200 , Y210 , Y201 , Y211 S1 |X 0 = x0 ;

(b) Y200 , Y210 , Y201 , Y211 S2 |X 1 = x 1 ; S1 = s1 ;
(c) 1 > P(S1 = 1|X 0 = x0 ) > 0, 1 > P(S2 = 1|X 1 = x 1 , S1 = s1 ) > 0; ∀x 1 ∈ χ 1 ,
∀s1 : s1 ∈ {0, 1}.
Part (a) of Assumption 1 states that conditional on X 0 potential outcomes are independent of assignment in period 1 (S1 ). This is the standard version of the static CIA.
Part (b) states that conditional on the treatment, on observable outcomes (which may
be part of X 1 ) and on confounding variables of period 0 and 1, X 1 , potential outcomes
are independent of participation in period 2 (S2 ). To see whether such an assumption is
plausible in an application, we have to think about which variables influence changes
in treatment status as well as outcomes. It is likely that time-varying confounders
and outcomes from previous periods play some role. For example, in our empirical
example, there are several variables relating to or derived from events that occur after
the beginning of period 1 and before its end (like changes in claims to unemployment
benefits, employment status, etc.). Thus, again, in this example, the assumption that
we can control for the confounding variables that are related to treatment and selection
in period 2 (given the treatment history) appears likely to hold. Note that Assumption 1
does not impose any further restrictions on X . In particular, X 1 may be influenced by
the treatment in period 1.
These assumptions are supposed to hold for all values of x0 and x1 in a given set
χ 1 for which we want to learn the effects. To make the necessary comparisons for
all elements in this set, there must be a positive probability everywhere in this set to
observe individuals in all relevant sequences. Part (c) formalizes the condition that
is called the common support requirement (CSR). It is not strictly necessary when
estimation (and identification) is based on parametric models that allow extrapolating
into the no-support regions. Theorem 1 shows that several interesting causal effects
are identified.
Theorem 1 Identification based on W-DCIA
s k ;s l

s k ;s l

j

j

If Assumption 1 holds, then θ2 2 2 and θ2 2 2 (s1 ) are identified, ∀s1k , s2k , s1l , s2l , s1 ,
j
s2 ∈ {0, 1}.
The proof of Theorem 1 is given in Appendix A.2.11
9 The following assumptions relate to identification of all treatment effects defined in Sect. 2. If the desired
comparison involves fewer potential outcomes, then the required changes will be obvious.
10 A  B|C = c means that each element of the vector of random variables B is independent of the random
variable A conditional on the random variable C taking a value of c in the sense of Dawid (1979).
11 Note that the assumption supposes conditional independence as opposed to conditional mean independence. Although the latter is sufficient for identification, the former has the virtue of being valid for all
transformations of the dependent variable.

123

Identification of the effects of dynamic treatments

127

Theorem 1 states that pair-wise comparisons of all sequences are identified, but
only for groups of individuals defined by their treatment status in period 0 or 1 (like
θ2R R,T T (·) or θ2R R,T T (T ); θ2R R,T T (T T ) is not identified). The relevant distinction
between the populations defined by treatment state in the first and subsequent periods is that in the first period, treatment choice is random conditional on exogenous
variables, which is the result of the initial condition that S0 = 0 holds for everybody.
However, in the second period, randomization into these treatments is conditional on
variables already influenced by the first part of the treatment.
Although the appendix contains the formal proof of Theorem 1, we use the empirical example to understand how to obtain identification. Suppose we are interested in
θ2T T,R R (R). In this case, we identify E(Y2T T |S1 = R) and E(Y2R R |S1 = R) by applying Assumption 1, the law of iterated expectations (IE), and the observations rule (OR)
given in Eq. (1):
IE

E(Y2R R |S1 = R) =

A.1b

=

E(Y2R R |X 1 = x 1 , S 2 = R R)

E

E(Y2 |X 1 = x 1 , S 2 = R R). [X 1 = (X 1 , X 0 )]

E

E(Y2T T |X 0 = x0 , S1 = R)

E

E(Y2T T |X 0 = x0 , S1 = T )

X 0 |S1 =R

A.1a

=

E

X 1 |S1 =R

IE

E(Y2T T |S1 = R) =

E(Y2R R |X 1 = x 1 , S1 = R)

X 1 |S1 =R

OR

=

E

X 1 |S1 =R

X 0 |S1 =R

IE

=

A.1b

=

E

E(Y2T T |X 0 = x0 , X 1 = x1 , S1 = T )

E

E

E(Y2T T |X 1 = x 1 , S 2 = T T )

E

E

E(Y2 |X 1 = x 1 , S 2 = T T ).

(X 0 |S1 =R) (X 1 |X 0 ,S1 =T )

OR

=

E

(X 0 |S1 =R) (X 1 |X 0 ,S1 =T )

(X 0 |S1 =R) (X 1 |X 0 ,S1 =T )

The symbol above the equality sign denotes the assumption or the statistical property
(IE: iterated expectations; OR: observation rule) used to derive the results on the right
hand side of the equality sign. This example shows how to reweigh the observations
in TT and RR successively to learn the counterfactual outcome distribution of TT
and RR for those in the target population of interest (R). Thus, the causal effects of
interest can be expressed in terms of random variables for which realizations are
observable:
θ2T T,R R (R) =

E

E

(X 0 |S1 =R) (X 1 |X 0 ,S1 =T )

−

E

X 1 |S1 =R

E(Y2 |X 1 = x 1 , S 2 = T T )

E(Y2 |X 1 = x 1 , S 2 = R R).

123

128

M. Lechner, R. Miquel

W-DCIA has an appeal for applied work as a natural extension of the static framework
used so far. Based on W-DCIA additional parameters are identified using assumptions
that are essentially not much more demanding than in the static case. Therefore, the
result for the empirical example presented below will be based on this assumption.
Using our example again, it becomes apparent that Assumption 1 is not powerful (restrictive) enough to obtain a similar identification result for θ2T T,R R (T T ),
θ2T T,R R (R R), θ2T T,R R (T R), θ2T T,R R (RT ), although counterfactuals like E(Y2R R |S 2 =
RT ), E(Y2T R |S 2 = T T ), E(Y2RT |S 2 = R R), and E(Y2T T |S 2 = T R) are identified:
IE

E(Y2T T |S 2 = R R) =

A.1b

=

E

E(Y2T T |X 1 = x 1 , S 2 = R R)

E

E(Y2T T |X 1 = x 1 , S1 = R) =?

X 1 |S 2 =R R
X 1 |S 2 =R R

The problem is that E(Y2T T |X 1 = x 1 S1 = R) cannot be rearranged to obtain an
expression that is a function of the observable outcome (Y2 ) only, because Y2T T is
independent of S1 conditional on X 0 , but not conditional on (X 0 , X 1 ). Nor is it independent of X 1 conditional on (S1 , X 0 ), because X 1 contains part of the effect of S1 on
Y2T T . For θ2T T,R R (R) that did not matter, but for θ2T T,R R (R R) it does matter because
X 1 determines the population of interest in the second period. If we are prepared to
restrict this dependence, for example by assuming the full sequences are conditionally
randomized in the first period, or that there are no time varying confounders, then all
effects are identified (strong dynamic conditional independence assumption, S-DCIA;
see internet appendix for details). However, the problem is now essential static and
static evaluation methods for multiple treatments (each possible sequence constitutes
one treatment) can be directly applied.

4.3 The relation of the assumptions to the empirical example
What do these assumptions imply for our empirical example? S-DCIA is only plausible if the time-varying confounding variables are not influenced by the evolvement
of the treatment over time. Clearly, considering the types of confounders used and
required in our application, this assumption is not plausible. However, in cases where
the new information X 1 does influence outcomes as well as the choice of treatment
in the next period, and this new information comes as a surprise (or at least is not
influenced by the evolvement of the treatment history so far), then S-DCIA may be
plausible (and powerful and convenient with respect to estimation).
In our application W-DCIA appears to be plausible. It seems likely that all important
variables that influence selection are observed. Furthermore, although intermediate
outcomes play a role as potentially confounding variables, it appears likely that the
unemployed does not react prior to the participation decision, as long as the date of
the referral to the programs and the starting date of the program (which is the variable that must be used at the beginning of the program, since referral is unobserved)
are sufficiently close. Thus, it appears to be plausible that the exogeneity condition
required for W-DCIA is fulfilled as well.

123

Identification of the effects of dynamic treatments

129

5 A note on estimation
An in-depth discussion of estimation and inference in complex dynamic treatment
studies is beyond the scope of this paper for reasons of space. We confine ourselves
to brief considerations about how to use the sample information to obtain consistent
estimators for the causal effects. We discuss the estimation of the causal effects for
the different populations in turn.12
When interest is in DATE, the parameter that always features prominently in the
epidemiological literature using this approach (see the already mentioned papers by
Robins and coauthors), i.e. the average effect for the population S0 = 0, W-DCIA is
sufficient for identification. Using the previous arguments, we obtain the following
relation between the expected observable and expected potential outcomes:
Sk

E(Y2 2 ) = E

E

X 0 (X 1 |X 0 =x0 ,S1 =s k )

E(Y2 |X 1 = x 1 , S 2 = s k2 ); s1k , s2k ∈ {0, 1}.

(3)

1

This is the so-called G-computation algorithm proposed by Robins (1986) and may be
implemented as an inverse-probability-of-selection estimator (see Robins et al. 2000).
The estimation problem is such that suitably modified matching or other nonparametric regression methods, popular estimators in the static causal model, can be used.
In a first stage, a regression of Y2 on X 1 in the subsample of S 2 = s k2 is performed,
obtaining E(Y2 |X 1 = x 1 , S 2 = s k2 ). Within each stratum of X 0 in the subpopulation
S1 = s1k , this regression function is averaged according to the distribution of X 1 in
each such stratum. These averages are functions of X 0 only. Finally, this function is
averaged over the distribution of X 0 in the population (S0 = 0) leading to a sequential matching estimator. If we are willing to parameterize the respective conditional
distributions, the various parametric or semiparametric estimation methods proposed
by Robins et al. are relevant and frequently used alternatives.
Next, consider the DATET for the population defined by treatment in period 1 and
identified by W-DCIA. The estimand is given by the following Eq. (4):
sk

j

E(Y2 2 |S1 = s1 )
=

E

E

j
k
(X 0 |S1 =s1 ) (X 1 |X 0 =x0 ,S1 =s1 )

j

E(Y2 |X 1 = x 1 , S 2 = s k2 ); s1k , s2k , s1 ∈ {0, 1}.

(4)

The previous estimation principles of the sequential matching type apply here as well.
E(Y2 |X 1 = x 1 , S 2 = s k2 )
However, in the first step, the averaging of
E
is with respect to the distribution of X 0 in

(X 1 |X 0 =x0 ,S1 =s1k )
j
S1 = s1 .

12 For the sake of brevity, this paper concentrates on linking the observable random variables to the causal
effects. An in-depth discussion of estimators would considerably extend an already long paper. Therefore,
readers who are interested in the properties of actual estimation methods that may be implemented in this
framework are referred to Lechner (2004). This paper contains an exact description of the estimator used
in the application below.

123

130

M. Lechner, R. Miquel

Finally, consider DATET for populations defined by the full treatment sequences,
which are only identified by the S-DCIA’s, as well as alternative expression for the
other effects that are valid under S-DCIA only. The estimand has the following structure given by Eq. (5):
sk

j

E(Y2 2 |S 2 = s 2 ) =
sk

E

j

E(Y2 2 |S1 = s1 ) =

E

j
X 1 ,X 0 |S1 =s1

sk

E(Y2 2 ) =

j

X 1 ,X 0 |S 2 =s 2

E(Y2 |X 1 = x 1 , S 2 = s k2 );
E(Y2 |X 1 = x 1 , S 2 = s k2 );

(5)
j

j

E E(Y2 |X 1 = x 1 , S 2 = s k2 ); s1k , s2k , s1 , s2 ∈ {0, 1}.

X 1 ,X 0

Apparently, this estimation problem is the same as the typical static estimation problem based on the CIA. The only difference is that it is of the multiple treatment type,
because four different sequences are involved (00, 01, 10, 11). For this framework
several authors including Brodaty et al. (2001), Imbens (2000), and Lechner (2001,
2002) discuss issues of non- and semiparametric estimation. The estimators consistent
under W-DCIA are consistent under S-DCIA as well.
Nonparametric estimation of the estimands defined in Eqs. (4)–(5) is subject to the
curse of dimensionality problem. Following Rosenbaum and Rubin (1983) and the
extension to multiple treatments in Imbens (2000) and Lechner (2001) it is common
practice in the static evaluation literature to ‘solve’ this problem by first estimating the
participation probability conditional on the confounders, and then use the estimated
conditional participation probability (the propensity score) instead of the confounders
as conditioning variables. Propensity score properties are available here as well. For
Eq. (5), they are identical to the static case and can be derived in a straightforward
way. Since estimation based on S-DCIA is essentially a static multiple treatment problem, the balancing scores provided by Imbens (2000) and Lechner (2001) are directly
applicable. The case of Eq. (4) is more complicated, because more than one propensity
score is required. It is analyzed in depth in the discussion paper version of this paper.
It is shown that matching can be performed in the respective subsample given by the
treatment status using all conditional transition probabilities for the state in the next
period:
sk

j

E(Y2 2 |S1 = s1 ) =

E

E

( p1 (X 0 )|S1 =s1 ) ( p2 (X 1 ,s1 )|S1 =s1 , p1 (X 0 ))
j

k

k

[F(Y2 |S 2

j
= s k2 , p 2 (X 1 , s1k ))], s1k , s2k , s1 ∈ {0, 1};

p 2 (X 1 , s1k ) = [ p1 (X 0 ), p2 (X 1 , s1k )],

p1 (x0 ) = P(S1 = s1k |X 0 = x0 );

p2 (X 1 , s1k ) = P(S2 = s2k |S1 = s1k , X 1 = x 1 ).

Thus, instead of sequentially conditioning on all past and current values of X and the
treatment status, conditioning is on the conditional transition probabilities.

123

Identification of the effects of dynamic treatments

131

6 Empirical results
In this section, we assume that W-DCIA is valid and use the propensity score matching
estimator discussed in Lechner (2004), to estimate the causal effects of the treatment
sequences. The estimator uses a sequential one-to-one matching algorithm based on
propensity scores. The target populations are defined by the states in period one (R, T ,
or U ). Individuals in those target populations who find no suitably close match in the
subsequent comparisons in terms of the respective propensity scores are deleted (common support13 ).
Table 4 contains the results of the estimation. Column (1) shows the treatment
sequences for which we estimate an effect. Since the effects may vary across the population in an arbitrary way, column (2) gives the population to which the respective
effect relates to (target population). The next column contains the number of observations in the groups of the two treatment sequences as well as in the target population.
The number of deleted observations when imposing the common support condition
adjusts the latter number. Columns (4) and (6) give the means of the outcome variables (employed after 2 and 4 years) for these three different subsamples (treated,
comparison, target). For each comparison, the first two lines in columns (8) and (10)
contain the estimate for the respective counterfactual mean, whereas the third row
contains the estimate of the causal effect, i.e. the parameter of interest. Therefore,
comparing the first two lines in columns (4) and (6) to the first two lines in columns
(8) and (10) gives us an indication of the amount of selection bias that the matching
estimator is adjusting. Columns (5), (7), (9), and (11) present the standard errors for
the estimators used.
Note that the samples of participants are small since this application with four periods and three treatments per period is rather demanding, because it generates up to 81
different possible sequences and related subsamples. Nevertheless, only the first comparison of 1 year of training compared to 1 year of unemployment leads to insignificant
effects. For all other comparisons, at least the effects after 4 years are large enough to
be determined. Comparing retraining to staying unemployed, we find that after 2 years
there is no significant difference in the labor market outcomes. However, after 4 years
we find about a 35%-point gain in employment chances for participating in retraining
rather than remaining unemployed that may well be explained by the human capital
effects of retraining and by stigma effects of remaining unemployed for a year. Note
that this effect is about three times as large as the findings by LMW. However, they
estimated the effect of starting retraining compared to remaining unemployed. For
such a long program as retraining, the most important difference between the two
approaches is that, here, the counterfactual state of unemployment requires remaining
unemployed for 1 year. In the potential states compared by LMW, the unemployed as
well as retrainees are allowed to accept job offers immediately after the start (which
is close to a comparison of R against T in our notation). Therefore, the effect must be
smaller because the unemployed will accept job offers while the retrainees are locked
in their program. This argument applies here only after 1 year. This example shows
13 Comparing sample sizes given in Tables 1 and 4 for the respective subpopulations shows how many
observations are removed for the particular comparisons because of common support problems.

123

132

M. Lechner, R. Miquel

Table 4 Results of the dynamic matching estimation
s1

Sequences

Target

Sample

E(Yt |S 4 = s 14 )

E(Yt 4 |S1 = s1 )

s 14

pop.

size

E(Yt |S 4 = s 04 )

E(Yt 4 |S1 = s1 )

s 04

s1

Ns 1

E(Yt |S1 = s1 )

θt 4

4
Ns 0
4

s0

s 0 ,s 14

(s1 )

N s1

(1)

(2)

TTTT
UUUU
U
TTTT

ET24
(%)
(4)

(3)

(SD)
(5)

ET48
(%)
(6)

(SD)
(7)

ET24
(%)
(8)

(SD)
(9)

ET48
(%)
(10)

(SD)
(11)

120

41.7

(4.5)

58.3

(4.5)

28.5

(11.6)

35.7

(11)

12,484

16.5

(0.3)

19.5

(0.4)

22.9

(0.8)

27.4

(0.9

16,600

33.9

(0.4)

34.3

(0.4)

5.6

(11.7)

8.2

(11)

120

41.7

(4.5)

58.3

(4.5)

36.5

(6.7)

48.8

(6.7)

12,484

16.5

(0.3)

19.5

(0.4)

28.1

(3.2)

38.3

(3.5)

334

51.2

(2.7)

55.3

(2.7)

8.4

(7.4)

10.5

(7.5)

143

24.5

(3.6)

71.3

(3.8)

25.6

(6.9)

66.8

(7.3)

12,484

16.5

(0.3)

19.5

(0.4)

25.7

(1.0)

31.8

(1.1)

19,088

40.1

(0.4)

40.7

(0.4)

−0.2

(7.0)

35.0

(7.4)

143

24.5

(3.6)

71.3

(3.8)

25.3

(3.9)

71.3

(4.1)

12,484

16.5

(0.3)

19.5

(0.4)

25.9

(3.8)

40.2

(4.3)

174

28.7

(3.4)

66.1

(3.6)

−0.6

(5.5)

31.0

(6.0)

RRRR

143

24.5

(3.6)

71.3

(3.8)

13.9

(7.0)

73.2

(7.3)

TTTT

120

41.7

(4.5)

58.3

(4.5)

39.7

(6.3)

54.5

(6.3)

325

52.6

(2.8)

56.0

(2.8)

−25.9

(9.5)

18.8

(9.7)

143

24.5

(3.6)

71.3

(3.8)

24.6

(4.7)

72.1

(4.9)

120

41.7

(4.5)

58.3

(4.5)

43.4

(9.8)

54.1

(9.8)

122

29.5

(4.1)

63.9

(4.4)

−18.9

(10.9)

18.0

(11)

UUUU
T
RRRR
UUUU
U
RRRR
UUUU
R

T
RRRR
TTTT
R

ET24 = employed the 24th month after the first month of unemployment, ET48 = employed the 48th
month after the first month of unemployment. Bold: effect is significant at 1% level. Italics: effect significant
at 10% level. Ns1 is the sample size after imposing common support, Ns 1 and Ns 0 are the sample sizes
before imposing common support

4

4

that the dynamic treatment approach can be used to define a wealth of parameters that
are of interest in policy analysis. Here, for the sake of brevity, we present only one
specific type.
Finally, there is the comparison between training and retraining. It appears that
training leads to much faster integration into the labor market than retraining, whereas
after some years the extensive and expensive addition of human capital, which is the
core concept of retraining, leads to considerably higher employment rates. Taking into
account sampling uncertainty, these findings seem to hold for beginners of training as
well as of retraining.

123

Identification of the effects of dynamic treatments

133

7 Conclusion
In this paper, we take up the topic of how to identify the effects of sequential
interventions that first appeared in epidemiology 20 years ago with the seminal work
by Robins (1986). Following this work, we suggest approaching the problem of an
econometric evaluation of dynamic program sequences from a potential outcome perspective. We discuss the identifying power of different stylized assumptions about
the connection between the dynamic selection process and the potential outcomes
of the different sequences of programs. These assumptions invoke different sorts of
randomization which are compatible with different types of selection and outcome
regimes. They are framed such that they need to be, and potentially can be, justified
by sufficient knowledge about the selection and outcome process in conjunction with
sufficiently rich individual panel data. Parametric forms are not involved. Participation
in the sequences is cumulative in the sense that the decision concerning what program
to participate in the next period depends on the outcomes of the part of the sequence
that has already been completed.
These types of so-called dynamic treatment regimes are for example prototypical
for the selection mechanism in many European and North American labor market programs. They are also an inherent problem in many economic policy analyses. However,
due to selection on outcomes of past treatments, not all the parameters that are usually
of interest in econometric evaluation studies are identified. We show that although
several types of dynamic versions of the average treatment effects on the treated are
not identified in this case, dynamic versions similar to the average treatment effect for
some broader population are however identified.
The reevaluation of German training programs show that the dynamic treatment
approach can be used to define a wealth of parameters that are of interest in policy
analysis. Although our analysis confirms previous findings based on static potential
outcome models in general, it clarifies that the magnitude of the effects may change
dramatically depending on the precise type of dynamic counterfactual the policy maker
has in mind. Thus, our empirical example shows that these methods can be a useful
tool in applied work. However, it shows as well that there is a price to pay for this new
information, because very large data sets are required to be able to address the most
interesting comparisons with sufficient precision.
As mentioned above, some parts of this paper are closely related to the work by
Robins et al. in epidemiology and statistics, in particular the idea of specifying the
weak dynamic conditional assumption is terms of sequential conditional randomization conditional on the observed history of the various stochastic processes. Our
contribution for this part is (only) that of translating the notation and language used in
his papers to a language common in the econometric treatment evaluation literature
and making some of the underlying behavioral assumptions explicit. Furthermore, we
extend his approach in a dimension important for evaluation studies: we discuss the
identification of parameters other than the average treatment effect for the population
and show that different assumptions about the nature of the dynamic selection problem
are required for different effects that are usually of interest in applied studies. The differences concerning the behavioral implications of the different assumptions are substantial. In fact, identification of average treatment effects requires much less restrictive

123

134

M. Lechner, R. Miquel

assumptions than the identification of average treatment effects on the treated, with a
couple of interesting intermediate cases.

Appendix: Proof of theorem
A.1 Useful lemmas
Before providing the proofs in Appendix A.2, we consider two lemmas that connect
potential outcomes and treatment effects with different lengths of treatment sequence
and conditioning sequences. These relations are interesting per se, but will be particularly helpful in simplifying the identification proofs.
Lemma A.1 Connection of treatment effects defined for conditioning sets of different
lengths
s k ;s lτ

θt τ

s k ;s lτ

j

(s1 ) = θt τ

j

j

j

(s1 1)P[S 2 = (s1 1)|S1 = s1 ]

s k ;s lτ

+ θt τ

j

j

j

(s1 0)P[S 2 = (s1 0)|S1 = s1 ].

The proof is direct by applying the definitions of the treatment effect. Because treatj
j
j
j
ments are observable, P[S 2 = (s1 1)|S1 = s1 ] and P[S 2 = (s1 0)|S1 = s1 ] are identified.
Lemma A.2 Connection of treatment effects defined for treatments of different lengths
s k ;s1l

θt 1

(s1k 1);(s1l 1)

j

(s1 ) = θt

j

j

(s1 1)P[S2 = 1|S1 = s1 ]

(s1k 0);(s1l 0)

+ θt

j

j

(s1 0)P[S2 = 0|S1 = s1 ].

For the proof of this lemma, consider the following relations:
sk

(s1k 1)

j

E(Yt 1 |S1 = s1 ) = E[S2 Yt
(s1k 1)

= E[S2 Yt

j

(slk 0)

(s1k 1)

j

j

j

|S2=0, S1 = s1 ]P(S2 = 0|S1 = s1 )
j

j

|S2 = 1, S1 = s1 ]P(S2 = 1|S1 = s1 )

(s1k 0)

+E[Yt

j

|S1 = s1 ]

|S2 = 1, S1 = s1 ]P(S2 = 1|S1 = s1 )

+E[(1 − S2 )Yt
= E[Yt

(s1k 0)

j

|S1 = s1 ] + E[(1 − S2 )Yt

j

j

|S2 = 0, S1 = s1 ]P(S2 = 0|S1 = s1 )

(6)
s k ;s1l

Using the result of Eq. (6) we obtain the desired results for the connection of θt 1
s k2 ;s l2

and θt

j

(s 2 ).

123

j

(s1 )

Identification of the effects of dynamic treatments

135

A.2 Proof of Theorem 1
First note that Assumption 1 (W-DCIA) implies the following restrictions:14
sk

sk

j

F(Y2 2 |S1 = s1 , X 0 = x0 ) = F(Y2 2 |S1 = s1k , X 0 = x0 );
s k2

s k2

j

(7)

j

F(Y2 |S 2 = s 2 , X 1 = x 1 ) = F(Y2 |S1 = s1 , S2 = s2k , X 1 = x 1 ).
sk

(8)

j

We must show that F(Y2 2 |S1 = s1 ) is identified. Let us consider the starting point
sk

j

for the proof in detail. We relate F(Y2 2 |S1 = s1 ) to some function of the observable
outcomes by sequentially applying Eqs. (7) and (8) to conditional expectation versions
sk

j

of F(Y2 2 |S1 = s1 ):
sk

j

F(Y2 2 |S1 = s1 ) =
sk

F(Y2 2 |S1 = s1k , X 0 = x0 ) =
=

E

Sk

j

X 0 |S1 =s1

[F(Y2 2 |S1 = S1k , X 0 = x0 )];
sk

E

[F(Y2 2 |S1 = s1k , X 1 = x 1 )]

E

[F(Y2 2 |S 2 = s k2 , X 1 = x 1 )].

X 1 |S1 =s1k ,X 0 =x0

X 1 |S1 =s1k ,X 0 =x0

sk

Thus, we obtain the following term for the counterfactual distribution:
SK

j

F(Y2 2 |S1 = s1 ) =
=

sk

E

E

[F(Y2 2 |S 2 = s k2 , X 1 = x 1 )]

E

E

[F(Y2 |S 2 = s k2 , X 1 = x 1 )].

j
k
X 0 |S1 =s1 X 1 |S1 =s1 ,X 0 =x0

j
X 0 |S1 =s1

X 1 |S1 =s1k ,X 0 =x0

References
Abbring JH (2003) Dynamic econometric program evaluation. IZA, Discussion Paper 804
Abbring JH, Heckman JJ (2008) Dynamic policy analysis. In: Matyas L, Sevestre P (eds) The econometrics
of panel data, 3rd edn. Kluwer, Dordrecht
Angrist JD (1998) Estimating labor market impact of voluntary military service using social security data.
Econometrica 66:249–288
Angrist JD, Imbens GW, Rubin DB (1996) Identification of causal effects using instrumental variables.
J Am Stat Assoc 91:444–472
Behrman J, Cheng Y, Todd P (2004) Evaluating preschool programs when length of exposure to the program
varies: a nonparametric approach. Rev Econ Stat 86:108–132
14 Depending on whether the elements of the vector of random variables A are continuous or discrete or
both, F(A|B = b) denotes the distribution function, the probability mass function or a mixture of both,
conditional on the event that the random variable B equals a fixed value b.

123

136

M. Lechner, R. Miquel

Behrman J, Sengupta P, Todd P (2005) Progressing through PROGRESA: an impact assessment of a school
subsidy experiment in Mexico. Econ Dev Cult Change 54/1:237–275
Bergemann A, Fitzenberger B, Speckesser S (2004) Evaluating the dynamic employment effects of training
programs in East Germany using conditional difference-in-differences. ZEW, Discussion Paper 04-41
Brodaty T, Crépon B, Fougère D (2001) Using matching estimators to evaluate alternative youth employment programmes: evidence from France, 1986–1988. In: Lechner M, Pfeiffer F (eds) Econometric
Evaluation of Labour Market Policies. Physica, Heidelberg, pp 85–123
Cameron CA, Trivedi PK (2005) Microeconometrics, Chap. 25, CUP, Cambridge
Chamberlain G (1987) Asymptotic efficiency in estimation with conditional moment restrictions. J Econom
34:305–334
Chamberlain G (1992) Comment: sequential moment restrictions in panel data. J Bus Econ Stat 10:20–26
Cochran WG, Chambers SP (1965) The planning of observational studies of human population. J R Stat
Soc Ser A 128:234–266
Crépon B, Kramarz F (2002) Employed 40 hours or not-employed 39: lessons from the 1982 workweek
reduction in France. J Polit Econ 110:1355–1389
Dawid AP (1979) Conditional independence in statistical theory. J R Stat Soc Ser B 41:1–31
Ding W, Lehrer SF (2003) Estimating dynamic treatment effects from project STAR. Mimeo
Gerfin M, Lechner M (2002) Microeconometric evaluation of the active labour market policy in
Switzerland. Econ J 112:854–893
Gill RD, Robins JM (2001) Causal inference for complex longitudinal data: the continuous case. Ann Stat
29:1785–1811
Heckman JJ, Vytlacil E (1999) Local instrumental variables and latent variable models for identifying and
bounding treatment effects. Proc Natl Acad Sci 96:4730–4734
Heckman JJ, Vytlacil E (2006) Econometric evaluation of social programs. Heckman JJ, Leamer E (eds)
Handbook of Econometrics, vol. VI. North-Holland, Amsterdam (forthcoming)
Heckman JJ, Robb R (1985) Alternative methods of evaluating the impact of interventions. In: Heckman JJ,
Singer B (eds) Longitudinal analysis of labour market data. Cambridge University Press, New York,
pp 156–245
Heckman JJ, Navarro S (2005) Dynamic discrete choice and dynamic treatment effects. IZA discussion
paper 1790
Heckman JJ, LaLonde RJ, Smith JA (1999) The economics and econometrics of active labor market programs. In: Ashenfelterc O, Card D (eds) Handbook of labor economics, vol III A. North-Holland,
Amsterdam, pp 1865–2097
Imbens GW (2000) The role of the propensity score in estimating dose-response functions. Biometrika
87:706–710
Imbens GW (2004) Nonparametric estimation of average treatment effects under exogeneity: a review. Rev
Econ Stat 86:4–29
Imbens GW, Angrist JD (1994) Identification and estimation of local average treatment effects. Econometrica 62:446–475
Lechner M (1999) Earnings and employment effects of continuous off-the-job training in East Germany
after unification. J Bus Econ Stat 17:74–90
Lechner M (2001) Identification and estimation of causal effects of multiple treatments under the conditional independence assumption. In: Lechner M, Pfeiffer F (eds) Econometric evaluation of active
labour market policies. Physica, Heidelberg, pp 43–58
Lechner M (2002) Programme heterogeneity and propensity score matching: an application to the evaluation of active labour market policies. Rev Econ Stat 84:205–220
Lechner M (2004) Sequential matching estimation of dynamic causal models. University of St. Gallen,
Discussion paper, 2004-06; Revised and shortened version. J Bus Econ Stat (forthcoming)
Lechner M (2008a) A note on endogenous control variables in evaluation studies. Stat Probab Lett 78:
190–195
Lechner M (2008b) Matching estimation of dynamic treatment models: some practical issues. In: Millimet
D, Smith J, Vytlacil E (eds) Advances in econometrics, vol 21. Modelling and evaluating treatment
effects in econometrics, pp 289–333
Lechner M, Miquel R (2001) A potential outcome approach to dynamic programme evaluation: nonparametric identification, Department of Economics, University of St. Gallen, 2001-07
Lechner M, Miquel R, Wunsch C (2005) Long—run effects of public sector—sponsor training in
West Germany. IAB, Discussion Paper 3/2005

123

Identification of the effects of dynamic treatments

137

Manski CF (2004) Social learning from private experiences: the dynamics of the selection problem. J Econ
Stud 71:443–558
Miquel R (2002) Identification of dynamic treatments effects by instrumental variables. University of
St. Gallen, Discussion paper 2002-11
Miquel R (2003) Identification of effects of dynamic treatments with a difference-in-differences approach.
University of St. Gallen, Discussion paper 2003-06
Murphy SA (2003) Optimal dynamic treatment regimes. J R Stat Soc Ser B 65:331–366
Neyman J (1923) On the application of probability theory to agricultural experiments. Essay on principles.
Section 9, translated in Statistical Science (with discussion) (1990) 5:465–480
Robins JM (1999) Association, causation, and marginal structural models. Synthese 121:151–179
Robins JM (1986) A new approach to causal inference in mortality studies with sustained exposure
periods—application to control of the healthy worker survivor effect. Math Model 7:1393–1512,
with 1987 Errata to “A new approach to causal inference in mortality studies with sustained exposure
periods—application to control of the healthy worker survivor effect”. Comput Math Appl 14:917–
921; 1987 Addendum to “A new approach to causal inference in mortality studies with sustained
exposure periods—application to control of the healthy worker survivor effect”, Comput Math Appl
14:923–945; and 1987 Errata to “Addendum to ‘A new approach to causal inference in mortality studies with sustained exposure periods—application to control of the healthy worker survivor effect”’
Comput Math Appl 18:477
Robins JM (1989) The analysis of randomized and nonrandomized aids treatment trials using a new approach
to causal inference in longitudinal studies. In: Sechrest L, Freeman H, Mulley A (eds) Health service
research methodology: a focus on AIDS, 113–159, Washington, D.C., Public Health Service, National
Center for Health Services Research
Robins JM (1997) Causal inference from complex longitudinal data. Latent variable modelling and applications to causality. In: Berkane M (ed) Lecture Notes in Statistics, vol 120. Springer, New York,
pp 69–117
Robins JM (1998) Marginal structural models. In: 1997 Proceedings of the American Statistical Association,
pp 1–10
Robins JM, Hernan MA, Brumback B (2000) Marginal structural models and causal inference in epidemiology. Epidemiology 11(5):550–560
Robins JM, Greenland S, Hu F (1999a) Estimation of the causal effect of a time-varying exposure on the
marginal mean of a repeated binary outcome. J Am Stat Assoc 94:687–700
Robins JM, Greenland S, Hu F (1999b) Estimation of the causal effect of a time-varying exposure on the
marginal mean of a repeated binary outcome: rejoinder. J Am Stat Assoc 94:708–712
Rosenbaum PR (1984) The consequences of adjustment for a concomitant variable that has been affected
by the treatment. J R Stat Soc Ser A 147:656–666
Rosenbaum PR, Rubin DB (1983) The central role of the propensity score in observational studies for
causal effects. Biometrika 70:41–50
Roy AD (1951) Some thoughts on the distribution of earnings. Oxf Econ Pap 3:135–146
Rubin DB (1974) Estimating causal effects of treatments in randomized and nonrandomized studies. J Educ
Psychol 66:688–701
Rubin DB (1977) Assignment to a treatment group on the basis of a covariate. J Educ Stat 2:1–26
Rubin DB (2004) Direct and indirect causal effects via potential outcomes. Scand J Stat 31:161–170
Rubin DB (2005) Causal inference using potential outcomes: design, modeling, decisions. J Am Stat Soc
100:322–331
Sianesi B (2004) An evaluation of the Swedish System of active labour market programmes in the 1990s.
Rev Econ Stat 86:133–155
Taber CR (2000) Semiparametric identification and heterogeneity in discrete choice dynamic programming
models. J Econom 96:201–229
Vytlacil E (2002) Independence, monotonicity, and latent index models: an equivalence result. Econometrica 70:331–341
Wilks SS (1932) On the distribution of statistics in samples from a normal population of two variables with
matched sampling of one variable. Metron 9:87–126

123

